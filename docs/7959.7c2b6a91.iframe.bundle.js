"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[7959],{"./node_modules/motion/dist/es/framer-motion/dist/es/context/MotionConfigContext.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>MotionConfigContext});const MotionConfigContext=(0,__webpack_require__("./node_modules/react/index.js").createContext)({transformPagePoint:p=>p,isStatic:!1,reducedMotion:"never"})},"./node_modules/motion/dist/es/framer-motion/dist/es/render/dom/utils/filter-props.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>filterProps,D:()=>loadExternalIsValidProp});const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(key){return key.startsWith("while")||key.startsWith("drag")&&"draggable"!==key||key.startsWith("layout")||key.startsWith("onTap")||key.startsWith("onPan")||key.startsWith("onLayout")||validMotionProps.has(key)}let shouldForward=key=>!isValidMotionProp(key);function loadExternalIsValidProp(isValidProp){isValidProp&&(shouldForward=key=>key.startsWith("on")?!isValidMotionProp(key):isValidProp(key))}try{loadExternalIsValidProp(Object(function webpackMissingModule(){var e=new Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e}()))}catch{}function filterProps(props,isDom,forwardMotionProps){const filteredProps={};for(const key in props)"values"===key&&"object"==typeof props.values||(shouldForward(key)||!0===forwardMotionProps&&isValidMotionProp(key)||!isDom&&!isValidMotionProp(key)||props.draggable&&key.startsWith("onDrag"))&&(filteredProps[key]=props[key]);return filteredProps}},"./node_modules/motion/dist/es/framer-motion/dist/es/utils/use-constant.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>useConstant});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useConstant(init){const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return null===ref.current&&(ref.current=init()),ref.current}},"./src/contexts/JukiProviders.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{JukiProviders:()=>JukiProviders});var react=__webpack_require__("./node_modules/react/index.js"),JukiI18nProvider=__webpack_require__("./src/contexts/JukiI18nProvider/index.ts"),useLastPath=__webpack_require__("./src/stores/lastPath/useLastPath.ts"),useUserStore=__webpack_require__("./src/stores/user/useUserStore.ts");const JukiLastPathProvider=props=>{const{children,initialLastPath}=props,{setLastPath}=(0,useLastPath.M)(),userNickname=(0,useUserStore.k)((state=>state.user.nickname));return(0,react.useEffect)((()=>{setLastPath(initialLastPath)}),[userNickname,initialLastPath,setLastPath]),children};try{JukiLastPathProvider.displayName="JukiLastPathProvider",JukiLastPathProvider.__docgenInfo={description:"",displayName:"JukiLastPathProvider",props:{initialLastPath:{defaultValue:null,description:"",name:"initialLastPath",required:!0,type:{name:"LastPathType<T>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiLastPathProvider/JukiLastPathProvider.tsx#JukiLastPathProvider"]={docgenInfo:JukiLastPathProvider.__docgenInfo,name:"JukiLastPathProvider",path:"src/contexts/JukiLastPathProvider/JukiLastPathProvider.tsx#JukiLastPathProvider"})}catch(__react_docgen_typescript_loader_error){}var usePageStore=__webpack_require__("./src/stores/page/usePageStore.ts");var visibility=__webpack_require__("./src/helpers/visibility.ts");const isSupportedLocal=visibility.TT&&visibility.XD,JukiPageProvider=_ref=>{let{children}=_ref;return(()=>{const{setOnline}=(0,usePageStore.s)();(0,react.useEffect)((()=>{const updateOnlineStatus=()=>setOnline(navigator.onLine);return window.addEventListener("online",updateOnlineStatus),window.addEventListener("offline",updateOnlineStatus),()=>{window.removeEventListener("online",updateOnlineStatus),window.removeEventListener("offline",updateOnlineStatus)}}),[setOnline])})(),(()=>{const{setIsVisible}=(0,usePageStore.s)();(0,react.useEffect)((()=>{if(isSupportedLocal){const handler=()=>{const[currentlyVisible]=(0,visibility.Y9)();setIsVisible(currentlyVisible)};return document.addEventListener(null===visibility.XD||void 0===visibility.XD?void 0:visibility.XD.event,handler),()=>{document.removeEventListener(null===visibility.XD||void 0===visibility.XD?void 0:visibility.XD.event,handler)}}return()=>null}),[setIsVisible])})(),(()=>{const{setIsFocus}=(0,usePageStore.s)();(0,react.useEffect)((()=>{var _window,_window2;const handlerOnFocus=()=>setIsFocus(!0),handlerOnBlur=()=>setIsFocus(!1);return null===(_window=window)||void 0===_window||_window.addEventListener("focus",handlerOnFocus),null===(_window2=window)||void 0===_window2||_window2.addEventListener("blur",handlerOnBlur),()=>{var _window3,_window4;null===(_window3=window)||void 0===_window3||_window3.removeEventListener("focus",handlerOnFocus),null===(_window4=window)||void 0===_window4||_window4.removeEventListener("blur",handlerOnBlur)}}),[setIsFocus])})(),children};try{JukiPageProvider.displayName="JukiPageProvider",JukiPageProvider.__docgenInfo={description:"",displayName:"JukiPageProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiPageProvider/JukiPageProvider.tsx#JukiPageProvider"]={docgenInfo:JukiPageProvider.__docgenInfo,name:"JukiPageProvider",path:"src/contexts/JukiPageProvider/JukiPageProvider.tsx#JukiPageProvider"})}catch(__react_docgen_typescript_loader_error){}var helpers=__webpack_require__("./src/helpers/index.ts"),useRouterStore=__webpack_require__("./src/stores/router/useRouterStore.ts"),types=__webpack_require__("./src/types/index.ts");const JukiRouterProvider=props=>{const{children,routeParams,pushRoute,replaceRoute,reloadRoute,pathname,isLoadingRoute,...router}=props,[_searchParams,_setSearchParams]=(0,react.useState)(new URLSearchParams("")),updateSearchParams=(0,react.useCallback)((newSearchParams=>{const newSearchParamsSorted=(0,helpers.b$)(newSearchParams),searchParamsSorted=(0,helpers.b$)(_searchParams);newSearchParams.sort(),searchParamsSorted.sort(),newSearchParamsSorted.toString()!==searchParamsSorted.toString()&&_setSearchParams(newSearchParams)}),[_searchParams]),appendSearchParams=(0,react.useCallback)((entries=>{const newSearchParams=(0,helpers.b$)(_searchParams);for(const{name,value}of Array.isArray(entries)?entries:[entries])newSearchParams.append(name,value);updateSearchParams(newSearchParams)}),[_searchParams,updateSearchParams]),deleteSearchParams=(0,react.useCallback)((entries=>{const newSearchParams=(0,helpers.b$)(_searchParams);for(const{name,value}of Array.isArray(entries)?entries:[entries]){const values=newSearchParams.getAll(name);if(newSearchParams.delete(name),void 0!==value)for(const v of values)v!==value&&newSearchParams.append(name,v)}updateSearchParams(newSearchParams)}),[_searchParams,updateSearchParams]),setSearchParams=(0,react.useCallback)((entries=>{const newSearchParams=(0,helpers.b$)(_searchParams);for(const{name,value}of Array.isArray(entries)?entries:[entries]){newSearchParams.delete(name);let values=[];"string"==typeof value?values.push(value):values=value;for(const value of values)newSearchParams.append(name,value)}updateSearchParams(newSearchParams)}),[_searchParams,updateSearchParams]),[loaderCounter,setLoaderCounter]=(0,react.useState)(0),_push=(0,react.useCallback)((async href=>{setLoaderCounter((prevState=>prevState+1));const result=await pushRoute((0,helpers.aD)(href).path);return setLoaderCounter((prevState=>prevState-1)),result}),[pushRoute]),replace=(0,react.useCallback)((async href=>{setLoaderCounter((prevState=>prevState+1));const result=await replaceRoute((0,helpers.aD)(href).path);return setLoaderCounter((prevState=>prevState-1)),result}),[replaceRoute]),reload=(0,react.useCallback)((async()=>{setLoaderCounter((prevState=>prevState+1));const result=await reloadRoute();return setLoaderCounter((prevState=>prevState-1)),result}),[reloadRoute]),push=(0,react.useCallback)((url=>{var _router$searchParams,_router$searchParams2;let sp,pathname;if("string"==typeof url){const[p,s]=url.split("?");pathname=p,sp=new URLSearchParams(s)}else{var _url$searchParams;pathname=url.pathname,sp=(0,helpers.b$)(null!==(_url$searchParams=url.searchParams)&&void 0!==_url$searchParams?_url$searchParams:new URLSearchParams)}const token=(null!==(_router$searchParams=router.searchParams)&&void 0!==_router$searchParams?_router$searchParams:_searchParams).get(types.QueryParamKey.TOKEN);token&&sp.set(types.QueryParamKey.TOKEN,token);const company=(null!==(_router$searchParams2=router.searchParams)&&void 0!==_router$searchParams2?_router$searchParams2:_searchParams).get(types.QueryParamKey.COMPANY);company&&sp.set(types.QueryParamKey.COMPANY,company),_push({pathname,searchParams:sp})}),[router.searchParams,_searchParams,_push]),replaceProps=(0,useRouterStore.I)((state=>state.replaceProps));return(0,react.useEffect)((()=>{replaceProps(Object.values(router).filter(Boolean).length?router:{searchParams:_searchParams,appendSearchParams,deleteSearchParams,setSearchParams})}),[_searchParams,appendSearchParams,deleteSearchParams,replaceProps,router,setSearchParams]),(0,react.useEffect)((()=>{replaceProps({routeParams})}),[replaceProps,routeParams]),(0,react.useEffect)((()=>{replaceProps({pathname})}),[replaceProps,pathname]),(0,react.useEffect)((()=>{replaceProps({pushRoute:push,replaceRoute:replace,reloadRoute:reload})}),[push,reload,replace,replaceProps]),(0,react.useEffect)((()=>{replaceProps({routeParams})}),[replaceProps,routeParams]),(0,react.useEffect)((()=>{replaceProps({isLoadingRoute:isLoadingRoute||!!loaderCounter})}),[isLoadingRoute,loaderCounter,replaceProps,routeParams]),children};try{JukiRouterProvider.displayName="JukiRouterProvider",JukiRouterProvider.__docgenInfo={description:"",displayName:"JukiRouterProvider",props:{routeParams:{defaultValue:null,description:"",name:"routeParams",required:!0,type:{name:"ParsedUrlQuery"}},pushRoute:{defaultValue:null,description:"",name:"pushRoute",required:!0,type:{name:"RouterFn<string>"}},replaceRoute:{defaultValue:null,description:"",name:"replaceRoute",required:!0,type:{name:"RouterFn<string>"}},reloadRoute:{defaultValue:null,description:"",name:"reloadRoute",required:!0,type:{name:"RouterFn<void>"}},pathname:{defaultValue:null,description:"",name:"pathname",required:!0,type:{name:"string"}},isLoadingRoute:{defaultValue:null,description:"",name:"isLoadingRoute",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!0,type:{name:"URLSearchParams"}},appendSearchParams:{defaultValue:null,description:"",name:"appendSearchParams",required:!0,type:{name:"AppendSearchParamsType"}},setSearchParams:{defaultValue:null,description:"",name:"setSearchParams",required:!0,type:{name:"SetSearchParamsType"}},deleteSearchParams:{defaultValue:null,description:"",name:"deleteSearchParams",required:!0,type:{name:"DeleteSearchParamsType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiRouterProvider/JukiRouterProvider.tsx#JukiRouterProvider"]={docgenInfo:JukiRouterProvider.__docgenInfo,name:"JukiRouterProvider",path:"src/contexts/JukiRouterProvider/JukiRouterProvider.tsx#JukiRouterProvider"})}catch(__react_docgen_typescript_loader_error){}var esm=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),atoms=__webpack_require__("./src/components/atoms/index.tsx"),hooks=__webpack_require__("./src/hooks/index.ts"),useJukiNotification=__webpack_require__("./src/hooks/useJukiNotification.tsx"),settings=__webpack_require__("./src/settings/index.ts"),context=__webpack_require__("./src/contexts/JukiTasksProvider/context.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const JukiTasksProvider=_ref=>{let{children}=_ref;const{addErrorNotification,addSuccessNotification}=(0,useJukiNotification.E)(),[submissions,setSubmissions]=(0,react.useState)({}),[submissionsToCheck,setSubmissionsToCheck]=(0,react.useState)([]),userSessionId=(0,hooks.kH)((state=>state.user.sessionId)),submissionIdListenerCount=(0,react.useRef)({}),mutate=(0,hooks.ej)();(0,react.useEffect)((()=>{for(const{id,problem,contest}of submissionsToCheck){const submission=submissions[id],verdict=(null==submission?void 0:submission.verdict)||null,points=(null==submission?void 0:submission.points)||0,header=contest?(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"contest"}),": ",contest.name]}),(0,jsx_runtime.jsxs)("div",{children:["(",contest.problemIndex,") ",problem.name]})]}):(0,jsx_runtime.jsx)("div",{children:problem.name});null!==verdict&&verdict!==esm.npq.PENDING&&(verdict===esm.npq.AC?addSuccessNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,(0,jsx_runtime.jsx)(atoms.T,{className:"tt-ce",children:esm.K7p[esm.npq.AC].label})]})):verdict===esm.npq.PA?addSuccessNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-ce",children:esm.K7p[esm.npq.PA].label}),"&bnsp; (",points," ",(0,jsx_runtime.jsx)(atoms.T,{children:"pts."}),")"]})]})):Object.keys(esm.K7p).includes(verdict)?addErrorNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,(0,jsx_runtime.jsx)(atoms.T,{className:"tt-ce",children:esm.K7p[verdict].label})]})):addErrorNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,verdict]})),setSubmissionsToCheck((prevState=>prevState.filter((_ref2=>{let{id:pId}=_ref2;return pId!==id})))))}}),[submissionsToCheck,submissions,addSuccessNotification,addErrorNotification]);const unListenSubmission=(0,react.useCallback)((submissionId=>{if(!submissionIdListenerCount.current[submissionId]){const event={event:esm.ad3.UNSUBSCRIBE_SUBMISSION_RUN_STATUS,sessionId:userSessionId,submitId:submissionId};settings.u.SOCKET.unsubscribeAll(event),submissionIdListenerCount.current[submissionId]=0}}),[userSessionId]),listenSubmission=(0,react.useCallback)(((submissionToCheck,withNotification)=>{var _submissionIdListener;withNotification&&setSubmissionsToCheck((prevState=>[...prevState,submissionToCheck]));const event={event:esm.ad3.SUBSCRIBE_SUBMISSION_RUN_STATUS,sessionId:userSessionId,submitId:submissionToCheck.id};submissionIdListenerCount.current[submissionToCheck.id]=(null!==(_submissionIdListener=submissionIdListenerCount.current[submissionToCheck.id])&&void 0!==_submissionIdListener?_submissionIdListener:0)+1,settings.u.SOCKET.send(event,(data=>{if((0,esm.OwF)(data)){data.status!==esm.aeR.COMPLETED&&data.status!==esm.aeR.RECEIVED||mutate(new RegExp(`${settings.u.SERVICE_API_V1_URL}/submission`,"g"));const nextStatus=data.status,submitId=data.submitId;setSubmissions((prevState=>{var _prevState$submitId;const submissionData=prevState[submitId],currentStatus=null===(_prevState$submitId=prevState[submitId])||void 0===_prevState$submitId?void 0:_prevState$submitId.status;return submissionData?data.messageTimestamp>submissionData.messageTimestamp?{...prevState,[submitId]:data}:[esm.aeR.COMPILING,esm.aeR.COMPILED,esm.aeR.FAILED].includes(nextStatus)&&data.messageTimestamp>submissionData.messageTimestamp?{...prevState,[submitId]:data}:[esm.aeR.FETCHING_TEST_CASES,esm.aeR.RUNNING_SAMPLE_TEST_CASES,esm.aeR.RUNNING_TEST_CASES,esm.aeR.EXECUTED_TEST_CASE].includes(nextStatus)&&[esm.aeR.COMPILING,esm.aeR.COMPILED,esm.aeR.FAILED,esm.aeR.FETCHING_TEST_CASES,esm.aeR.RUNNING_SAMPLE_TEST_CASES,esm.aeR.RUNNING_TEST_CASES,esm.aeR.EXECUTED_TEST_CASE].includes(currentStatus)&&data.messageTimestamp>submissionData.messageTimestamp?{...prevState,[submitId]:{...data}}:[esm.aeR.GRADING,esm.aeR.COMPLETED].includes(nextStatus)&&[esm.aeR.RECEIVED,esm.aeR.COMPILING,esm.aeR.COMPILED,esm.aeR.FAILED,esm.aeR.FETCHING_TEST_CASES,esm.aeR.RUNNING_SAMPLE_TEST_CASES,esm.aeR.RUNNING_TEST_CASES,esm.aeR.EXECUTED_TEST_CASE,esm.aeR.GRADING].includes(currentStatus)?{...prevState,[submitId]:data}:prevState:{...prevState,[submitId]:data}}))}}))}),[mutate,userSessionId]);return(0,jsx_runtime.jsx)(context.s.Provider,{value:{unListenSubmission,listenSubmission,submissions},children})};try{JukiTasksProvider.displayName="JukiTasksProvider",JukiTasksProvider.__docgenInfo={description:"",displayName:"JukiTasksProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiTasksProvider/JukiTasksProvider.tsx#JukiTasksProvider"]={docgenInfo:JukiTasksProvider.__docgenInfo,name:"JukiTasksProvider",path:"src/contexts/JukiTasksProvider/JukiTasksProvider.tsx#JukiTasksProvider"})}catch(__react_docgen_typescript_loader_error){}var MotionConfigContext=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/context/MotionConfigContext.mjs"),filter_props=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/render/dom/utils/filter-props.mjs"),use_constant=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/utils/use-constant.mjs");function MotionConfig({children,isValidProp,...config}){isValidProp&&(0,filter_props.D)(isValidProp),(config={...(0,react.useContext)(MotionConfigContext.Q),...config}).isStatic=(0,use_constant.M)((()=>config.isStatic));const context=(0,react.useMemo)((()=>config),[JSON.stringify(config.transition),config.transformPagePoint,config.reducedMotion]);return(0,jsx_runtime.jsx)(MotionConfigContext.Q.Provider,{value:context,children})}var molecules=__webpack_require__("./src/components/molecules/index.tsx"),organisms=__webpack_require__("./src/components/organisms/index.tsx"),server=__webpack_require__("./src/components/server/index.ts"),JukiUIProvider_context=__webpack_require__("./src/contexts/JukiUIProvider/context.ts"),Image=__webpack_require__("./src/contexts/JukiUIProvider/Image.tsx"),Link=__webpack_require__("./src/contexts/JukiUIProvider/Link.tsx");const ReactTooltip=(0,react.lazy)((()=>Promise.all([__webpack_require__.e(165),__webpack_require__.e(6931)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/react-tooltip/dist/react-tooltip.min.mjs")).then((module=>({default:module.Tooltip}))))),JukiUIProvider=_ref=>{let{children,components}=_ref;const{viewPortSize,viewPortHeight,viewPortWidth}=(()=>{const[viewPortSize,setViewPortSize]=(0,react.useState)(""),[viewPortWidth,setViewPortWidth]=(0,react.useState)(0),[viewPortHeight,setViewPortHeight]=(0,react.useState)(0);return(0,react.useEffect)((()=>{var _window;const listener=()=>{var _document;const vh=.01*window.innerHeight;null===(_document=document)||void 0===_document||_document.documentElement.style.setProperty("--vh",`${vh}px`);const width=window.innerWidth,height=window.innerHeight;setViewPortWidth(width),setViewPortHeight(height),setViewPortSize(width>=1920?"hg":width>=1280?"lg":width>=640?"md":"sm")};return listener(),null===(_window=window)||void 0===_window||_window.addEventListener("resize",listener),()=>{var _window2;null===(_window2=window)||void 0===_window2||_window2.removeEventListener("resize",listener)}}),[]),{viewPortSize,viewPortWidth,viewPortHeight}})(),{Image:ImageCmp=Image._,Link:LinkCMP=Link.N}=components||{Image:Image._,Link:Link.N},isLoadingRoute=(0,useRouterStore.I)((state=>state.isLoadingRoute)),ref=(0,react.useRef)(null),LinkCmp=(0,react.useCallback)((_ref2=>{let pathname,sp,{href,...restProps}=_ref2;if("string"==typeof href){const[p,s]=href.split("?");pathname=p,sp=new URLSearchParams(s)}else pathname=href.pathname,sp=new URLSearchParams("?"+(href.query||""));const query=(0,helpers.x7)(sp);return(0,jsx_runtime.jsx)(LinkCMP,{href:{pathname,query},...restProps})}),[LinkCMP]),value=(0,react.useMemo)((()=>({jukiAppDivRef:ref,viewPortSize,viewPortHeight,viewPortWidth,components:{Image:ImageCmp,Link:LinkCmp}})),[viewPortSize,viewPortHeight,viewPortWidth,ImageCmp,LinkCmp]);return(0,jsx_runtime.jsx)(MotionConfig,{transition:{duration:types.Duration.NORMAL},children:(0,jsx_runtime.jsx)(JukiUIProvider_context._.Provider,{value,children:(0,jsx_runtime.jsx)(organisms.dW,{children:(0,jsx_runtime.jsxs)(organisms.ph,{children:[isLoadingRoute&&(0,jsx_runtime.jsx)("div",{className:"page-line-loader",children:(0,jsx_runtime.jsx)(server.QdK,{delay:800})}),(0,jsx_runtime.jsxs)("div",{id:"juki-app",className:(0,helpers.xW)({"loading-route":isLoadingRoute}),ref,children:[children,(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(molecules.QA,{children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"loading component"})}),children:(0,jsx_runtime.jsx)(ReactTooltip,{id:"jk-tooltip",opacity:1,positionStrategy:"fixed",clickable:!0,render:_ref3=>{var _activeAnchor$getAttr;let{content,activeAnchor}=_ref3;return content?"false"===(null==activeAnchor?void 0:activeAnchor.getAttribute("data-tooltip-t"))?content:(0,jsx_runtime.jsx)(atoms.T,{className:null!==(_activeAnchor$getAttr=null==activeAnchor?void 0:activeAnchor.getAttribute("data-tooltip-t-class-name"))&&void 0!==_activeAnchor$getAttr?_activeAnchor$getAttr:"tt-se tx-s",children:content}):null}})})]})]})})})})};try{JukiUIProvider.displayName="JukiUIProvider",JukiUIProvider.__docgenInfo={description:"",displayName:"JukiUIProvider",props:{components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"Partial<UIComponentsContextInterface>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiUIProvider/JukiUIProvider.tsx#JukiUIProvider"]={docgenInfo:JukiUIProvider.__docgenInfo,name:"JukiUIProvider",path:"src/contexts/JukiUIProvider/JukiUIProvider.tsx#JukiUIProvider"})}catch(__react_docgen_typescript_loader_error){}var constants=__webpack_require__("./src/constants/index.ts");const JukiUserProvider=props=>{const{children}=props,setUser=(0,hooks.kH)((state=>state.setUser)),setCompany=(0,hooks.kH)((state=>state.setCompany)),setDevice=(0,hooks.kH)((state=>state.setDevice)),setMutate=(0,hooks.kH)((state=>state.setMutate)),userNickname=(0,hooks.kH)((state=>state.user.nickname)),companyKey=(0,hooks.kH)((state=>state.company.key)),userSessionId=(0,hooks.kH)((state=>state.user.sessionId)),userPreferredTheme=(0,hooks.kH)((state=>{var _state$user$settings;return null===(_state$user$settings=state.user.settings)||void 0===_state$user$settings?void 0:_state$user$settings[esm.mZ_.THEME]})),userPreferredLanguage=(0,hooks.kH)((state=>{var _state$user$settings2;return null===(_state$user$settings2=state.user.settings)||void 0===_state$user$settings2?void 0:_state$user$settings2[esm.mZ_.LANGUAGE]})),i18nChangeLanguage=(0,hooks.TH)((state=>state.changeLanguage)),{data,mutate}=(0,hooks.Ls)(settings.u.API_V1.auth.ping().url,{refreshInterval:3e5}),matchMutate=(0,hooks.ej)(),refreshAllRequest=(0,react.useCallback)((async()=>{await matchMutate(new RegExp(`${settings.u.SERVICE_API_V1_URL}`,"g"))}),[matchMutate]);return(0,react.useEffect)((()=>{refreshAllRequest()}),[userNickname,companyKey,userSessionId,refreshAllRequest]),(0,react.useEffect)((()=>{i18nChangeLanguage(userPreferredLanguage)}),[i18nChangeLanguage,userPreferredLanguage]),(0,react.useEffect)((()=>{if(!data)return;let preferredLanguage=localStorage.getItem(esm.mZ_.LANGUAGE);preferredLanguage!==esm.TMK.EN&&preferredLanguage!==esm.TMK.ES&&(preferredLanguage=esm.TMK.EN);let preferredTheme=localStorage.getItem(esm.mZ_.THEME);preferredTheme!==esm.Sxu.DARK&&preferredTheme!==esm.Sxu.LIGHT&&(preferredTheme=esm.Sxu.LIGHT),null!=data&&data.success?(setCompany(data.content.company),data.content.user.isLogged?setUser(data.content.user):setUser({...null==data?void 0:data.content.user,settings:{[esm.mZ_.THEME]:preferredTheme,[esm.mZ_.LANGUAGE]:preferredLanguage,[esm.mZ_.DATA_VIEW_MODE]:esm.pln.ROWS,[esm.mZ_.MENU_VIEW_MODE]:esm.MDi.VERTICAL,[esm.mZ_.NEWSLETTER_SUBSCRIPTION]:!0}}),helpers.WW.setItem(settings.u.TOKEN_NAME,null==data?void 0:data.content.user.sessionId)):setUser({...constants.GO,settings:{[esm.mZ_.THEME]:preferredTheme,[esm.mZ_.LANGUAGE]:preferredLanguage,[esm.mZ_.DATA_VIEW_MODE]:esm.pln.ROWS,[esm.mZ_.MENU_VIEW_MODE]:esm.MDi.VERTICAL,[esm.mZ_.NEWSLETTER_SUBSCRIPTION]:!0}})}),[data,setCompany,setUser]),(0,react.useEffect)((()=>{"undefined"!=typeof window&&__webpack_require__.e(159).then(__webpack_require__.bind(__webpack_require__,"./node_modules/react-device-detect/dist/lib.js")).then((mod=>{setDevice({type:mod.deviceType,isMobile:mod.isMobile,isBrowser:mod.isBrowser,label:mod.isMobile?`${mod.mobileModel} ${mod.mobileVendor}`:`${mod.browserName} ${mod.browserVersion}`,osLabel:`${mod.osName} ${mod.osVersion}`})})),setMutate(mutate)}),[mutate,setDevice,setMutate]),(0,react.useEffect)((()=>{var _document$querySelect,_document$querySelect2,_document$querySelect3,_document$querySelect4;"undefined"!=typeof document&&(null===(_document$querySelect=document.querySelector("body"))||void 0===_document$querySelect||_document$querySelect.classList.remove("jk-theme-dark"),null===(_document$querySelect2=document.querySelector("body"))||void 0===_document$querySelect2||_document$querySelect2.classList.remove("jk-theme-light"),userPreferredTheme===esm.Sxu.DARK?null===(_document$querySelect3=document.querySelector("body"))||void 0===_document$querySelect3||_document$querySelect3.classList.add("jk-theme-dark"):null===(_document$querySelect4=document.querySelector("body"))||void 0===_document$querySelect4||_document$querySelect4.classList.add("jk-theme-light"))}),[userPreferredTheme]),children};try{JukiUserProvider.displayName="JukiUserProvider",JukiUserProvider.__docgenInfo={description:"",displayName:"JukiUserProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiUserProvider/JukiUserProvider.tsx#JukiUserProvider"]={docgenInfo:JukiUserProvider.__docgenInfo,name:"JukiUserProvider",path:"src/contexts/JukiUserProvider/JukiUserProvider.tsx#JukiUserProvider"})}catch(__react_docgen_typescript_loader_error){}var useWebsocketStore=__webpack_require__("./src/stores/websocket/useWebsocketStore.ts");const JukiWebsocketProvider=props=>{const{children}=props,isPageVisible=(0,hooks.sr)((state=>state.isVisible)),id=(0,useWebsocketStore.q)((state=>state.id)),setId=(0,useWebsocketStore.q)((state=>state.setId)),setIsConnected=(0,useWebsocketStore.q)((state=>state.setIsConnected)),connectionId=(0,useWebsocketStore.q)((state=>state.connectionId)),setConnectionId=(0,useWebsocketStore.q)((state=>state.setConnectionId)),userSessionId=(0,hooks.kH)((state=>state.user.sessionId)),intervalRef=(0,react.useRef)(null);return(0,react.useEffect)((()=>{const event={event:esm.ad3.PING,sessionId:userSessionId},callback=data=>{(0,esm.MvP)(data)&&setConnectionId(data.connectionId)};return settings.u.SOCKET.subscribe(event,callback),()=>{settings.u.SOCKET.unsubscribe(event,callback)}}),[userSessionId,setConnectionId]),(0,react.useEffect)((()=>{settings.u.SOCKET.connect(),settings.u.SOCKET.addEventListener("open",(()=>{setIsConnected(!0),setId(settings.u.SOCKET.getId())})),settings.u.SOCKET.addEventListener("close",(()=>{setIsConnected(!1)})),settings.u.SOCKET.addEventListener("error",(()=>{setIsConnected(!1)}))}),[setId,setIsConnected]),(0,react.useEffect)((()=>{settings.u.SOCKET.authenticate(userSessionId),intervalRef.current&&clearInterval(intervalRef.current),intervalRef.current=setInterval((()=>{isPageVisible&&settings.u.SOCKET.send({event:esm.ad3.PING,sessionId:userSessionId})}),esm.iW2)}),[isPageVisible,connectionId,userSessionId,id]),children};try{JukiWebsocketProvider.displayName="JukiWebsocketProvider",JukiWebsocketProvider.__docgenInfo={description:"",displayName:"JukiWebsocketProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiWebsocketProvider/JukiWebsocketProvider.tsx#JukiWebsocketProvider"]={docgenInfo:JukiWebsocketProvider.__docgenInfo,name:"JukiWebsocketProvider",path:"src/contexts/JukiWebsocketProvider/JukiWebsocketProvider.tsx#JukiWebsocketProvider"})}catch(__react_docgen_typescript_loader_error){}const JukiProviders=props=>{const{children,components,router,initialLastPath}=props;return(0,jsx_runtime.jsx)(JukiPageProvider,{children:(0,jsx_runtime.jsx)(JukiRouterProvider,{searchParams:router.searchParams,appendSearchParams:router.appendSearchParams,setSearchParams:router.setSearchParams,deleteSearchParams:router.deleteSearchParams,routeParams:router.routeParams,pushRoute:router.pushRoute,replaceRoute:router.replaceRoute,reloadRoute:router.reloadRoute,isLoadingRoute:router.isLoadingRoute,pathname:router.pathname,children:(0,jsx_runtime.jsx)(JukiUserProvider,{children:(0,jsx_runtime.jsx)(JukiWebsocketProvider,{children:(0,jsx_runtime.jsx)(JukiUIProvider,{components,children:(0,jsx_runtime.jsx)(JukiLastPathProvider,{initialLastPath,children:(0,jsx_runtime.jsx)(JukiTasksProvider,{children:(0,jsx_runtime.jsx)(JukiI18nProvider.p,{children})})})})})})})})};try{JukiProviders.displayName="JukiProviders",JukiProviders.__docgenInfo={description:"",displayName:"JukiProviders",props:{components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"Partial<UIComponentsContextInterface>"}},initialLastPath:{defaultValue:null,description:"",name:"initialLastPath",required:!0,type:{name:"LastPathType<T>"}},router:{defaultValue:null,description:"",name:"router",required:!0,type:{name:"{ searchParams: URLSearchParams; appendSearchParams: AppendSearchParamsType; setSearchParams: SetSearchParamsType; ... 6 more ...; isLoadingRoute?: boolean | undefined; } | { ...; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiProviders.tsx#JukiProviders"]={docgenInfo:JukiProviders.__docgenInfo,name:"JukiProviders",path:"src/contexts/JukiProviders.tsx#JukiProviders"})}catch(__react_docgen_typescript_loader_error){}}}]);