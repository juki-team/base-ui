"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[1843,8216,8563],{"./src/components/organisms/worksheet/ContentsSectionHeader.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ContentsSectionHeader:()=>ContentsSectionHeader});var react=__webpack_require__("./node_modules/react/index.js"),helpers=__webpack_require__("./src/helpers/index.ts"),atoms=__webpack_require__("./src/components/atoms/index.tsx"),server=__webpack_require__("./src/components/atoms/server/index.ts"),TableOfContents=__webpack_require__("./src/components/organisms/worksheet/sheets/TableOfContents.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const TableOfContentsModal=_ref=>{let{sheetsInPages,isOpen,onClose,setPage}=_ref;return(0,jsx_runtime.jsx)(atoms.aF,{isOpen,onClose,closeIcon:!1,children:(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch",children:[(0,jsx_runtime.jsx)("div",{className:"jk-row bc-py jk-pg-sm",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se fw-bd cr-we",children:"table of content"})}),(0,jsx_runtime.jsx)(TableOfContents.M,{sheetsInPages,onClick:setPage?index=>{setPage&&(setPage(index),onClose())}:void 0})]})})};try{TableOfContentsModal.displayName="TableOfContentsModal",TableOfContentsModal.__docgenInfo={description:"",displayName:"TableOfContentsModal",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},setPage:{defaultValue:null,description:"",name:"setPage",required:!1,type:{name:"((page: number) => void)"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/sheets/TableOfContentsModal.tsx#TableOfContentsModal"]={docgenInfo:TableOfContentsModal.__docgenInfo,name:"TableOfContentsModal",path:"src/components/organisms/worksheet/sheets/TableOfContentsModal.tsx#TableOfContentsModal"})}catch(__react_docgen_typescript_loader_error){}const ContentsSectionHeader=_ref=>{let{page,setPage,sheetsInPages,totalPages:initialTotalPages}=_ref;const[isOpen,setIsOpen]=(0,react.useState)(!1),totalPages=null!=initialTotalPages?initialTotalPages:sheetsInPages.length;return(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch gap bc-we jk-br-ie cr-pd fw-bd",children:[(0,jsx_runtime.jsx)(TableOfContentsModal,{isOpen,setPage,onClose:()=>setIsOpen(!1),sheetsInPages}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap center",children:[(0,jsx_runtime.jsxs)("div",{onClick:page<=1?void 0:()=>setPage(page-1),className:(0,helpers.xW)("jk-row gap jk-pg-xsm jk-br-ie",{"cr-g6":page<=1,"cr-pr hoverable":!(page<=1)}),children:[(0,jsx_runtime.jsx)(server.gFQ,{}),(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"previous"})]}),(0,jsx_runtime.jsxs)("div",{className:"jk-row cr-pr hoverable jk-br-ie jk-pg-xsm",onClick:()=>setIsOpen(!0),children:[(0,jsx_runtime.jsx)(server.jZu,{}),(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"table of contents"})]}),(0,jsx_runtime.jsxs)("div",{onClick:page===totalPages?void 0:()=>setPage(page+1),className:(0,helpers.xW)("jk-row gap jk-pg-xsm jk-br-ie",{"cr-g6":page===totalPages,"cr-pr hoverable":!(page===totalPages)}),children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"next"}),(0,jsx_runtime.jsx)(server.sIg,{})]})]})]})};try{ContentsSectionHeader.displayName="ContentsSectionHeader",ContentsSectionHeader.__docgenInfo={description:"",displayName:"ContentsSectionHeader",props:{page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"number"}},setPage:{defaultValue:null,description:"",name:"setPage",required:!0,type:{name:"Dispatch<number>"}},sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},totalPages:{defaultValue:null,description:"",name:"totalPages",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/ContentsSectionHeader.tsx#ContentsSectionHeader"]={docgenInfo:ContentsSectionHeader.__docgenInfo,name:"ContentsSectionHeader",path:"src/components/organisms/worksheet/ContentsSectionHeader.tsx#ContentsSectionHeader"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/WorksheetBodies.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorksheetBodies:()=>WorksheetBodies});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/atoms/index.tsx"),_atoms_server__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/atoms/server/index.ts"),_ContentsSectionHeader__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/organisms/worksheet/ContentsSectionHeader.tsx"),_WorksheetBody__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/organisms/worksheet/WorksheetBody.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const WorksheetBodies=props=>{var _sheetsInPages,_sheetsInPages2;const{sheetsInPages,isEditor,setSheets,userResults,isSolvable,worksheetKey,withoutContentsHeader,page:initialPage,setPage:initialSetPage,lastPageChildren,readOnly}=props,containerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[page,_setPage]=(0,_hooks__WEBPACK_IMPORTED_MODULE_1__.ID)("number"==typeof initialPage?initialPage:1),setPage=index=>{var _document$getElementB,_document$getElementB2;((null!=initialSetPage?initialSetPage:_setPage)(index),"undefined"!=typeof document)&&(null===(_document$getElementB=document.getElementById("jk-two-content-section-second-panel"))||void 0===_document$getElementB||_document$getElementB.scrollTo({top:0,behavior:"smooth"}),null===(_document$getElementB2=document.getElementById("jk-worksheet-body"))||void 0===_document$getElementB2||_document$getElementB2.scrollTo({top:0,behavior:"smooth"}))},setPageSheets=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((newPageHeader,newPageSheetContent)=>{const newSheetsInPages=[...sheetsInPages];newSheetsInPages[page-1]={header:null!=newPageHeader?newPageHeader:newSheetsInPages[page-1].header,content:newPageSheetContent};const newSheets=[];for(const{header,content}of newSheetsInPages)newSheets.push(header,...content);null==setSheets||setSheets(newSheets)}),[page,setSheets,sheetsInPages]),setSheet=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value=>{const newPageSheetContent="function"==typeof value?value(sheetsInPages[page-1].content):value;setPageSheets(null,newPageSheetContent)}),[page,setPageSheets,sheetsInPages]),pages=sheetsInPages.length;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-col gap nowrap top stretch extend worksheet-bodies",children:[(pages>1||setSheets)&&!withoutContentsHeader&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"jk-row",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ContentsSectionHeader__WEBPACK_IMPORTED_MODULE_4__.ContentsSectionHeader,{page,setPage,sheetsInPages})}),setSheets&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row gap extend nowrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.pd,{label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,{className:"tt-se",children:"page title"}),value:null===(_sheetsInPages=sheetsInPages[page-1])||void 0===_sheetsInPages?void 0:_sheetsInPages.header.title,onChange:title=>{setPageSheets({...sheetsInPages[page-1].header,title},sheetsInPages[page-1].content)},expand:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.$n,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"remove page divider",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_3__.d7y,{}),onClick:()=>{const newSheetsInPages=[...sheetsInPages],newSheets=[];if(page===pages){let i=0;for(const{header,content}of newSheetsInPages)i!==page-1&&newSheets.push(header),newSheets.push(...content),i++;setSheets(newSheets)}else{let i=0,contentDeleted=null;for(const{header,content}of newSheetsInPages)i===page-1?contentDeleted=content:(newSheets.push(header),null!==contentDeleted&&(newSheets.push(...contentDeleted),contentDeleted=null),newSheets.push(...content)),i++;setSheets(newSheets)}page>1&&page===pages&&setPage(Math.max(page,1))},disabled:pages<=1})]},`${page}`),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_WorksheetBody__WEBPACK_IMPORTED_MODULE_5__.WorksheetBody,{sheet:null===(_sheetsInPages2=sheetsInPages[page-1])||void 0===_sheetsInPages2?void 0:_sheetsInPages2.content,setSheet:setSheets?setSheet:void 0,userResults,readOnly:!!readOnly,isSolvable,isEditor,worksheetKey,ref:containerRef}),page<pages?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.$n,{className:"next-button",type:"light",onClick:()=>setPage(page+1),expand:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,{className:"tt-se",children:"next page"})}):lastPageChildren]})};try{WorksheetBodies.displayName="WorksheetBodies",WorksheetBodies.__docgenInfo={description:"",displayName:"WorksheetBodies",props:{sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},setSheets:{defaultValue:null,description:"",name:"setSheets",required:!1,type:{name:"Dispatch<BodyWorksheetType[]>"}},userResults:{defaultValue:null,description:"",name:"userResults",required:!1,type:{name:"UserResultsType"}},isSolvable:{defaultValue:null,description:"",name:"isSolvable",required:!0,type:{name:"boolean"}},isEditor:{defaultValue:null,description:"",name:"isEditor",required:!1,type:{name:"boolean"}},worksheetKey:{defaultValue:null,description:"",name:"worksheetKey",required:!0,type:{name:"string"}},withoutContentsHeader:{defaultValue:null,description:"",name:"withoutContentsHeader",required:!1,type:{name:"boolean"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number"}},setPage:{defaultValue:null,description:"",name:"setPage",required:!1,type:{name:"((page: number) => void)"}},lastPageChildren:{defaultValue:null,description:"",name:"lastPageChildren",required:!1,type:{name:"ReactNode"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/WorksheetBodies.tsx#WorksheetBodies"]={docgenInfo:WorksheetBodies.__docgenInfo,name:"WorksheetBodies",path:"src/components/organisms/worksheet/WorksheetBodies.tsx#WorksheetBodies"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/WorksheetEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorksheetEditor:()=>WorksheetEditor});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/index.ts"),_WorksheetBodies__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/organisms/worksheet/WorksheetBodies.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const WorksheetEditor=props=>{const{content,setContent,worksheetKey,isSolvable=!1,isEditor=!1,page:initialPage,setPage:initialSetPage,lastPageChildren,readOnly=!1}=props,locationHash=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.QZ)(),scrolled=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!1),{viewPortSize}=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.p1)(),userIsLogged=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.kH)((state=>state.user.isLogged));(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{let render=0,timeoutId=null;const go=()=>{render++,timeoutId=setTimeout((()=>{var _window,_window$document;const element=null===(_window=window)||void 0===_window||null===(_window$document=_window.document)||void 0===_window$document?void 0:_window$document.getElementById(encodeURI(locationHash));element?(null==element||element.scrollIntoView({behavior:"smooth"}),scrolled.current=!0):render<50&&go()}),400)};return scrolled.current||go(),()=>{null!==timeoutId&&clearTimeout(timeoutId)}}),[locationHash,content]);const[page,_setPage]=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.ID)(null!=initialPage?initialPage:1),setPage=null!=initialSetPage?initialSetPage:_setPage,sheetsInPages=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.bs0)(content)),[content]),withoutContentsNav="sm"!==viewPortSize&&!setContent;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"jk-row gap nowrap worksheet-editor-container center top",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_WorksheetBodies__WEBPACK_IMPORTED_MODULE_3__.WorksheetBodies,{sheetsInPages,setSheets:setContent,isSolvable:isSolvable&&userIsLogged,readOnly,isEditor,worksheetKey,withoutContentsHeader:withoutContentsNav,page,setPage,lastPageChildren})})};try{WorksheetEditor.displayName="WorksheetEditor",WorksheetEditor.__docgenInfo={description:"",displayName:"WorksheetEditor",props:{content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"BodyWorksheetType[]"}},setContent:{defaultValue:null,description:"",name:"setContent",required:!0,type:{name:"(content: BodyWorksheetType[]) => void"}},worksheetKey:{defaultValue:null,description:"",name:"worksheetKey",required:!0,type:{name:"string"}},isSolvable:{defaultValue:null,description:"",name:"isSolvable",required:!1,type:{name:"boolean"}},isEditor:{defaultValue:null,description:"",name:"isEditor",required:!1,type:{name:"boolean"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number"}},setPage:{defaultValue:null,description:"",name:"setPage",required:!1,type:{name:"((newPage: number) => void)"}},lastPageChildren:{defaultValue:null,description:"",name:"lastPageChildren",required:!1,type:{name:"ReactNode"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/WorksheetEditor.tsx#WorksheetEditor"]={docgenInfo:WorksheetEditor.__docgenInfo,name:"WorksheetEditor",path:"src/components/organisms/worksheet/WorksheetEditor.tsx#WorksheetEditor"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/sheets/TableOfContents.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>TableOfContents});__webpack_require__("./node_modules/react/index.js");var _constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/constants/index.ts"),_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TableOfContents=_ref=>{let{sheetsInPages,onClick,page,setSheets}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"jk-col gap stretch jk-pg-sm wh-100",children:sheetsInPages.map(((_ref2,index)=>{var _content$;let{header,content}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)("fw-bd jk-row space-between stretch jk-br-ie",{hoverable:!!onClick,"bc-hl":page===index+1}),onClick:()=>null==onClick?void 0:onClick(index+1),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{style:{padding:2},className:"jk-row gap nowrap flex-1 left",children:[(0,_constants__WEBPACK_IMPORTED_MODULE_1__._z)()[null===(_content$=content[0])||void 0===_content$?void 0:_content$.type]||null,header.title]},`${header.title}-${index}`)},index)}))})};try{TableOfContents.displayName="TableOfContents",TableOfContents.__docgenInfo={description:"",displayName:"TableOfContents",props:{sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},setSheets:{defaultValue:null,description:"",name:"setSheets",required:!1,type:{name:"Dispatch<BodyWorksheetType[]>"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"((index: number) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/sheets/TableOfContents.tsx#TableOfContents"]={docgenInfo:TableOfContents.__docgenInfo,name:"TableOfContents",path:"src/components/organisms/worksheet/sheets/TableOfContents.tsx#TableOfContents"})}catch(__react_docgen_typescript_loader_error){}}}]);