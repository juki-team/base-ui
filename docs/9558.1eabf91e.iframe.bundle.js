"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[9558],{"./src/components/hooks/useStableRef.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>useStableRef});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),useStableRef=function(initialValue){var searchVisiblesRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(initialValue);return searchVisiblesRef.current=initialValue,searchVisiblesRef}},"./src/components/organisms/_layz_/WorksheetEditor/sheets/AddNewChild.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>AddNewChild});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/constants/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/atoms/index.tsx"),_atoms_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/atoms/server/index.ts"),_molecules__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/molecules/index.ts"),_logos__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/organisms/_layz_/WorksheetEditor/sheets/logos.tsx");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _to_consumable_array(arr){return function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}(arr)||function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}(arr)||function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var AddNewChild=function(props){var index=props.index,setSheet=props.setSheet,mdSheet=props.mdSheet,codeEditorSheet=props.codeEditorSheet,graphSheet=props.graphSheet,listSheet=props.listSheet,quizProblemSheet=props.quizProblemSheet,pageDivider=props.pageDivider,compacted=props.compacted,quizOptionsSheetType=props.quizOptionsSheetType,floatToolbarPlacement=props.floatToolbarPlacement,actionButtons=[];if(mdSheet){actionButtons.push(_object_spread_props(_object_spread({},(0,_logos__WEBPACK_IMPORTED_MODULE_6__._)("tiny")[_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.JK_MD]),{onClick:function(){setSheet(function(sheet){var newSheet=_to_consumable_array(sheet);return newSheet.splice(index+1,0,(0,_constants__WEBPACK_IMPORTED_MODULE_2__.Wg)()),newSheet})}}))}if(codeEditorSheet){actionButtons.push(_object_spread_props(_object_spread({},(0,_logos__WEBPACK_IMPORTED_MODULE_6__._)("tiny")[_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.CODE_EDITOR]),{onClick:function(){setSheet(function(sheet){var newSheet=_to_consumable_array(sheet);return newSheet.splice(index+1,0,(0,_constants__WEBPACK_IMPORTED_MODULE_2__.qL)()),newSheet})}}))}if(graphSheet){actionButtons.push(_object_spread_props(_object_spread({},(0,_logos__WEBPACK_IMPORTED_MODULE_6__._)("tiny")[_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.GRAPH]),{onClick:function(){setSheet(function(sheet){var newSheet=_to_consumable_array(sheet);return newSheet.splice(index+1,0,(0,_constants__WEBPACK_IMPORTED_MODULE_2__.Zk)()),newSheet})}}))}if(listSheet){actionButtons.push(_object_spread_props(_object_spread({},(0,_logos__WEBPACK_IMPORTED_MODULE_6__._)("tiny")[_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.LIST]),{onClick:function(){setSheet(function(sheet){var newSheet=_to_consumable_array(sheet);return newSheet.splice(index+1,0,(0,_constants__WEBPACK_IMPORTED_MODULE_2__.z_)()),newSheet})}}))}if(quizProblemSheet){actionButtons.push(_object_spread_props(_object_spread({},(0,_logos__WEBPACK_IMPORTED_MODULE_6__._)("tiny")[_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.QUIZ_PROBLEM]),{onClick:function(){setSheet(function(sheet){var newSheet=_to_consumable_array(sheet);return newSheet.splice(index+1,0,(0,_constants__WEBPACK_IMPORTED_MODULE_2__.KN)()),newSheet})}}))}if(quizOptionsSheetType){actionButtons.push(_object_spread_props(_object_spread({},(0,_logos__WEBPACK_IMPORTED_MODULE_6__._)("tiny")[_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.QUIZ_OPTIONS]),{onClick:function(){setSheet(function(sheet){var newSheet=_to_consumable_array(sheet);return newSheet.splice(index+1,0,(0,_constants__WEBPACK_IMPORTED_MODULE_2__.lH)()),newSheet})}}))}if(pageDivider){actionButtons.push(_object_spread_props(_object_spread({},(0,_logos__WEBPACK_IMPORTED_MODULE_6__._)("tiny")[_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.NEW_PAGE]),{onClick:function(){setSheet(function(sheet){var newSheet=_to_consumable_array(sheet);return newSheet.splice(index+1,0,(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.lgH)()),newSheet})}}))}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"jk-row gap",children:[compacted&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_5__.GK,{actionButtons:[{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_4__.c11,{}),buttons:actionButtons}],placement:floatToolbarPlacement}),!compacted&&actionButtons.map(function(param,index){var icon=param.icon,label=param.label,onClick=param.onClick;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.$n,{size:"small",icon,onClick,children:label},index)})]})};AddNewChild.__docgenInfo={description:"",methods:[],displayName:"AddNewChild",props:{index:{required:!0,tsType:{name:"number"},description:""},setSheet:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"T"}],raw:"T[]"}],raw:"SetStateAction<T[]>"}],raw:"Dispatch<SetStateAction<T[]>>"},description:""},mdSheet:{required:!1,tsType:{name:"boolean"},description:""},codeEditorSheet:{required:!1,tsType:{name:"boolean"},description:""},graphSheet:{required:!1,tsType:{name:"boolean"},description:""},listSheet:{required:!1,tsType:{name:"boolean"},description:""},quizProblemSheet:{required:!1,tsType:{name:"boolean"},description:""},quizOptionsSheetType:{required:!1,tsType:{name:"boolean"},description:""},pageDivider:{required:!1,tsType:{name:"boolean"},description:""},compacted:{required:!1,tsType:{name:"boolean"},description:""},floatToolbarPlacement:{required:!1,tsType:{name:"union",raw:"'center' | 'center bottom' | 'center top'",elements:[{name:"literal",value:"'center'"},{name:"literal",value:"'center bottom'"},{name:"literal",value:"'center top'"}]},description:""}}}},"./src/components/organisms/_layz_/WorksheetEditor/sheets/EditSheetModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>EditSheetModal});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),_atoms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/atoms/index.tsx"),_hooks_useStableState__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/hooks/useStableState.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _sliced_to_array(arr,i){return function _array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function _iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}(arr,i)||function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var EditSheetModal=function(props){var isOpen=props.isOpen,onClose=props.onClose,content=props.content,setContent=props.setContent,isValid=props.isValid,_useStableState=_sliced_to_array((0,_hooks_useStableState__WEBPACK_IMPORTED_MODULE_3__.I)(isOpen&&(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.on3)(content)?JSON.stringify(content,null,2):""),2),value=_useStableState[0],setValue=_useStableState[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.aF,{isOpen,onClose,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"jk-col gap jk-pg stretch",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.lI,{className:"wh-100",size:"auto",value,onChange:setValue}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"jk-row-col gap right",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.$n,{onClick:onClose,type:"light",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,{className:"tt-se",children:"close"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.$n,{disabled:!isValid(value),onClick:function(){if(isValid(value)){var obj=JSON.parse(value);setContent(obj),onClose()}},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,{className:"tt-se",children:"save"})})]})]})})};EditSheetModal.__docgenInfo={description:"",methods:[],displayName:"EditSheetModal",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"T"},description:""},content:{required:!0,tsType:{name:"T"},description:""},setContent:{required:!0,tsType:{name:"Dispatch",elements:[{name:"T"}],raw:"Dispatch<T>"},description:""},isValid:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => boolean",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"boolean"}}},description:""}}}},"./src/components/organisms/_layz_/WorksheetEditor/sheets/WorksheetNode.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>WorksheetNode});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),esm=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),react=__webpack_require__("./node_modules/react/index.js"),helpers=__webpack_require__("./src/components/helpers/index.ts"),DetectRequestAnimationFrame=__webpack_require__("./src/components/atoms/DetectRequestAnimationFrame/DetectRequestAnimationFrame.tsx"),MdMathViewer=__webpack_require__("./src/components/organisms/MdMathViewer/MdMathViewer.tsx"),AddNewChild=__webpack_require__("./src/components/organisms/_layz_/WorksheetEditor/sheets/AddNewChild.tsx"),useStableState=__webpack_require__("./src/components/hooks/useStableState.ts"),molecules=__webpack_require__("./src/components/molecules/index.ts"),ChunkTitle=function(param){var content=param.content;return!!content.title&&(0,jsx_runtime.jsx)("h3",{children:content.title})};ChunkTitle.__docgenInfo={description:"",methods:[],displayName:"ChunkTitle",props:{content:{required:!0,tsType:{name:"BasicWorksheetType"},description:""}}};var EditSheetModal=__webpack_require__("./src/components/organisms/_layz_/WorksheetEditor/sheets/EditSheetModal.tsx"),atoms=__webpack_require__("./src/components/atoms/index.tsx"),server=__webpack_require__("./src/components/atoms/server/index.ts"),logos=__webpack_require__("./src/components/organisms/_layz_/WorksheetEditor/sheets/logos.tsx");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _to_consumable_array(arr){return function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}(arr)||function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}(arr)||function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var upRemoveDownButtons=function(param){var index=param.index,length=param.length,onChange=param.onChange,actionButtons=[];return 0!==index&&actionButtons.push({icon:(0,jsx_runtime.jsx)(server.U1D,{}),size:"tiny",label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"move up"}),onClick:function(){onChange(function(list){var ref,newSheets=_to_consumable_array(list),next=newSheets[index-1];newSheets[index]&&next&&(ref=[next,newSheets[index]],newSheets[index]=ref[0],newSheets[index-1]=ref[1]);return newSheets})},disabled:0===index}),actionButtons.push({icon:(0,jsx_runtime.jsx)(server.d7y,{}),size:"tiny",label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"remove"}),onClick:function(){onChange(function(list){return list.filter(function(_,i){return i!==index})})}}),index!==length-1&&actionButtons.push({icon:(0,jsx_runtime.jsx)(server.RSQ,{}),size:"tiny",label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"move down"}),onClick:function(){onChange(function(list){var ref,newSheets=_to_consumable_array(list),next=newSheets[index+1];newSheets[index]&&next&&(ref=[next,newSheets[index]],newSheets[index]=ref[0],newSheets[index+1]=ref[1]);return newSheets})},disabled:index===length-1}),actionButtons};function getActionButtons_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getActionButtons_to_consumable_array(arr){return function getActionButtons_array_without_holes(arr){if(Array.isArray(arr))return getActionButtons_array_like_to_array(arr)}(arr)||function getActionButtons_iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function getActionButtons_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return getActionButtons_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return getActionButtons_array_like_to_array(o,minLen)}(arr)||function getActionButtons_non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var getActionButtons=function(props){var type=props.type,edit=props.edit,index=props.index,sheetLength=props.sheetLength,setSheet=props.setSheet,setModal=props.setModal,onSaveEdit=props.onSaveEdit,onCancel=props.onCancel;return[{children:(0,jsx_runtime.jsxs)("div",{className:"bc-pl jk-pg-xsm jk-row cr-we gap nowrap jk-br-ie tx-t",style:{opacity:.6},children:[(0,logos._)("tiny")[type].icon,(0,logos._)("tiny")[type].label]})}].concat(getActionButtons_to_consumable_array(onSaveEdit&&onCancel?[{icon:edit?(0,jsx_runtime.jsx)(server.ITR,{size:"small"}):(0,jsx_runtime.jsx)(server.qUP,{size:"small"}),children:edit?(0,jsx_runtime.jsxs)("div",{className:" jk-col gap stretch",children:[(0,jsx_runtime.jsx)(atoms.$n,{size:"small",icon:(0,jsx_runtime.jsx)(server.LPu,{}),children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"save"})}),(0,jsx_runtime.jsx)(atoms.$n,{size:"small",type:"light",icon:(0,jsx_runtime.jsx)(server.USm,{}),children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"cancel"})})]}):void 0,buttons:[{icon:edit?(0,jsx_runtime.jsx)(server.LPu,{}):(0,jsx_runtime.jsx)(server.qUP,{}),label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:edit?"save":"edit"}),onClick:onSaveEdit}].concat(getActionButtons_to_consumable_array(edit?[{type:"light",icon:(0,jsx_runtime.jsx)(server.USm,{}),label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"cancel"}),onClick:onCancel}]:[]))}]:[]),[{icon:(0,jsx_runtime.jsx)(server.ycB,{className:"cr-we",up:!0,down:!0}),size:"tiny",buttons:upRemoveDownButtons({index,length:sheetLength,onChange:function(callback){return null==setSheet?void 0:setSheet(function(sheet){return callback(sheet)})}})},{icon:(0,jsx_runtime.jsx)(server.Zes,{}),size:"tiny",buttons:[{icon:(0,jsx_runtime.jsx)(server.Zes,{}),size:"tiny",label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"view settings"}),onClick:function(){return setModal(!0)}}]}])},useStableRef=__webpack_require__("./src/components/hooks/useStableRef.ts"),useOnSaveSheetSection=function(sectionRef,edit,onSave){var onSaveRef=(0,useStableRef.m)(onSave);(0,react.useEffect)(function(){var handleClickOutside=function(event){edit&&sectionRef.current&&!sectionRef.current.contains(event.target)&&onSaveRef.current()};return document.addEventListener("mousedown",handleClickOutside),function(){document.removeEventListener("mousedown",handleClickOutside)}},[edit])},constants=__webpack_require__("./src/constants/index.ts"),UserCodeEditor=__webpack_require__("./src/components/organisms/_layz_/UserCodeEditor/index.tsx");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var CodeEditorSheetSectionEditor=function(param){var _content_languages,content=param.content,setContent=param.setContent,isSolvable=param.isSolvable;return(0,jsx_runtime.jsxs)("div",{className:"jk-col gap stretch left jk-pg-sm br-ht jk-br-ie wh-100",children:[(0,jsx_runtime.jsx)(atoms.pd,{label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"title"}),labelPlacement:"top",value:content.title,onChange:function(title){return setContent(function(prevState){return _object_spread_props(_object_spread({},prevState),{title})})},expand:!0}),isSolvable&&(0,jsx_runtime.jsx)(atoms.pd,{type:"number",label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"points"}),labelPlacement:"top",value:content.points,onChange:function(points){return setContent(function(prevState){return _object_spread_props(_object_spread({},prevState),{points})})},expand:!0}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap wh-100",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"languages"}),":",(0,jsx_runtime.jsx)(atoms.KF,{options:esm.O5.map(function(key){return{value:key,label:esm.fO_[key].label}}),selectedOptions:null===(_content_languages=content.languages)||void 0===_content_languages?void 0:_content_languages.map(function(language){return{value:language}}),onChange:function(options){return setContent(function(prevState){return _object_spread_props(_object_spread({},prevState),{languages:options.map(function(option){return option.value})})})},expand:!0})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"jk-row gap space-between",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"height"}),":"]}),(0,jsx_runtime.jsx)(atoms.GL,{checked:0===content.height,label:(0,jsx_runtime.jsx)(atoms.T,{children:"auto"}),onChange:function(value){return setContent(function(prevState){return _object_spread_props(_object_spread({},prevState),{height:value?0:constants.o})})}})]}),0!==content.height&&(0,jsx_runtime.jsxs)("div",{className:"jk-row",children:[(0,jsx_runtime.jsx)(atoms.pd,{type:"number",value:content.height,onChange:function(value){return setContent(function(prevState){return _object_spread_props(_object_spread({},prevState),{height:Math.abs(value)})})},size:"auto"}),(0,jsx_runtime.jsx)(atoms.T,{children:"px"})]})]})]}),(0,jsx_runtime.jsx)("div",{style:{height:constants.o},className:"jk-row wh-100",children:(0,jsx_runtime.jsx)(UserCodeEditor.g,{storeKey:content.id+"_edit",initialFiles:content.files,onTestCasesChange:function(testCases){return setContent(function(prevState){return _object_spread_props(_object_spread({},prevState),{testCases})})},onFilesChange:function(files){return setContent(function(prevState){return _object_spread_props(_object_spread({},prevState),{files})})},initialTestCases:content.testCases,languages:content.languages.map(function(lang){var _CODE_LANGUAGE_lang;return{value:lang,label:(null===(_CODE_LANGUAGE_lang=esm.fO_[lang])||void 0===_CODE_LANGUAGE_lang?void 0:_CODE_LANGUAGE_lang.label)||lang}}),enableAddSampleCases:!0})})]})};CodeEditorSheetSectionEditor.__docgenInfo={description:"",methods:[],displayName:"CodeEditorSheetSectionEditor",props:{content:{required:!0,tsType:{name:"CodeEditorSheetType"},description:""},setContent:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"CodeEditorSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""}}};var enums=__webpack_require__("./src/enums/index.ts"),settings=__webpack_require__("./src/settings/index.ts"),useRouterStore=__webpack_require__("./src/stores/router/useRouterStore.ts"),useJukiNotification=__webpack_require__("./src/components/hooks/useJukiNotification.tsx");function CodeEditorSheetSectionView_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _sliced_to_array(arr,i){return function _array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function _iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function CodeEditorSheetSectionView_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return CodeEditorSheetSectionView_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CodeEditorSheetSectionView_array_like_to_array(o,minLen)}(arr,i)||function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var CodeEditorSheetSectionView=function(props){var _userResults_data_submissions_WorksheetType_CODE_EDITOR,_userResults_data,_userResults_data1,_submissions_submissionIndex,_submissions_submissionIndex1,_userResults_data_submissions_WorksheetType_CODE_EDITOR_chunkId,content=props.content,worksheetKey=props.worksheetKey,chunkId=props.chunkId,userResults=props.userResults,readOnly=props.readOnly,isSolvable=props.isSolvable,notifyResponse=(0,useJukiNotification.E)().notifyResponse,searchParams=(0,useRouterStore.I)(function(state){return state.searchParams}),_useState=_sliced_to_array((0,react.useState)(0),2),_submissionIndex=_useState[0],setSubmissionIndex=_useState[1],submissions=null!==(_userResults_data_submissions_WorksheetType_CODE_EDITOR_chunkId=null==userResults||null===(_userResults_data=userResults.data)||void 0===_userResults_data||null===(_userResults_data_submissions_WorksheetType_CODE_EDITOR=_userResults_data.submissions[esm.Lc_.CODE_EDITOR])||void 0===_userResults_data_submissions_WorksheetType_CODE_EDITOR?void 0:_userResults_data_submissions_WorksheetType_CODE_EDITOR[chunkId])&&void 0!==_userResults_data_submissions_WorksheetType_CODE_EDITOR_chunkId?_userResults_data_submissions_WorksheetType_CODE_EDITOR_chunkId:[];(0,react.useEffect)(function(){setSubmissionIndex(0)},[null==userResults||null===(_userResults_data1=userResults.data)||void 0===_userResults_data1?void 0:_userResults_data1.user.nickname]);var _submissions_submissionIndex_files,_submissions_submissionIndex_testCases,totalSubmissions=submissions.length,submissionIndex=totalSubmissions-_submissionIndex-1,initialFiles=null!==(_submissions_submissionIndex_files=null===(_submissions_submissionIndex=submissions[submissionIndex])||void 0===_submissions_submissionIndex?void 0:_submissions_submissionIndex.files)&&void 0!==_submissions_submissionIndex_files?_submissions_submissionIndex_files:content.files,setLoaderStatusRef=(0,react.useRef)(void 0),saveCode=function(files,testCases){return function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}(function(){var _setLoaderStatusRef_current,_userResults_mutate,codeEditorSubmissionDTO,response,assignmentId,_jukiApiManager_API_V1_worksheet_submitCodeEditor,url,options;return _ts_generator(this,function(_state){switch(_state.label){case 0:return null===(_setLoaderStatusRef_current=setLoaderStatusRef.current)||void 0===_setLoaderStatusRef_current||_setLoaderStatusRef_current.call(setLoaderStatusRef,esm.nW6.LOADING),setSubmissionIndex(0),codeEditorSubmissionDTO={type:esm.Lc_.CODE_EDITOR,id:content.id,files,testCases},assignmentId=searchParams.get(enums.rs.ASSIGNMENT),_jukiApiManager_API_V1_worksheet_submitCodeEditor=settings.Z.API_V1.worksheet.submitCodeEditor({params:{worksheetKey,secondaryKey:null!=assignmentId?assignmentId:""},body:codeEditorSubmissionDTO}),url=_jukiApiManager_API_V1_worksheet_submitCodeEditor.url,options=_object_without_properties(_jukiApiManager_API_V1_worksheet_submitCodeEditor,["url"]),[4,(0,helpers.zb)(url,options)];case 1:return response=esm.Hu3.apply(void 0,[_state.sent()]),[4,null==userResults||null===(_userResults_mutate=userResults.mutate)||void 0===_userResults_mutate?void 0:_userResults_mutate.call(userResults)];case 2:return _state.sent(),notifyResponse(response,setLoaderStatusRef.current),[2]}})})()};return(0,jsx_runtime.jsx)("div",{className:"jk-col stretch flex-1 gap",children:(0,jsx_runtime.jsx)("div",{style:{height:(0,helpers.Oq)(content.height,""),minWidth:200,width:"100%"},className:"jk-row",children:(0,jsx_runtime.jsx)(UserCodeEditor.g,{withoutRunCodeButton:readOnly,readOnly,initialFiles,initialTestCases:null!==(_submissions_submissionIndex_testCases=null===(_submissions_submissionIndex1=submissions[submissionIndex])||void 0===_submissions_submissionIndex1?void 0:_submissions_submissionIndex1.testCases)&&void 0!==_submissions_submissionIndex_testCases?_submissions_submissionIndex_testCases:content.testCases,languages:content.languages.map(function(lang){var _CODE_LANGUAGE_lang;return{value:lang,label:(null===(_CODE_LANGUAGE_lang=esm.fO_[lang])||void 0===_CODE_LANGUAGE_lang?void 0:_CODE_LANGUAGE_lang.label)||lang}}),storeKey:content.id+"_view",enableAddCustomSampleCases:!0,onCodeRunStatusChange:function(status,param){var files=param.files,testCases=param.testCases;status===esm.aeR.COMPLETED&&isSolvable&&saveCode(files,testCases)},centerButtons:function(param){var testCases=param.testCases,files=param.files,buttons=[];return!readOnly&&isSolvable&&buttons.push((0,jsx_runtime.jsx)(molecules.mT,{size:"tiny",type:"secondary",onClick:function(){return saveCode(files,testCases)},setLoaderStatusRef:function(setLoaderStatus){return setLoaderStatusRef.current=setLoaderStatus},children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"save"})},"save")),buttons.push((0,jsx_runtime.jsxs)("div",{className:"jk-row bc-hl jk-br-ie",children:[(0,jsx_runtime.jsx)("div",{className:(0,helpers.xW)("clickable br-50-pc jk-row",{"cr-ht":0===totalSubmissions}),onClick:totalSubmissions?function(){return setSubmissionIndex(function(prevState){return(prevState+1)%totalSubmissions})}:void 0,children:(0,jsx_runtime.jsx)(server.A60,{})}),(null==userResults?void 0:userResults.isLoading)?(0,jsx_runtime.jsx)(server.Gcs,{}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[submissionIndex+1," / ",totalSubmissions,(0,jsx_runtime.jsx)(atoms.T,{children:"v."})]}),(0,jsx_runtime.jsx)("div",{className:(0,helpers.xW)("clickable br-50-pc jk-row",{"cr-ht":0===totalSubmissions}),onClick:totalSubmissions?function(){return setSubmissionIndex(function(prevState){return(prevState-1+totalSubmissions)%totalSubmissions})}:void 0,children:(0,jsx_runtime.jsx)(server.flY,{})})]},"buttons")),(0,jsx_runtime.jsx)("div",{className:"jk-row gap",children:react.Children.toArray(buttons)})}})})})};function CodeEditorSheetSection_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function CodeEditorSheetSection_sliced_to_array(arr,i){return function CodeEditorSheetSection_array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function CodeEditorSheetSection_iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function CodeEditorSheetSection_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return CodeEditorSheetSection_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CodeEditorSheetSection_array_like_to_array(o,minLen)}(arr,i)||function CodeEditorSheetSection_non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}CodeEditorSheetSectionView.__docgenInfo={description:"",methods:[],displayName:"CodeEditorSheetSectionView",props:{content:{required:!0,tsType:{name:"CodeEditorSheetType"},description:""},worksheetKey:{required:!0,tsType:{name:"string"},description:""},chunkId:{required:!0,tsType:{name:"string"},description:""},userResults:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  data?: WorksheetUserSubmissionsResponseDTO,\n  isLoading?: boolean,\n  validating?: boolean,\n  mutate?: KeyedMutator<any>,\n}",signature:{properties:[{key:"data",value:{name:"WorksheetUserSubmissionsResponseDTO",required:!1}},{key:"isLoading",value:{name:"boolean",required:!1}},{key:"validating",value:{name:"boolean",required:!1}},{key:"mutate",value:{name:"KeyedMutator",elements:[{name:"any"}],raw:"KeyedMutator<any>",required:!1}}]}},description:""},readOnly:{required:!0,tsType:{name:"boolean"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""}}};var CodeEditorSheetSection=function(props){var initialContent=props.content,saveContent=props.setContent,index=props.index,chunkId=props.chunkId,sheetLength=props.sheetLength,setSheet=props.setSheet,worksheetKey=props.worksheetKey,isSolvable=props.isSolvable,userResults=props.userResults,readOnly=props.readOnly,_useState=CodeEditorSheetSection_sliced_to_array((0,react.useState)(!1),2),edit=_useState[0],setEdit=_useState[1],_useState1=CodeEditorSheetSection_sliced_to_array((0,react.useState)(!1),2),modal=_useState1[0],setModal=_useState1[1],_useStableState=CodeEditorSheetSection_sliced_to_array((0,useStableState.I)(initialContent),2),content=_useStableState[0],_setContent=_useStableState[1],sectionRef=(0,react.useRef)(null),onSaveEdit=function(){setEdit(!edit),null==saveContent||saveContent(content)};useOnSaveSheetSection(sectionRef,edit,onSaveEdit);var setContent=saveContent?_setContent:void 0;return(0,jsx_runtime.jsxs)("div",{ref:sectionRef,className:"jk-row top left nowrap stretch jk-br-ie pn-re wh-100",onDoubleClick:function(){return setEdit(!0)},children:[setContent&&(0,jsx_runtime.jsx)(EditSheetModal.j,{isOpen:modal,onClose:function(){return setModal(!1)},content,setContent,isValid:function(value){return(0,esm.UWh)(value)&&(0,esm.A1h)(JSON.parse(value))}}),setContent&&edit?(0,jsx_runtime.jsx)(CodeEditorSheetSectionEditor,{content,setContent,isSolvable}):(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch gap nowrap code-editor-sheet-section-view wh-100",children:[(0,jsx_runtime.jsx)(ChunkTitle,{content}),(0,jsx_runtime.jsx)(CodeEditorSheetSectionView,{content,worksheetKey,chunkId,userResults,readOnly,isSolvable})]}),setSheet&&(0,jsx_runtime.jsx)(molecules.GK,{actionButtons:getActionButtons({type:esm.Lc_.CODE_EDITOR,edit,setModal,index,sheetLength,setSheet,onSaveEdit,onCancel:function(){setEdit(!1),_setContent(initialContent)}}),placement:"out rightTop"})]})};CodeEditorSheetSection.__docgenInfo={description:"",methods:[],displayName:"CodeEditorSheetSection",props:{content:{required:!0,tsType:{name:"CodeEditorSheetType"},description:""},setContent:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"CodeEditorSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""},index:{required:!0,tsType:{name:"number"},description:""},chunkId:{required:!0,tsType:{name:"string"},description:""},sheetLength:{required:!0,tsType:{name:"number"},description:""},setSheet:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"BodyWorksheetType"}],raw:"T[]"}],raw:"SetStateAction<T[]>"}],raw:"Dispatch<SetStateAction<T[]>>"},description:""},worksheetKey:{required:!0,tsType:{name:"string"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""},readOnly:{required:!0,tsType:{name:"boolean"},description:""},userResults:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  data?: WorksheetUserSubmissionsResponseDTO,\n  isLoading?: boolean,\n  validating?: boolean,\n  mutate?: KeyedMutator<any>,\n}",signature:{properties:[{key:"data",value:{name:"WorksheetUserSubmissionsResponseDTO",required:!1}},{key:"isLoading",value:{name:"boolean",required:!1}},{key:"validating",value:{name:"boolean",required:!1}},{key:"mutate",value:{name:"KeyedMutator",elements:[{name:"any"}],raw:"KeyedMutator<any>",required:!1}}]}},description:""}}};var GraphvizEditor=__webpack_require__("./src/components/organisms/GraphvizEditor/GraphvizEditor.tsx");function GraphSheetSectionEditor_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function GraphSheetSectionEditor_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function GraphSheetSectionEditor_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){GraphSheetSectionEditor_define_property(target,key,source[key])})}return target}function GraphSheetSectionEditor_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function GraphSheetSectionEditor_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function GraphSheetSectionEditor_sliced_to_array(arr,i){return function GraphSheetSectionEditor_array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function GraphSheetSectionEditor_iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||GraphSheetSectionEditor_unsupported_iterable_to_array(arr,i)||function GraphSheetSectionEditor_non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GraphSheetSectionEditor_to_consumable_array(arr){return function GraphSheetSectionEditor_array_without_holes(arr){if(Array.isArray(arr))return GraphSheetSectionEditor_array_like_to_array(arr)}(arr)||function GraphSheetSectionEditor_iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||GraphSheetSectionEditor_unsupported_iterable_to_array(arr)||function GraphSheetSectionEditor_non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GraphSheetSectionEditor_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return GraphSheetSectionEditor_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GraphSheetSectionEditor_array_like_to_array(o,minLen):void 0}}var GraphSheetSectionEditor=function(param){var _content_dots,content=param.content,setContent=param.setContent,_useState=GraphSheetSectionEditor_sliced_to_array((0,react.useState)(0),2),frame=_useState[0],setFrame=_useState[1];return(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch left wh-100 jk-pg-sm br-ht jk-br-ie",children:[(0,jsx_runtime.jsx)(atoms.pd,{label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"title"}),labelPlacement:"top",value:content.title,onChange:function(title){return setContent(function(prevState){return GraphSheetSectionEditor_object_spread_props(GraphSheetSectionEditor_object_spread({},prevState),{title})})},expand:!0}),(null===(_content_dots=content.dots)||void 0===_content_dots?void 0:_content_dots[frame])&&(0,jsx_runtime.jsx)(GraphvizEditor.z,{value:content.dots[frame],onSave:function(dot){var dots=GraphSheetSectionEditor_to_consumable_array(content.dots);dots.splice(frame,1,dot),setContent(GraphSheetSectionEditor_object_spread_props(GraphSheetSectionEditor_object_spread({},content),{dots}))}}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap center",children:[(0,jsx_runtime.jsx)(atoms.$n,{icon:(0,jsx_runtime.jsx)(server.gFQ,{}),disabled:0===frame,onClick:function(){return setFrame((frame-1+content.dots.length)%content.dots.length)},size:"small"}),new Array(content.dots.length).fill(1).map(function(_,index){return(0,jsx_runtime.jsx)("div",{className:(0,helpers.xW)("jk-tag clickable",{"bc-g5":index!==frame}),onClick:function(){return setFrame(index)},children:index+1},index)}),(0,jsx_runtime.jsx)(atoms.$n,{icon:(0,jsx_runtime.jsx)(server.sIg,{}),disabled:frame>=content.dots.length-1,onClick:function(){return setFrame((frame+1)%content.dots.length)},size:"small"})]}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap nowrap",children:[(0,jsx_runtime.jsx)(atoms.$n,{icon:(0,jsx_runtime.jsx)(server.gFQ,{}),onClick:function(){var dots=GraphSheetSectionEditor_to_consumable_array(content.dots);dots.splice(frame,0,constants.R0),setContent(GraphSheetSectionEditor_object_spread_props(GraphSheetSectionEditor_object_spread({},content),{dots}))},size:"small",children:(0,jsx_runtime.jsx)(server.REV,{})}),(0,jsx_runtime.jsx)(atoms.$n,{icon:(0,jsx_runtime.jsx)(server.d7y,{}),onClick:function(){var dots=GraphSheetSectionEditor_to_consumable_array(content.dots);dots.splice(frame,1),setContent(GraphSheetSectionEditor_object_spread_props(GraphSheetSectionEditor_object_spread({},content),{dots}))},size:"small",type:"light"}),(0,jsx_runtime.jsx)(atoms.$n,{icon:(0,jsx_runtime.jsx)(server.REV,{}),onClick:function(){var dots=GraphSheetSectionEditor_to_consumable_array(content.dots);dots.splice(frame+1,0,constants.R0),setContent(GraphSheetSectionEditor_object_spread_props(GraphSheetSectionEditor_object_spread({},content),{dots})),setFrame(frame+1)},size:"small",children:(0,jsx_runtime.jsx)(server.sIg,{})})]})]})};GraphSheetSectionEditor.__docgenInfo={description:"",methods:[],displayName:"GraphSheetSectionEditor",props:{content:{required:!0,tsType:{name:"GraphSheetType"},description:""},setContent:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"GraphSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""}}};var GraphvizViewer=__webpack_require__("./src/components/organisms/_layz_/GraphvizViewer/index.ts");function GraphSheetSectionView_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function GraphSheetSectionView_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function GraphSheetSectionView_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function GraphSheetSectionView_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function GraphSheetSectionView_sliced_to_array(arr,i){return function GraphSheetSectionView_array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function GraphSheetSectionView_iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function GraphSheetSectionView_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return GraphSheetSectionView_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GraphSheetSectionView_array_like_to_array(o,minLen)}(arr,i)||function GraphSheetSectionView_non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var GraphSheetSectionView=function(param){var _content_dots,content=param.content,setSheet=param.setSheet,_useState=GraphSheetSectionView_sliced_to_array((0,react.useState)(0),2),frame=_useState[0],setFrame=_useState[1];return(0,react.useEffect)(function(){content.dots.length||null==setSheet||setSheet(function(sheet){return GraphSheetSectionView_object_spread_props(function GraphSheetSectionView_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){GraphSheetSectionView_define_property(target,key,source[key])})}return target}({},sheet),{dots:['digraaph graph_name {\n  bgcolor="transparent"\n  a -> b;\n  b -> c;\n  a -> d;\n  d -> c;\n  a -> c;\n}']})})},[frame,setSheet,content.dots.length]),(0,jsx_runtime.jsxs)("div",{className:"jk-col gap",children:[(0,jsx_runtime.jsx)("div",{className:"br-g5 jk-br-ie bc-we",children:(null===(_content_dots=content.dots)||void 0===_content_dots?void 0:_content_dots[frame])&&(0,jsx_runtime.jsx)(GraphvizViewer.S,{dot:content.dots[frame]})}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap center",children:[(0,jsx_runtime.jsx)(atoms.$n,{icon:(0,jsx_runtime.jsx)(server.gFQ,{}),disabled:0===frame,onClick:function(){return setFrame((frame-1+content.dots.length)%content.dots.length)},size:"small"}),new Array(content.dots.length).fill(1).map(function(_,index){return(0,jsx_runtime.jsx)("div",{className:(0,helpers.xW)("jk-tag clickable",{"bc-g5":index!==frame}),onClick:function(){return setFrame(index)},children:index+1},index)}),(0,jsx_runtime.jsx)(atoms.$n,{icon:(0,jsx_runtime.jsx)(server.sIg,{}),disabled:frame>=content.dots.length-1,onClick:function(){return setFrame((frame+1)%content.dots.length)},size:"small"})]})]})};function GraphSheetSection_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function GraphSheetSection_sliced_to_array(arr,i){return function GraphSheetSection_array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function GraphSheetSection_iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function GraphSheetSection_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return GraphSheetSection_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GraphSheetSection_array_like_to_array(o,minLen)}(arr,i)||function GraphSheetSection_non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}GraphSheetSectionView.__docgenInfo={description:"",methods:[],displayName:"GraphSheetSectionView",props:{content:{required:!0,tsType:{name:"GraphSheetType"},description:""},setSheet:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"GraphSheetType"}],raw:"SetStateAction<GraphSheetType>"}],raw:"Dispatch<SetStateAction<GraphSheetType>>"},description:""}}};var GraphSheetSection=function(props){var initialContent=props.content,saveContent=props.setContent,index=props.index,sheetLength=props.sheetLength,setSheet=props.setSheet,_useState=GraphSheetSection_sliced_to_array((0,react.useState)(!1),2),edit=_useState[0],setEdit=_useState[1],_useState1=GraphSheetSection_sliced_to_array((0,react.useState)(!1),2),modal=_useState1[0],setModal=_useState1[1],_useStableState=GraphSheetSection_sliced_to_array((0,useStableState.I)(initialContent),2),content=_useStableState[0],_setContent=_useStableState[1],sectionRef=(0,react.useRef)(null),onSaveEdit=function(){setEdit(!edit),null==saveContent||saveContent(content)};useOnSaveSheetSection(sectionRef,edit,onSaveEdit);var setContent=saveContent?_setContent:void 0;return(0,jsx_runtime.jsxs)("div",{ref:sectionRef,className:"jk-row top left nowrap stretch jk-br-ie pn-re wh-100",onDoubleClick:function(){return setEdit(!0)},children:[setContent&&(0,jsx_runtime.jsx)(EditSheetModal.j,{isOpen:modal,onClose:function(){return setModal(!1)},content,setContent,isValid:function(value){return(0,esm.UWh)(value)}}),setContent&&edit?(0,jsx_runtime.jsx)(GraphSheetSectionEditor,{content,setContent}):(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch gap nowrap graph-sheet-section-view wh-100",children:[(0,jsx_runtime.jsx)(ChunkTitle,{content}),(0,jsx_runtime.jsx)(GraphSheetSectionView,{content})]}),setSheet&&(0,jsx_runtime.jsx)(molecules.GK,{actionButtons:getActionButtons({type:esm.Lc_.GRAPH,edit,setModal,index,sheetLength,setSheet,onSaveEdit,onCancel:function(){setEdit(!1),_setContent(initialContent)}}),placement:"out rightTop"})]})};GraphSheetSection.__docgenInfo={description:"",methods:[],displayName:"GraphSheetSection",props:{content:{required:!0,tsType:{name:"GraphSheetType"},description:""},setContent:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"GraphSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""},index:{required:!0,tsType:{name:"number"},description:""},chunkId:{required:!0,tsType:{name:"string"},description:""},sheetLength:{required:!0,tsType:{name:"number"},description:""},setSheet:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"BodyWorksheetType"}],raw:"T[]"}],raw:"SetStateAction<T[]>"}],raw:"Dispatch<SetStateAction<T[]>>"},description:""},worksheetKey:{required:!0,tsType:{name:"string"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""},readOnly:{required:!0,tsType:{name:"boolean"},description:""},userResults:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  data?: WorksheetUserSubmissionsResponseDTO,\n  isLoading?: boolean,\n  validating?: boolean,\n  mutate?: KeyedMutator<any>,\n}",signature:{properties:[{key:"data",value:{name:"WorksheetUserSubmissionsResponseDTO",required:!1}},{key:"isLoading",value:{name:"boolean",required:!1}},{key:"validating",value:{name:"boolean",required:!1}},{key:"mutate",value:{name:"KeyedMutator",elements:[{name:"any"}],raw:"KeyedMutator<any>",required:!1}}]}},description:""}}};var useJukiUI=__webpack_require__("./src/components/hooks/useJukiUI.tsx"),ResultHeader=function(props){var isResolved=props.isResolved,submitted=props.submitted,points=props.points,userPoints=props.userPoints,children=props.children,childrenTop=props.childrenTop,isSmallPortSize="sm"===(0,useJukiUI.p)().viewPortSize;return(0,jsx_runtime.jsx)("div",{style:isSmallPortSize?void 0:{position:"absolute",top:0,right:"calc(var(--pad-sm) * -1)",height:"100%",width:0},children:(0,jsx_runtime.jsxs)("div",{className:"jk-pg-sm jk-col gap stretch space-between result-header sticky-top",children:[childrenTop,!!points&&(0,jsx_runtime.jsxs)("div",{className:(0,helpers.xW)("jk-row center jk-tag tx-s ws-np",{"bc-ss cr-we":isResolved,"bc-g6":!submitted,"bc-wg cr-we":userPoints>0&&!isResolved&&submitted,"bc-er cr-we":0===userPoints&&!isResolved&&submitted}),children:[+userPoints.toFixed(2)," ",(0,jsx_runtime.jsx)(atoms.T,{children:1===userPoints?"pt":"pts"}),(0,jsx_runtime.jsx)("div",{className:"jk-divider tiny",style:{height:1}}),points," ",(0,jsx_runtime.jsx)(atoms.T,{children:1===points?"pt":"pts"})]}),(0,jsx_runtime.jsx)("div",{className:"jk-row gap",children})]})})},ResultHeaders=function(props){var _lastSubmission_points,points=props.points,submissions=props.submissions,children=props.children,selectedIndex=props.selectedIndex,setSelectedIndex=props.setSelectedIndex,lastSubmission=submissions.at(selectedIndex);return(0,jsx_runtime.jsx)(ResultHeader,{submitted:!!lastSubmission,points,userPoints:null!==(_lastSubmission_points=null==lastSubmission?void 0:lastSubmission.points)&&void 0!==_lastSubmission_points?_lastSubmission_points:0,isResolved:!!(null==lastSubmission?void 0:lastSubmission.isCompleted),childrenTop:(0,jsx_runtime.jsxs)("div",{className:"jk-row tx-s",children:[(0,jsx_runtime.jsx)("div",{className:"jk-row jk-br-ie hoverable",onClick:function(){setSelectedIndex(function(prevState){return(prevState-1+submissions.length)%submissions.length})},children:"←"}),(0,jsx_runtime.jsxs)("div",{className:"jk-row",children:[selectedIndex+1," (",(0,jsx_runtime.jsx)("div",{className:"jk-row jk-br-ie hoverable",onClick:function(){setSelectedIndex(submissions.length-1)},children:submissions.length}),")"]}),(0,jsx_runtime.jsx)("div",{className:"jk-row jk-br-ie hoverable",onClick:function(){setSelectedIndex(function(prevState){return(prevState+1)%submissions.length})},children:"→"})]}),children})};ResultHeader.__docgenInfo={description:"",methods:[],displayName:"ResultHeader",props:{points:{required:!0,tsType:{name:"number"},description:""},userPoints:{required:!0,tsType:{name:"number"},description:""},isResolved:{required:!0,tsType:{name:"boolean"},description:""},submitted:{required:!0,tsType:{name:"boolean"},description:""},childrenTop:{required:!1,tsType:{name:"ReactNode"},description:""}}},ResultHeaders.__docgenInfo={description:"",methods:[],displayName:"ResultHeaders",props:{submissions:{required:!0,tsType:{name:"Array",elements:[{name:"QuizOptionsSubmissionResponseDTO"}],raw:"QuizOptionsSubmissionResponseDTO[]"},description:""},points:{required:!0,tsType:{name:"number"},description:""},selectedIndex:{required:!0,tsType:{name:"number"},description:""},setSelectedIndex:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"number"}],raw:"SetStateAction<number>"}],raw:"Dispatch<SetStateAction<number>>"},description:""}}};var MdMathEditor=__webpack_require__("./src/components/organisms/_layz_/MdMathEditor/index.ts");function JkmdSheetSectionEditor_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function JkmdSheetSectionEditor_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){JkmdSheetSectionEditor_define_property(target,key,source[key])})}return target}function JkmdSheetSectionEditor_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function JkmdSheetSectionEditor_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var JkmdSheetSectionEditor=function(param){var content=param.content,setContent=param.setContent,isSolvable=param.isSolvable;return(0,jsx_runtime.jsxs)("div",{className:"jk-col left gap wh-100 jk-pg-sm",children:[(0,jsx_runtime.jsx)(atoms.pd,{label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se tx-s",children:"title"}),labelPlacement:"top",value:content.title,onChange:function(title){return setContent(function(prevState){return JkmdSheetSectionEditor_object_spread_props(JkmdSheetSectionEditor_object_spread({},prevState),{title})})},expand:!0}),isSolvable&&(0,jsx_runtime.jsx)("div",{className:"jk-row extend left",children:(0,jsx_runtime.jsx)(atoms.pd,{label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se tx-s",children:"points"}),type:"number",value:content.points,onChange:function(points){return setContent(function(prevState){return JkmdSheetSectionEditor_object_spread_props(JkmdSheetSectionEditor_object_spread({},prevState),{points})})}})}),(0,jsx_runtime.jsx)("div",{className:"flex-1 jk-md-math-editor-expanded wh-100",children:(0,jsx_runtime.jsx)(MdMathEditor.D,{informationButton:!0,value:content.content,onChange:function(content){return setContent(function(prevState){return JkmdSheetSectionEditor_object_spread_props(JkmdSheetSectionEditor_object_spread({},prevState),{content})})},enableTextPlain:!0,enableIA:!0,enableImageUpload:!0})})]})};function JkmdSheetSection_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function JkmdSheetSection_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function JkmdSheetSection_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=function JkmdSheetSection_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function JkmdSheetSection_sliced_to_array(arr,i){return function JkmdSheetSection_array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function JkmdSheetSection_iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function JkmdSheetSection_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return JkmdSheetSection_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JkmdSheetSection_array_like_to_array(o,minLen)}(arr,i)||function JkmdSheetSection_non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JkmdSheetSection_ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}JkmdSheetSectionEditor.__docgenInfo={description:"",methods:[],displayName:"JkmdSheetSectionEditor",props:{content:{required:!0,tsType:{name:"JkmdSheetType"},description:""},setContent:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"JkmdSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""}}};var JkmdSheetSection=function(props){var _userResults_data_submissions_WorksheetType_JK_MD,_userResults_data,_userResults_data_submissions_WorksheetType_JK_MD_chunkId,_lastSubmission_points,content=props.content,setContent=props.setContent,index=props.index,chunkId=props.chunkId,sheetLength=props.sheetLength,setSheet=props.setSheet,worksheetKey=props.worksheetKey,isSolvable=props.isSolvable,readOnly=props.readOnly,userResults=props.userResults,notifyResponse=(0,useJukiNotification.E)().notifyResponse,_useState=JkmdSheetSection_sliced_to_array((0,react.useState)(!1),2),modal=_useState[0],setModal=_useState[1],sectionRef=(0,react.useRef)(null),lastSubmission=(null!==(_userResults_data_submissions_WorksheetType_JK_MD_chunkId=null==userResults||null===(_userResults_data=userResults.data)||void 0===_userResults_data||null===(_userResults_data_submissions_WorksheetType_JK_MD=_userResults_data.submissions[esm.Lc_.JK_MD])||void 0===_userResults_data_submissions_WorksheetType_JK_MD?void 0:_userResults_data_submissions_WorksheetType_JK_MD[chunkId])&&void 0!==_userResults_data_submissions_WorksheetType_JK_MD_chunkId?_userResults_data_submissions_WorksheetType_JK_MD_chunkId:[]).at(-1),text=content.content.trim();return(0,jsx_runtime.jsxs)("div",{ref:sectionRef,className:"jk-row top left nowrap stretch jk-br-ie pn-re wh-100 jk-md-sheet-section",children:[setContent&&(0,jsx_runtime.jsx)(EditSheetModal.j,{isOpen:modal,onClose:function(){return setModal(!1)},content,setContent,isValid:function(value){return(0,esm.UWh)(value)&&(0,esm.c0Y)(JSON.parse(value))}}),setContent?(0,jsx_runtime.jsx)(JkmdSheetSectionEditor,{content,setContent,isSolvable:!!isSolvable}):(0,jsx_runtime.jsxs)("div",{className:"jk-col gap stretch jk-md-sheet-section-view wh-100 pn-re",children:[isSolvable&&!setSheet&&text&&(0,jsx_runtime.jsx)(ResultHeader,{submitted:!!lastSubmission,points:content.points,userPoints:null!==(_lastSubmission_points=null==lastSubmission?void 0:lastSubmission.points)&&void 0!==_lastSubmission_points?_lastSubmission_points:0,isResolved:!!(null==lastSubmission?void 0:lastSubmission.isCompleted),children:!readOnly&&(0,jsx_runtime.jsx)(molecules.mT,{type:"light",expand:!0,size:"small","data-tooltip-id":"jk-tooltip","data-tooltip-content":(null==lastSubmission?void 0:lastSubmission.read)?"mark as unread":"mark as read",onClick:function(setLoaderStatus){return function JkmdSheetSection_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){JkmdSheetSection_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){JkmdSheetSection_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}(function(){var _userResults_mutate,jkMdSubmissionDTO,_jukiApiManager_API_V1_worksheet_submitJkMd,url,options,response;return JkmdSheetSection_ts_generator(this,function(_state){switch(_state.label){case 0:return setLoaderStatus(esm.nW6.LOADING),jkMdSubmissionDTO={type:esm.Lc_.JK_MD,id:content.id,read:!(null==lastSubmission?void 0:lastSubmission.read)},_jukiApiManager_API_V1_worksheet_submitJkMd=settings.Z.API_V1.worksheet.submitJkMd({params:{worksheetKey},body:jkMdSubmissionDTO}),url=_jukiApiManager_API_V1_worksheet_submitJkMd.url,options=JkmdSheetSection_object_without_properties(_jukiApiManager_API_V1_worksheet_submitJkMd,["url"]),[4,(0,helpers.zb)(url,options)];case 1:return response=esm.Hu3.apply(void 0,[_state.sent()]),[4,null==userResults||null===(_userResults_mutate=userResults.mutate)||void 0===_userResults_mutate?void 0:_userResults_mutate.call(userResults)];case 2:return _state.sent(),notifyResponse(response,setLoaderStatus),[2]}})})()},icon:(0,jsx_runtime.jsx)(atoms.GL,{checked:!!(null==lastSubmission?void 0:lastSubmission.read),onChange:function(){return null}}),children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:(null==lastSubmission?void 0:lastSubmission.read)?"_read":"unread"})})}),(0,jsx_runtime.jsx)(ChunkTitle,{content}),!!text&&(0,jsx_runtime.jsx)("div",{className:"jk-br-ie jk-pg wh-100 bc-we",children:(0,jsx_runtime.jsx)(MdMathViewer.G,{source:text})})]}),setSheet&&(0,jsx_runtime.jsx)(molecules.GK,{actionButtons:getActionButtons({type:esm.Lc_.JK_MD,edit:true,setModal,index,sheetLength,setSheet}),placement:"out rightTop"})]})};JkmdSheetSection.__docgenInfo={description:"",methods:[],displayName:"JkmdSheetSection",props:{content:{required:!0,tsType:{name:"JkmdSheetType"},description:""},setContent:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"JkmdSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""},index:{required:!0,tsType:{name:"number"},description:""},chunkId:{required:!0,tsType:{name:"string"},description:""},sheetLength:{required:!0,tsType:{name:"number"},description:""},setSheet:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"BodyWorksheetType"}],raw:"T[]"}],raw:"SetStateAction<T[]>"}],raw:"Dispatch<SetStateAction<T[]>>"},description:""},worksheetKey:{required:!0,tsType:{name:"string"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""},readOnly:{required:!0,tsType:{name:"boolean"},description:""},userResults:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  data?: WorksheetUserSubmissionsResponseDTO,\n  isLoading?: boolean,\n  validating?: boolean,\n  mutate?: KeyedMutator<any>,\n}",signature:{properties:[{key:"data",value:{name:"WorksheetUserSubmissionsResponseDTO",required:!1}},{key:"isLoading",value:{name:"boolean",required:!1}},{key:"validating",value:{name:"boolean",required:!1}},{key:"mutate",value:{name:"KeyedMutator",elements:[{name:"any"}],raw:"KeyedMutator<any>",required:!1}}]}},description:""}}};var v4=__webpack_require__("./node_modules/uuid/dist/v4.js");function QuizOptionsSheetSectionEditor_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function QuizOptionsSheetSectionEditor_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function QuizOptionsSheetSectionEditor_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){QuizOptionsSheetSectionEditor_define_property(target,key,source[key])})}return target}function QuizOptionsSheetSectionEditor_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function QuizOptionsSheetSectionEditor_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function QuizOptionsSheetSectionEditor_to_consumable_array(arr){return function QuizOptionsSheetSectionEditor_array_without_holes(arr){if(Array.isArray(arr))return QuizOptionsSheetSectionEditor_array_like_to_array(arr)}(arr)||function QuizOptionsSheetSectionEditor_iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function QuizOptionsSheetSectionEditor_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return QuizOptionsSheetSectionEditor_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QuizOptionsSheetSectionEditor_array_like_to_array(o,minLen)}(arr)||function QuizOptionsSheetSectionEditor_non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var QuizOptionsSheetSectionEditor=function(param){var content=param.content,setContent=param.setContent,isSolvable=param.isSolvable;return(0,jsx_runtime.jsxs)("div",{className:"jk-col gap stretch left jk-pg-sm wh-100 br-ht jk-br-ie",children:[(0,jsx_runtime.jsxs)("div",{className:"jk-row-col gap tx-s",children:[(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"options"}),(0,jsx_runtime.jsx)(atoms.JN,{size:"small",checked:content.multiple,onChange:function(newValue){return setContent(function(prevState){return QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},prevState),{multiple:newValue,options:prevState.options.map(function(option){return QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},option),{correct:!1})})})})},leftLabel:(0,jsx_runtime.jsx)(atoms.T,{className:(0,helpers.xW)("tt-se",{"fw-bd":!content.multiple}),children:"single"}),rightLabel:(0,jsx_runtime.jsx)(atoms.T,{className:(0,helpers.xW)("tt-se",{"fw-bd":content.multiple}),children:"multiple"})})]}),isSolvable&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"jk-row left",style:{width:64},children:(0,jsx_runtime.jsx)(atoms.pd,{label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"points"}),labelPlacement:"top",type:"number",expand:!0,value:content.points,onChange:function(points){return setContent(function(prevState){return QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},prevState),{points})})}})}),(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"scoring mode"}),(0,jsx_runtime.jsx)(atoms.JN,{size:"small",checked:content.scoringMode===esm.uvq.TOTAL,onChange:function(newValue){return setContent(function(prevState){return QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},prevState),{scoringMode:newValue?esm.uvq.TOTAL:esm.uvq.PARTIAL})})},leftLabel:(0,jsx_runtime.jsx)(atoms.T,{className:(0,helpers.xW)("tt-se",{"fw-bd":"PARTIAL"===content.scoringMode}),children:"partial"}),rightLabel:(0,jsx_runtime.jsx)(atoms.T,{className:(0,helpers.xW)("tt-se",{"fw-bd":"TOTAL"===content.scoringMode}),children:"total"})})]})]})]}),(0,jsx_runtime.jsx)(atoms.pd,{label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"title"}),labelPlacement:"top",value:content.title,onChange:function(title){return setContent(function(prevState){return QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},prevState),{title})})},expand:!0}),(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch",children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se fw-bd",children:"description"}),(0,jsx_runtime.jsx)(MdMathEditor.D,{value:content.description,onChange:function(description){return setContent(function(prevState){return QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},prevState),{description})})},enableTextPlain:!0,enableIA:!0,enableImageUpload:!0})]}),(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch left gap",children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se cr-pl",children:"select the correct options"}),content.options.map(function(option,index){return(0,jsx_runtime.jsxs)("div",{className:"jk-row gap nowrap extend",children:[content.multiple?(0,jsx_runtime.jsx)(atoms.GL,{checked:option.correct,onChange:function(newValue){setContent(function(prevState){var newOptions=QuizOptionsSheetSectionEditor_to_consumable_array(prevState.options);return newOptions[index]&&(newOptions[index]=QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},newOptions[index]),{correct:newValue})),QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},prevState),{options:newOptions})})}}):(0,jsx_runtime.jsx)(atoms.U6,{name:content.id,checked:option.correct,onChange:function(newValue){setContent(function(prevState){var newOptions=QuizOptionsSheetSectionEditor_to_consumable_array(prevState.options).map(function(option){return QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},option),{correct:!1})});return newOptions[index]&&(newOptions[index]=QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},newOptions[index]),{correct:newValue})),QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},prevState),{options:newOptions})})}}),(0,jsx_runtime.jsx)(MdMathEditor.D,{className:"wh-100",value:option.label,onChange:function(label){setContent(function(prevState){var newOptions=QuizOptionsSheetSectionEditor_to_consumable_array(prevState.options);return newOptions[index]&&(newOptions[index]=QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},newOptions[index]),{label})),QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},prevState),{options:newOptions})})},enableTextPlain:!0,enableIA:!0,enableImageUpload:!0})]},"".concat(index))}),(0,jsx_runtime.jsxs)(atoms.$n,{type:"light",className:"jk-row gap",onClick:function(){return setContent(function(prevState){return QuizOptionsSheetSectionEditor_object_spread_props(QuizOptionsSheetSectionEditor_object_spread({},prevState),{options:QuizOptionsSheetSectionEditor_to_consumable_array(prevState.options).concat([{label:"",correct:!1,id:(0,v4.A)()}])})})},children:[(0,jsx_runtime.jsx)(server.REV,{})," ",(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"add option"})]})]})]})};function QuizOptionsSheetSectionView_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function QuizOptionsSheetSectionView_to_consumable_array(arr){return function QuizOptionsSheetSectionView_array_without_holes(arr){if(Array.isArray(arr))return QuizOptionsSheetSectionView_array_like_to_array(arr)}(arr)||function QuizOptionsSheetSectionView_iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function QuizOptionsSheetSectionView_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return QuizOptionsSheetSectionView_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QuizOptionsSheetSectionView_array_like_to_array(o,minLen)}(arr)||function QuizOptionsSheetSectionView_non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}QuizOptionsSheetSectionEditor.__docgenInfo={description:"",methods:[],displayName:"QuizOptionsSheetSectionEditor",props:{content:{required:!0,tsType:{name:"QuizOptionsSheetType"},description:""},setContent:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"QuizOptionsSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""}}};var QuizOptionsSheetSectionView=function(props){var content=props.content,checkedOptions=props.checkedOptions,setCheckedOptions=props.setCheckedOptions,readOnly=props.readOnly;return(0,jsx_runtime.jsxs)("div",{className:"bc-we jk-br-ie jk-pg jk-col stretch gap wh-100",children:[(0,jsx_runtime.jsx)(MdMathViewer.G,{source:content.description,className:"bc-hl jk-pg-xsm jk-br-ie"}),(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se fw-bd cr-th",children:content.multiple?"select one or more options":"select one option"}),(0,jsx_runtime.jsx)("div",{className:"jk-col stretch left gap",children:content.options.map(function(option){return(0,jsx_runtime.jsxs)("div",{className:(0,helpers.xW)("jk-row gap nowrap extend left jk-br-ie option jk-br-ie jk-pg-xsm-rl",{"bc-hl":checkedOptions.includes(option.id)}),onClick:readOnly?void 0:function(){content.multiple?checkedOptions.includes(option.id)?setCheckedOptions(checkedOptions.filter(function(o){return o!==option.id})):setCheckedOptions(QuizOptionsSheetSectionView_to_consumable_array(checkedOptions).concat([option.id])):setCheckedOptions([option.id])},children:[content.multiple?(0,jsx_runtime.jsx)(atoms.GL,{checked:checkedOptions.includes(option.id),onChange:function(){return null},className:(0,helpers.xW)({"bc-sl jk-br-ie":option.correct})}):(0,jsx_runtime.jsx)(atoms.U6,{checked:checkedOptions.includes(option.id),onChange:function(){return null},className:(0,helpers.xW)({"bc-sl br-50-pc":option.correct})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(MdMathViewer.G,{source:option.label})})]},option.id)})})]})};function QuizOptionsSheetSection_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function QuizOptionsSheetSection_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function QuizOptionsSheetSection_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=function QuizOptionsSheetSection_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function QuizOptionsSheetSection_sliced_to_array(arr,i){return function QuizOptionsSheetSection_array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function QuizOptionsSheetSection_iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function QuizOptionsSheetSection_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return QuizOptionsSheetSection_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QuizOptionsSheetSection_array_like_to_array(o,minLen)}(arr,i)||function QuizOptionsSheetSection_non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QuizOptionsSheetSection_ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}QuizOptionsSheetSectionView.__docgenInfo={description:"",methods:[],displayName:"QuizOptionsSheetSectionView",props:{content:{required:!0,tsType:{name:"QuizOptionsSheetType"},description:""},checkedOptions:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setCheckedOptions:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"string"}],raw:"string[]"}],raw:"SetStateAction<string[]>"}],raw:"Dispatch<SetStateAction<string[]>>"},description:""},readOnly:{required:!0,tsType:{name:"boolean"},description:""}}};var QuizOptionsSheetSection=function(props){var _userResults_data_submissions_WorksheetType_QUIZ_OPTIONS,_userResults_data,_userResults_data_submissions_WorksheetType_QUIZ_OPTIONS_chunkId,initialContent=props.content,saveContent=props.setContent,index=props.index,chunkId=props.chunkId,sheetLength=props.sheetLength,setSheet=props.setSheet,worksheetKey=props.worksheetKey,isSolvable=props.isSolvable,userResults=props.userResults,readOnly=props.readOnly,notifyResponse=(0,useJukiNotification.E)().notifyResponse,_useState=QuizOptionsSheetSection_sliced_to_array((0,react.useState)(!1),2),edit=_useState[0],setEdit=_useState[1],_useState1=QuizOptionsSheetSection_sliced_to_array((0,react.useState)(!1),2),modal=_useState1[0],setModal=_useState1[1],_useStableState=QuizOptionsSheetSection_sliced_to_array((0,useStableState.I)(initialContent),2),content=_useStableState[0],_setContent=_useStableState[1],setContent=saveContent?_setContent:void 0,sectionRef=(0,react.useRef)(null),onSaveEdit=function(){setEdit(!edit),null==saveContent||saveContent(content)};useOnSaveSheetSection(sectionRef,edit,onSaveEdit);var _lastSubmission_checkedOptions,submissions=null!==(_userResults_data_submissions_WorksheetType_QUIZ_OPTIONS_chunkId=null==userResults||null===(_userResults_data=userResults.data)||void 0===_userResults_data||null===(_userResults_data_submissions_WorksheetType_QUIZ_OPTIONS=_userResults_data.submissions[esm.Lc_.QUIZ_OPTIONS])||void 0===_userResults_data_submissions_WorksheetType_QUIZ_OPTIONS?void 0:_userResults_data_submissions_WorksheetType_QUIZ_OPTIONS[chunkId])&&void 0!==_userResults_data_submissions_WorksheetType_QUIZ_OPTIONS_chunkId?_userResults_data_submissions_WorksheetType_QUIZ_OPTIONS_chunkId:[],_useStableState1=QuizOptionsSheetSection_sliced_to_array((0,useStableState.I)(submissions.length-1),2),selectedIndex=_useStableState1[0],setSelectedIndex=_useStableState1[1],lastSubmission=submissions.at(selectedIndex),_useStableState2=QuizOptionsSheetSection_sliced_to_array((0,useStableState.I)(null!==(_lastSubmission_checkedOptions=null==lastSubmission?void 0:lastSubmission.checkedOptions)&&void 0!==_lastSubmission_checkedOptions?_lastSubmission_checkedOptions:[]),2),checkedOptions=_useStableState2[0],setCheckedOptions=_useStableState2[1];return(0,jsx_runtime.jsxs)("div",{ref:sectionRef,className:"jk-row top left nowrap stretch jk-br-ie pn-re wh-100",onDoubleClick:function(){return setEdit(!0)},children:[setContent&&(0,jsx_runtime.jsx)(EditSheetModal.j,{isOpen:modal,onClose:function(){return setModal(!1)},content,setContent,isValid:function(value){return(0,esm.UWh)(value)&&(0,esm.FKY)(JSON.parse(value))}}),setContent&&edit?(0,jsx_runtime.jsx)(QuizOptionsSheetSectionEditor,{content,setContent,isSolvable}):(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch gap quiz-options-sheet-section-view wh-100 pn-re",children:[isSolvable&&!setSheet&&(0,jsx_runtime.jsx)(ResultHeaders,{submissions,points:content.points,selectedIndex,setSelectedIndex,children:!readOnly&&(0,jsx_runtime.jsx)(molecules.mT,{type:"light",size:"small",expand:!0,onClick:function(setLoaderStatus){return function QuizOptionsSheetSection_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){QuizOptionsSheetSection_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){QuizOptionsSheetSection_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}(function(){var _userResults_mutate,jkMdSubmissionDTO,_jukiApiManager_API_V1_worksheet_submitQuizOptions,url,options,response;return QuizOptionsSheetSection_ts_generator(this,function(_state){switch(_state.label){case 0:return setLoaderStatus(esm.nW6.LOADING),jkMdSubmissionDTO={type:esm.Lc_.QUIZ_OPTIONS,id:content.id,checkedOptions},_jukiApiManager_API_V1_worksheet_submitQuizOptions=settings.Z.API_V1.worksheet.submitQuizOptions({params:{worksheetKey},body:jkMdSubmissionDTO}),url=_jukiApiManager_API_V1_worksheet_submitQuizOptions.url,options=QuizOptionsSheetSection_object_without_properties(_jukiApiManager_API_V1_worksheet_submitQuizOptions,["url"]),[4,(0,helpers.zb)(url,options)];case 1:return response=esm.Hu3.apply(void 0,[_state.sent()]),[4,null==userResults||null===(_userResults_mutate=userResults.mutate)||void 0===_userResults_mutate?void 0:_userResults_mutate.call(userResults)];case 2:return _state.sent(),notifyResponse(response,setLoaderStatus),[2]}})})()},children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"save"})})}),(0,jsx_runtime.jsx)(ChunkTitle,{content}),(0,jsx_runtime.jsx)(QuizOptionsSheetSectionView,{content,checkedOptions,setCheckedOptions,readOnly})]}),setSheet&&(0,jsx_runtime.jsx)(molecules.GK,{actionButtons:getActionButtons({type:esm.Lc_.QUIZ_OPTIONS,edit,setModal,index,sheetLength,setSheet,onSaveEdit,onCancel:function(){setEdit(!1),_setContent(initialContent)}}),placement:"out rightTop"})]})};QuizOptionsSheetSection.__docgenInfo={description:"",methods:[],displayName:"QuizOptionsSheetSection",props:{content:{required:!0,tsType:{name:"QuizOptionsSheetType"},description:""},setContent:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"QuizOptionsSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""},index:{required:!0,tsType:{name:"number"},description:""},chunkId:{required:!0,tsType:{name:"string"},description:""},sheetLength:{required:!0,tsType:{name:"number"},description:""},setSheet:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"BodyWorksheetType"}],raw:"T[]"}],raw:"SetStateAction<T[]>"}],raw:"Dispatch<SetStateAction<T[]>>"},description:""},worksheetKey:{required:!0,tsType:{name:"string"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""},readOnly:{required:!0,tsType:{name:"boolean"},description:""},userResults:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  data?: WorksheetUserSubmissionsResponseDTO,\n  isLoading?: boolean,\n  validating?: boolean,\n  mutate?: KeyedMutator<any>,\n}",signature:{properties:[{key:"data",value:{name:"WorksheetUserSubmissionsResponseDTO",required:!1}},{key:"isLoading",value:{name:"boolean",required:!1}},{key:"validating",value:{name:"boolean",required:!1}},{key:"mutate",value:{name:"KeyedMutator",elements:[{name:"any"}],raw:"KeyedMutator<any>",required:!1}}]}},description:""}}};var ProblemSelector=__webpack_require__("./src/components/organisms/ProblemSelector/ProblemSelector.tsx"),PageNotFound=__webpack_require__("./src/components/organisms/PageNotFound/PageNotFound.tsx"),ProblemSummary=function(param){var problemKey=param.problemKey;return(0,jsx_runtime.jsx)("div",{style:{},children:(0,jsx_runtime.jsx)(molecules.pW,{url:settings.Z.API_V1.problem.getSummary({params:{key:problemKey}}).url,errorView:(0,jsx_runtime.jsx)(PageNotFound.H,{children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"problem not found"})}),children:function(param){var data=param.data;return(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsx)("div",{className:"fw-bd",children:data.content.name}),(0,jsx_runtime.jsx)("div",{className:"jk-tag bc-io",children:data.content.judge.key}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se fw-bd",children:"type"}),": ",esm.hcK[data.content.settings.type].label]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se fw-bd",children:"scoring mode"}),": ",esm.wkj[data.content.settings.scoringMode].label]})]})}})})};function QuizProblemSheetSectionEditor_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function QuizProblemSheetSectionEditor_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){QuizProblemSheetSectionEditor_define_property(target,key,source[key])})}return target}function QuizProblemSheetSectionEditor_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):function QuizProblemSheetSectionEditor_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}ProblemSummary.__docgenInfo={description:"",methods:[],displayName:"ProblemSummary",props:{problemKey:{required:!0,tsType:{name:"string"},description:""}}};var QuizProblemSheetSectionEditor=function(param){var _content_languages,content=param.content,setContent=param.setContent,isSolvable=param.isSolvable;return(0,jsx_runtime.jsx)("div",{className:"jk-col stretch left",children:(0,jsx_runtime.jsxs)("div",{className:"jk-col gap stretch flex-1",style:{width:"100%"},children:[(0,jsx_runtime.jsx)(atoms.pd,{label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"title"}),labelPlacement:"top",value:content.title,onChange:function(title){return setContent(function(prevState){return QuizProblemSheetSectionEditor_object_spread_props(QuizProblemSheetSectionEditor_object_spread({},prevState),{title})})},expand:!0}),isSolvable&&(0,jsx_runtime.jsx)(atoms.pd,{type:"number",label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"points"}),labelPlacement:"top",value:content.points,onChange:function(points){return setContent(function(prevState){return QuizProblemSheetSectionEditor_object_spread_props(QuizProblemSheetSectionEditor_object_spread({},prevState),{points})})},expand:!0}),(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"languages"}),":",(0,jsx_runtime.jsx)(atoms.KF,{options:esm.xRM.map(function(key){var _CODE_LANGUAGE_key,_CODE_LANGUAGE_key_label;return{value:key,label:null!==(_CODE_LANGUAGE_key_label=null===(_CODE_LANGUAGE_key=esm.fO_[key])||void 0===_CODE_LANGUAGE_key?void 0:_CODE_LANGUAGE_key.label)&&void 0!==_CODE_LANGUAGE_key_label?_CODE_LANGUAGE_key_label:key}}),selectedOptions:null===(_content_languages=content.languages)||void 0===_content_languages?void 0:_content_languages.map(function(language){return{value:language}}),onChange:function(options){return setContent(function(prevState){return QuizProblemSheetSectionEditor_object_spread_props(QuizProblemSheetSectionEditor_object_spread({},prevState),{languages:options.map(function(option){return option.value})})})},expand:!0})]}),(0,jsx_runtime.jsx)("div",{children:content.problemKey?(0,jsx_runtime.jsx)(ProblemSummary,{problemKey:content.problemKey}):(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"please select a problem"})}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap left",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"height"}),":"]}),(0,jsx_runtime.jsx)(atoms.GL,{checked:0===content.height,label:(0,jsx_runtime.jsx)(atoms.T,{children:"auto"}),onChange:function(value){return setContent(function(prevState){return QuizProblemSheetSectionEditor_object_spread_props(QuizProblemSheetSectionEditor_object_spread({},prevState),{height:value?0:constants.o})})}}),(0,jsx_runtime.jsx)(atoms.pd,{disabled:0===content.height,type:"number",value:content.height,onChange:function(value){return setContent(function(prevState){return QuizProblemSheetSectionEditor_object_spread_props(QuizProblemSheetSectionEditor_object_spread({},prevState),{height:Math.abs(value)})})},size:"auto"}),(0,jsx_runtime.jsx)(atoms.T,{children:"px"})]}),(0,jsx_runtime.jsx)(ProblemSelector.f,{onSelect:function(problem){setContent(function(prevState){return QuizProblemSheetSectionEditor_object_spread_props(QuizProblemSheetSectionEditor_object_spread({},prevState),{problemKey:problem.key,problemJudge:problem.judge.key})})}})]})})};QuizProblemSheetSectionEditor.__docgenInfo={description:"",methods:[],displayName:"QuizProblemSheetSectionEditor",props:{content:{required:!0,tsType:{name:"QuizProblemSheetType"},description:""},setContent:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"QuizProblemSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""}}};var ProblemView=__webpack_require__("./src/components/templates/ProblemView/ProblemView.tsx");function QuizProblemSheetSectionView_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function QuizProblemSheetSectionView_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=function QuizProblemSheetSectionView_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function QuizProblemSheetSectionView_ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var QuizProblemSheetSectionView=function(param){var content=param.content,worksheetKey=param.worksheetKey,notifyResponse=(0,useJukiNotification.E)().notifyResponse,validHeight=!Number.isNaN(+content.height)&&+content.height>0;return(0,jsx_runtime.jsx)("div",{className:"jk-col nowrap gap wh-100",style:{maxHeight:validHeight?"calc(".concat(+content.height,"px + var(--gap))"):"calc(var(--100VH) - 300px)",height:validHeight?"calc(".concat(+content.height,"px + var(--gap))"):"calc(var(--100VH) * 0.6)"},children:(0,jsx_runtime.jsx)("div",{className:"jk-col nowrap stretch flex-1 gap wh-100",style:{height:"100%"},children:(0,jsx_runtime.jsx)(molecules.pW,{url:content.problemKey?settings.Z.API_V1.problem.getData({params:{key:content.problemKey}}).url:null,children:function(param){var data=param.data;return(0,jsx_runtime.jsx)(ProblemView.l,{problem:data.content,infoPlacement:"name",codeEditorStoreKey:"".concat(worksheetKey,"/").concat(content.id),codeEditorCenterButtons:function(param){var _ref=param.files[param.currentFileName]||{},_ref_source=_ref.source,source=void 0===_ref_source?"":_ref_source,_ref_language=_ref.language,language=void 0===_ref_language?esm.aFm.TEXT:_ref_language;return[(0,jsx_runtime.jsx)(molecules.b7,{children:(0,jsx_runtime.jsx)(molecules.mT,{size:"small",onClick:function(setLoaderStatus){return function QuizProblemSheetSectionView_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){QuizProblemSheetSectionView_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){QuizProblemSheetSectionView_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}(function(){var quizProblem,_jukiApiManager_API_V1_worksheet_submitQuizProblem,url,options,response;return QuizProblemSheetSectionView_ts_generator(this,function(_state){switch(_state.label){case 0:return setLoaderStatus(esm.nW6.LOADING),quizProblem={id:content.id,type:esm.Lc_.QUIZ_PROBLEM,language,source},_jukiApiManager_API_V1_worksheet_submitQuizProblem=settings.Z.API_V1.worksheet.submitQuizProblem({params:{worksheetKey},body:quizProblem}),url=_jukiApiManager_API_V1_worksheet_submitQuizProblem.url,options=QuizProblemSheetSectionView_object_without_properties(_jukiApiManager_API_V1_worksheet_submitQuizProblem,["url"]),[4,(0,helpers.zb)(url,options)];case 1:return response=esm.Hu3.apply(void 0,[_state.sent()]),notifyResponse(response,setLoaderStatus),[2]}})})()},children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"submit"})})},"submit")]}})}})})})};function QuizProblemSheetSection_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function QuizProblemSheetSection_sliced_to_array(arr,i){return function QuizProblemSheetSection_array_with_holes(arr){if(Array.isArray(arr))return arr}(arr)||function QuizProblemSheetSection_iterable_to_array_limit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function QuizProblemSheetSection_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return QuizProblemSheetSection_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QuizProblemSheetSection_array_like_to_array(o,minLen)}(arr,i)||function QuizProblemSheetSection_non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}QuizProblemSheetSectionView.__docgenInfo={description:"",methods:[],displayName:"QuizProblemSheetSectionView",props:{content:{required:!0,tsType:{name:"QuizProblemSheetType"},description:""},worksheetKey:{required:!0,tsType:{name:"string"},description:""}}};var QuizProblemSheetSection=function(props){var _userResults_data_submissions_WorksheetType_QUIZ_PROBLEM,_userResults_data,initialContent=props.content,saveContent=props.setContent,index=props.index,chunkId=props.chunkId,sheetLength=props.sheetLength,setSheet=props.setSheet,worksheetKey=props.worksheetKey,isSolvable=props.isSolvable,userResults=props.userResults,_useState=QuizProblemSheetSection_sliced_to_array((0,react.useState)(!1),2),edit=_useState[0],setEdit=_useState[1],_useState1=QuizProblemSheetSection_sliced_to_array((0,react.useState)(!1),2),modal=_useState1[0],setModal=_useState1[1],_useStableState=QuizProblemSheetSection_sliced_to_array((0,useStableState.I)(initialContent),2),content=_useStableState[0],_setContent=_useStableState[1],sectionRef=(0,react.useRef)(null),onSaveEdit=function(){setEdit(!edit),null==saveContent||saveContent(content)};useOnSaveSheetSection(sectionRef,edit,onSaveEdit);var _userResults_data_submissions_WorksheetType_QUIZ_PROBLEM_chunkId,_lastSubmission_points,setContent=saveContent?_setContent:void 0,lastSubmission=(null!==(_userResults_data_submissions_WorksheetType_QUIZ_PROBLEM_chunkId=null==userResults||null===(_userResults_data=userResults.data)||void 0===_userResults_data||null===(_userResults_data_submissions_WorksheetType_QUIZ_PROBLEM=_userResults_data.submissions[esm.Lc_.QUIZ_PROBLEM])||void 0===_userResults_data_submissions_WorksheetType_QUIZ_PROBLEM?void 0:_userResults_data_submissions_WorksheetType_QUIZ_PROBLEM[chunkId])&&void 0!==_userResults_data_submissions_WorksheetType_QUIZ_PROBLEM_chunkId?_userResults_data_submissions_WorksheetType_QUIZ_PROBLEM_chunkId:[]).at(-1);return(0,jsx_runtime.jsxs)("div",{className:"jk-row top left nowrap stretch jk-br-ie pn-re wh-100",onDoubleClick:function(){return setEdit(!0)},children:[setContent&&(0,jsx_runtime.jsx)(EditSheetModal.j,{isOpen:modal,onClose:function(){return setModal(!1)},content,setContent,isValid:function(value){return(0,esm.UWh)(value)&&(0,esm.kS$)(JSON.parse(value))}}),setContent&&edit?(0,jsx_runtime.jsx)(QuizProblemSheetSectionEditor,{content,setContent,isSolvable}):(0,jsx_runtime.jsxs)("div",{className:"jk-col gap stretch center quiz-problem-sheet-section-view wh-100 pn-re",children:[isSolvable&&!setSheet&&(0,jsx_runtime.jsx)(ResultHeader,{submitted:!!lastSubmission,points:content.points,userPoints:null!==(_lastSubmission_points=null==lastSubmission?void 0:lastSubmission.points)&&void 0!==_lastSubmission_points?_lastSubmission_points:0,isResolved:!!(null==lastSubmission?void 0:lastSubmission.isCompleted),children:!!(null==lastSubmission?void 0:lastSubmission.isCompleted)&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(server.Srz,{size:"tiny"})," ",(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"resolved"})]})}),(0,jsx_runtime.jsx)(ChunkTitle,{content}),content.problemKey?(0,jsx_runtime.jsx)(QuizProblemSheetSectionView,{content,worksheetKey}):(0,jsx_runtime.jsx)("div",{className:"jk-row center",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se cr-er",children:"problem not selected"})})]}),setSheet&&(0,jsx_runtime.jsx)(molecules.GK,{actionButtons:getActionButtons({type:esm.Lc_.QUIZ_PROBLEM,edit,setModal,index,sheetLength,setSheet,onSaveEdit,onCancel:function(){setEdit(!1),_setContent(initialContent)}}),placement:"out rightTop"})]})};function WorksheetNode_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function WorksheetNode_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function WorksheetNode_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){WorksheetNode_define_property(target,key,source[key])})}return target}function WorksheetNode_to_consumable_array(arr){return function WorksheetNode_array_without_holes(arr){if(Array.isArray(arr))return WorksheetNode_array_like_to_array(arr)}(arr)||function WorksheetNode_iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function WorksheetNode_unsupported_iterable_to_array(o,minLen){if(!o)return;if("string"==typeof o)return WorksheetNode_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WorksheetNode_array_like_to_array(o,minLen)}(arr)||function WorksheetNode_non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}QuizProblemSheetSection.__docgenInfo={description:"",methods:[],displayName:"QuizProblemSheetSection",props:{content:{required:!0,tsType:{name:"QuizProblemSheetType"},description:""},setContent:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"QuizProblemSheetType"}],raw:"SetStateAction<T>"}],raw:"Dispatch<SetStateAction<T>>"},description:""},index:{required:!0,tsType:{name:"number"},description:""},chunkId:{required:!0,tsType:{name:"string"},description:""},sheetLength:{required:!0,tsType:{name:"number"},description:""},setSheet:{required:!1,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"BodyWorksheetType"}],raw:"T[]"}],raw:"SetStateAction<T[]>"}],raw:"Dispatch<SetStateAction<T[]>>"},description:""},worksheetKey:{required:!0,tsType:{name:"string"},description:""},isSolvable:{required:!0,tsType:{name:"boolean"},description:""},readOnly:{required:!0,tsType:{name:"boolean"},description:""},userResults:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  data?: WorksheetUserSubmissionsResponseDTO,\n  isLoading?: boolean,\n  validating?: boolean,\n  mutate?: KeyedMutator<any>,\n}",signature:{properties:[{key:"data",value:{name:"WorksheetUserSubmissionsResponseDTO",required:!1}},{key:"isLoading",value:{name:"boolean",required:!1}},{key:"validating",value:{name:"boolean",required:!1}},{key:"mutate",value:{name:"KeyedMutator",elements:[{name:"any"}],raw:"KeyedMutator<any>",required:!1}}]}},description:""}}};var WorksheetNode=function(props){var _sheet_,sheet=props.sheet,setSheet=props.setSheet,userResults=props.userResults,readOnly=props.readOnly,isSolvable=props.isSolvable,worksheetKey=props.worksheetKey,asSlides=props.asSlides,index=props.index,length=props.length,chunk=sheet[index];if(!chunk)return null;var setContent=setSheet?function(value){setSheet(function(sheet){var newSheet=WorksheetNode_to_consumable_array(sheet);if(newSheet[index]){var newContent="function"==typeof value?value(newSheet[index]):value;newSheet.splice(index,1,structuredClone(newContent))}return newSheet})}:void 0,isNextJkmd=(null===(_sheet_=sheet[index+1])||void 0===_sheet_?void 0:_sheet_.type)===esm.Lc_.JK_MD,sectionProps={content:chunk,setContent:asSlides?void 0:setContent,index,chunkId:chunk.id,sheetLength:sheet.length,setSheet:asSlides?void 0:setSheet,worksheetKey,isSolvable,userResults,readOnly};return asSlides&&chunk.type===esm.Lc_.JK_MD?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DetectRequestAnimationFrame.S,{name:"WorksheetNode"}),(0,jsx_runtime.jsx)(MdMathViewer.G,{source:chunk.content.trim(),slideView:!0})]}):(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{id:chunk.id,className:(0,helpers.xW)("jk-row nowrap stretch top gap pn-re jk-br-ie wh-100","".concat(chunk.type,"-chunk"),{editing:!!setSheet,"next-jkmd":isNextJkmd}),children:[chunk.type===esm.Lc_.JK_MD&&(0,jsx_runtime.jsx)(JkmdSheetSection,WorksheetNode_object_spread({},sectionProps)),chunk.type===esm.Lc_.CODE_EDITOR&&(0,jsx_runtime.jsx)(CodeEditorSheetSection,WorksheetNode_object_spread({},sectionProps)),chunk.type===esm.Lc_.GRAPH&&(0,jsx_runtime.jsx)(GraphSheetSection,WorksheetNode_object_spread({},sectionProps)),chunk.type===esm.Lc_.QUIZ_PROBLEM&&(0,jsx_runtime.jsx)(QuizProblemSheetSection,WorksheetNode_object_spread({},sectionProps)),chunk.type===esm.Lc_.QUIZ_OPTIONS&&(0,jsx_runtime.jsx)(QuizOptionsSheetSection,WorksheetNode_object_spread({},sectionProps))]}),setSheet&&!asSlides&&(0,jsx_runtime.jsx)("div",{className:"jk-row gap extend nowrap center jk-divider tiny editing",children:(0,jsx_runtime.jsx)(AddNewChild.Y,{index,setSheet,mdSheet:!0,codeEditorSheet:!0,graphSheet:!0,quizProblemSheet:!0,quizOptionsSheetType:!0,pageDivider:!0,compacted:!0,floatToolbarPlacement:index===length-1?"center top":"center"})})]},chunk.id)};WorksheetNode.__docgenInfo={description:"",methods:[],displayName:"WorksheetNode",props:{index:{required:!0,tsType:{name:"number"},description:""},length:{required:!0,tsType:{name:"number"},description:""}},composes:["Pick"]}},"./src/components/organisms/_layz_/WorksheetEditor/sheets/logos.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>LOGO_WORKSHEET_TYPE});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),_atoms_server__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/atoms/server/index.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var LOGO_WORKSHEET_TYPE=function(size){var _obj;return _define_property(_obj={},_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.JK_MD,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_2__.WkB,{size}),label:"jk md"}),_define_property(_obj,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.QUIZ_PROBLEM,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_2__.BVL,{size}),label:"quiz problem"}),_define_property(_obj,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.QUIZ_TEXT,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_2__.BVL,{size}),label:"quiz text"}),_define_property(_obj,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.QUIZ_OPTIONS,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_2__.MkC,{size,rotate:180}),label:"quiz options"}),_define_property(_obj,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.NEW_PAGE,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_2__.BVL,{size}),label:"new page"}),_define_property(_obj,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.CODE_EDITOR,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_2__.loI,{size}),label:"code editor"}),_define_property(_obj,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.GRAPH,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_2__.Og_,{size}),label:"graph"}),_define_property(_obj,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lc_.LIST,{icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_2__.BVL,{size}),label:"list"}),_obj}}}]);