"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[3747],{"./src/components/organisms/_layz_/WorksheetAsSlides/WorksheetAsSlides.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>WorksheetAsSlides});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_settings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/settings/index.ts"),_stores_user_useUserStore__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/stores/user/useUserStore.ts"),_atoms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/atoms/index.tsx"),_hooks_useFetcher__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/hooks/useFetcher.ts"),_MdMath__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/organisms/_layz_/MdMath/index.ts"),_WorksheetEditor_sheets_WorksheetNode__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/organisms/_layz_/WorksheetEditor/sheets/WorksheetNode.tsx");function WorksheetAsSlides(props){var _props_worksheet=props.worksheet,content=_props_worksheet.content,quizEnable=_props_worksheet.quiz.enable,worksheetKey=_props_worksheet.key,slides=_props_worksheet.slides,resultsUserKey=props.resultsUserKey,_props_readOnly=props.readOnly,readOnly=void 0!==_props_readOnly&&_props_readOnly,page=props.page,userNickname=(0,_stores_user_useUserStore__WEBPACK_IMPORTED_MODULE_4__.k)(function(state){return state.user.nickname}),companyKey=(0,_stores_user_useUserStore__WEBPACK_IMPORTED_MODULE_4__.k)(function(state){return state.company.key}),userIsLogged=(0,_stores_user_useUserStore__WEBPACK_IMPORTED_MODULE_4__.k)(function(state){return state.user.isLogged}),_useFetcher=(0,_hooks_useFetcher__WEBPACK_IMPORTED_MODULE_6__.L)(worksheetKey&&quizEnable&&userIsLogged?_settings__WEBPACK_IMPORTED_MODULE_3__.Z.API_V1.worksheet.getSubmissionsUser({params:{key:worksheetKey,userKey:resultsUserKey||(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.Lwn)(userNickname,companyKey)}}).url:null),userResultsData=_useFetcher.data,userResultsMutate=_useFetcher.mutate,userResultsIsLoading=_useFetcher.isLoading,userResultsIsValidating=_useFetcher.isValidating,userResults=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(function(){return{data:(null==userResultsData?void 0:userResultsData.success)?userResultsData.content:void 0,isLoading:userResultsIsLoading,isValidating:userResultsIsValidating,mutate:userResultsMutate}},[userResultsData,userResultsIsLoading,userResultsIsValidating,userResultsMutate]),sheetsInPages=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(function(){return(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_1__.bs0)(content)},[content]);"number"==typeof page&&page>=0&&page<sheetsInPages.length&&sheetsInPages[page]&&(sheetsInPages=[sheetsInPages[page]]);return sheetsInPages.map(function(sheet){return[[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("section",{"data-auto-animate":!0,style:{overflow:"hidden auto",maxHeight:"100%"},"data-background-image":slides.titleBackgroundImage,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_5__.SK,{name:"WorksheetAsSlides"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_MdMath__WEBPACK_IMPORTED_MODULE_7__.s,{source:sheet.header.title,detectRequestAnimationFrame:!0})]},sheet.header.id+sheet.header.title)],sheet.content.map(function(chunk,index){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("section",{"data-auto-animate":!0,style:{overflow:"hidden auto",maxHeight:"100%"},"data-background-image":slides.backgroundImage,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_WorksheetEditor_sheets_WorksheetNode__WEBPACK_IMPORTED_MODULE_8__.B,{sheet:sheet.content,userResults,readOnly,isSolvable:quizEnable,worksheetKey,asSlides:!0,index,length:sheet.content.length})},chunk.id+index)})]}).flat(2)}}}]);