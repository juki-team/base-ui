"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[4858],{"./src/components/atoms/Popover/Popover.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Popover:()=>Popover_Popover});var react=__webpack_require__("./node_modules/react/index.js"),Popover=__webpack_require__("./node_modules/react-tiny-popover/dist/Popover.js"),helpers=__webpack_require__("./src/helpers/index.ts"),hooks=__webpack_require__("./src/hooks/index.ts"),useJukiUI=__webpack_require__("./src/hooks/useJukiUI.tsx"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),AnimatePresence=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/components/AnimatePresence/index.mjs"),proxy=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/render/components/motion/proxy.mjs"),react_dom=__webpack_require__("./node_modules/react-dom/index.js");const PopoverPortal=_ref=>{let{container,element,scoutElement,children}=_ref;return(0,react.useLayoutEffect)((()=>(container.appendChild(element),container.appendChild(scoutElement),()=>{container.removeChild(element),container.removeChild(scoutElement)})),[container,element,scoutElement]),(0,react_dom.createPortal)(children,element)};try{PopoverPortal.displayName="PopoverPortal",PopoverPortal.__docgenInfo={description:"",displayName:"PopoverPortal",props:{container:{defaultValue:null,description:"",name:"container",required:!0,type:{name:"Element"}},element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"Element"}},scoutElement:{defaultValue:null,description:"",name:"scoutElement",required:!0,type:{name:"Element"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/atoms/Popover/ReactTinyPopover.PopoverPortal.tsx#PopoverPortal"]={docgenInfo:PopoverPortal.__docgenInfo,name:"PopoverPortal",path:"src/components/atoms/Popover/ReactTinyPopover.PopoverPortal.tsx#PopoverPortal"})}catch(__react_docgen_typescript_loader_error){}const EMPTY_RECT={top:0,left:0,right:0,bottom:0,width:0,height:0};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DEFAULT_POSITIONS=["top","left","right","bottom"],PopoverInternal=(0,react.forwardRef)(((_ref,externalRef)=>{let{isOpen,children,content,positions:externalPositions=DEFAULT_POSITIONS,align="center",padding:_padding=0,reposition=!0,parentElement=window.document.body,boundaryElement=parentElement,containerClassName,containerStyle,transform,transformMode="absolute",boundaryInset=0,onClickOutside,clickOutsideCapture=!1,showPopperArrow}=_ref;const padding=showPopperArrow?_padding-3:_padding,positions=(0,hooks.FA)(Array.isArray(externalPositions)?externalPositions:[externalPositions]),{prev,updatePrevValues}=(props=>{const prevPositions=(0,react.useRef)(props.positions),prevReposition=(0,react.useRef)(props.reposition),prevTransformMode=(0,react.useRef)(props.transformMode),prevTransform=(0,react.useRef)(props.transform),prevBoundaryElement=(0,react.useRef)(props.boundaryElement),prevBoundaryInset=(0,react.useRef)(props.boundaryInset),updatePrevValues=(0,react.useCallback)((()=>{prevPositions.current=props.positions,prevReposition.current=props.reposition,prevTransformMode.current=props.transformMode,prevTransform.current=props.transform,prevBoundaryElement.current=props.boundaryElement,prevBoundaryInset.current=props.boundaryInset}),[props.boundaryElement,props.boundaryInset,props.positions,props.reposition,props.transform,props.transformMode]);return{prev:{positions:prevPositions.current,reposition:prevReposition.current,transformMode:prevTransformMode.current,transform:prevTransform.current,boundaryElement:prevBoundaryElement.current,boundaryInset:prevBoundaryInset.current},updatePrevValues}})({positions,reposition,transformMode,transform,boundaryElement,boundaryInset}),childRef=(0,react.useRef)(void 0),[popoverState,setPopoverState]=(0,react.useState)({align,nudgedLeft:0,nudgedTop:0,position:positions[0],padding,childRect:EMPTY_RECT,popoverRect:EMPTY_RECT,parentRect:EMPTY_RECT,boundaryRect:EMPTY_RECT,boundaryInset,violations:EMPTY_RECT,hasViolations:!1}),onPositionPopover=(0,react.useCallback)((popoverState=>setPopoverState(popoverState)),[]),{positionPopover,popoverRef,scoutRef}=(0,Popover.usePopover)({isOpen,childRef,containerClassName,parentElement,boundaryElement,transform,transformMode,positions,align,padding,boundaryInset,reposition,onPositionPopover});(0,react.useLayoutEffect)((()=>{let shouldUpdate=!0;const updatePopover=()=>{if(isOpen&&shouldUpdate){var _childRef$current,_popoverRef$current;const childRect=null==childRef||null===(_childRef$current=childRef.current)||void 0===_childRef$current?void 0:_childRef$current.getBoundingClientRect(),popoverRect=null==popoverRef||null===(_popoverRef$current=popoverRef.current)||void 0===_popoverRef$current?void 0:_popoverRef$current.getBoundingClientRect();null!=childRect&&null!=popoverRect&&(rectA=childRect,rectB=popoverState.childRect,rectA!==rectB&&((null==rectA?void 0:rectA.bottom)!==(null==rectB?void 0:rectB.bottom)||(null==rectA?void 0:rectA.height)!==(null==rectB?void 0:rectB.height)||(null==rectA?void 0:rectA.left)!==(null==rectB?void 0:rectB.left)||(null==rectA?void 0:rectA.right)!==(null==rectB?void 0:rectB.right)||(null==rectA?void 0:rectA.top)!==(null==rectB?void 0:rectB.top)||(null==rectA?void 0:rectA.width)!==(null==rectB?void 0:rectB.width))||popoverRect.width!==popoverState.popoverRect.width||popoverRect.height!==popoverState.popoverRect.height||popoverState.padding!==padding||popoverState.align!==align||positions!==prev.positions||reposition!==prev.reposition||transformMode!==prev.transformMode||transform!==prev.transform||boundaryElement!==prev.boundaryElement||boundaryInset!==prev.boundaryInset)&&positionPopover(),updatePrevValues(),shouldUpdate&&window.requestAnimationFrame(updatePopover)}var rectA,rectB};return window.requestAnimationFrame(updatePopover),()=>{shouldUpdate=!1}}),[align,boundaryElement,boundaryInset,isOpen,padding,popoverRef,popoverState.align,popoverState.childRect,popoverState.padding,popoverState.popoverRect.height,popoverState.popoverRect.width,positionPopover,positions,prev.boundaryElement,prev.boundaryInset,prev.positions,prev.reposition,prev.transform,prev.transformMode,reposition,transform,transformMode,updatePrevValues]),(0,react.useEffect)((()=>{const popoverElement=popoverRef.current;return Object.assign(popoverElement.style,containerStyle),()=>{Object.keys(null!=containerStyle?containerStyle:{}).forEach((key=>delete popoverElement.style[key]))}}),[containerStyle,isOpen,popoverRef]);const handleOnClickOutside=(0,react.useCallback)((e=>{var _popoverRef$current2,_childRef$current2;!isOpen||null!==(_popoverRef$current2=popoverRef.current)&&void 0!==_popoverRef$current2&&_popoverRef$current2.contains(e.target)||null!==(_childRef$current2=childRef.current)&&void 0!==_childRef$current2&&_childRef$current2.contains(e.target)||null==onClickOutside||onClickOutside(e)}),[isOpen,onClickOutside,popoverRef]),handleWindowResize=(0,react.useCallback)((()=>{childRef.current&&window.requestAnimationFrame((()=>positionPopover()))}),[positionPopover]);(0,react.useEffect)((()=>{var _parentElement$ownerD;const body=null==parentElement||null===(_parentElement$ownerD=parentElement.ownerDocument)||void 0===_parentElement$ownerD?void 0:_parentElement$ownerD.body;return null==body||body.addEventListener("click",handleOnClickOutside,clickOutsideCapture),null==body||body.addEventListener("contextmenu",handleOnClickOutside,clickOutsideCapture),null==body||body.addEventListener("resize",handleWindowResize),()=>{null==body||body.removeEventListener("click",handleOnClickOutside,clickOutsideCapture),null==body||body.removeEventListener("contextmenu",handleOnClickOutside,clickOutsideCapture),null==body||body.removeEventListener("resize",handleWindowResize)}}),[clickOutsideCapture,handleOnClickOutside,handleWindowResize,parentElement]);const handleRef=(0,react.useCallback)((node=>{childRef.current=node,null!=externalRef&&("object"==typeof externalRef?externalRef.current=node:"function"==typeof externalRef&&externalRef(node))}),[externalRef]),isY="bottom"===popoverState.position||"top"===popoverState.position,ANIMATION={collapse:{initial:isY?{height:0,boxShadow:"none",y:0}:{height:0,boxShadow:"none",x:0},show:{height:"auto",width:"auto",boxShadow:showPopperArrow?void 0:"0 0 2px 0 var(--t-color-highlight-light), 0 1px 3px 1px var(--t-color-highlight-light)",y:0,x:0},exit:isY?{height:0,boxShadow:"none",y:"top"===popoverState.position?popoverState.popoverRect.height:showPopperArrow?3:0}:{height:0,boxShadow:"none",x:0,y:"start"===popoverState.align?0:"end"===popoverState.align?popoverState.popoverRect.height:popoverState.popoverRect.height/2}},fade:{initial:{opacity:0},show:{opacity:1},exit:{opacity:0}},expand:{initial:{scale:0},show:{scale:1},exit:{scale:0}}};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,react.cloneElement)(children,{ref:handleRef}),(0,jsx_runtime.jsx)(PopoverPortal,{element:popoverRef.current,scoutElement:scoutRef.current,container:parentElement,children:(0,jsx_runtime.jsx)(AnimatePresence.N,{children:isOpen&&(0,jsx_runtime.jsx)(proxy.P.div,{initial:showPopperArrow?ANIMATION.expand.initial:ANIMATION.collapse.initial,animate:showPopperArrow?ANIMATION.expand.show:ANIMATION.collapse.show,exit:showPopperArrow?ANIMATION.expand.exit:ANIMATION.collapse.exit,className:"jk-motion-popover-layout jk-br-ie",style:showPopperArrow?{padding:isY?"3px  0":"0 3px"}:{},children:"function"==typeof content?content(popoverState):content})})})]})})),ReactTinyPopover_Popover_Popover=(0,react.forwardRef)(((props,ref)=>"undefined"==typeof window?props.children:(0,jsx_runtime.jsx)(PopoverInternal,(0,objectSpread2.A)((0,objectSpread2.A)({},props),{},{ref}))));try{ReactTinyPopover_Popover_Popover.displayName="Popover",ReactTinyPopover_Popover_Popover.__docgenInfo={description:"",displayName:"Popover",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},containerClassName:{defaultValue:null,description:"",name:"containerClassName",required:!1,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"ReactElement<unknown, string | JSXElementConstructor<any>> | ContentRenderer"}},showPopperArrow:{defaultValue:null,description:"",name:"showPopperArrow",required:!0,type:{name:"boolean"}},align:{defaultValue:{value:"center"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"start"'},{value:'"end"'}]}},padding:{defaultValue:null,description:"",name:"padding",required:!1,type:{name:"number"}},reposition:{defaultValue:{value:"true"},description:"",name:"reposition",required:!1,type:{name:"boolean"}},parentElement:{defaultValue:{value:"window.document.body"},description:"",name:"parentElement",required:!1,type:{name:"HTMLElement"}},boundaryElement:{defaultValue:{value:"window.document.body"},description:"",name:"boundaryElement",required:!1,type:{name:"HTMLElement"}},boundaryInset:{defaultValue:{value:"0"},description:"",name:"boundaryInset",required:!1,type:{name:"number"}},transform:{defaultValue:null,description:"",name:"transform",required:!1,type:{name:"PositionTransform"}},transformMode:{defaultValue:{value:"absolute"},description:"",name:"transformMode",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"relative"'}]}},positions:{defaultValue:null,description:"",name:"positions",required:!1,type:{name:"PopoverPosition | PopoverPosition[]"}},containerStyle:{defaultValue:null,description:"",name:"containerStyle",required:!1,type:{name:"Partial<CSSStyleDeclaration>"}},onClickOutside:{defaultValue:null,description:"",name:"onClickOutside",required:!1,type:{name:"((e: MouseEvent) => void)"}},clickOutsideCapture:{defaultValue:{value:"false"},description:"",name:"clickOutsideCapture",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/atoms/Popover/ReactTinyPopover.Popover.tsx#Popover"]={docgenInfo:ReactTinyPopover_Popover_Popover.__docgenInfo,name:"Popover",path:"src/components/atoms/Popover/ReactTinyPopover.Popover.tsx#Popover"})}catch(__react_docgen_typescript_loader_error){}const placementPositionAlign={topLeft:{position:"top",align:"start"},top:{position:"top",align:"center"},topRight:{position:"top",align:"end"},rightTop:{position:"right",align:"start"},right:{position:"right",align:"center"},rightBottom:{position:"right",align:"end"},bottomRight:{position:"bottom",align:"end"},bottom:{position:"bottom",align:"center"},bottomLeft:{position:"bottom",align:"start"},leftBottom:{position:"left",align:"end"},left:{position:"left",align:"center"},leftTop:{position:"left",align:"start"},center:{position:"top",align:"center"},centerScreen:{position:"top",align:"center"}},CustomComponent=react.forwardRef(((props,ref)=>(0,helpers._O)(props.children,props.childProps({props:{ref}})))),Popover_Popover=props=>{const{children,content,placement="top",visible,onVisibleChange,triggerOn="hover",triggerOff=triggerOn,showPopperArrow=!1,popoverContentClassName,marginOfChildren=12}=props,[isOpen,setIsOpen]=(0,hooks.Xk)(!1,visible,onVisibleChange),{jukiAppDivRef}=(0,useJukiUI.p)(),popoverContent=(0,jsx_runtime.jsx)("div",{className:(0,helpers.xW)("jk-popover-content jk-br-ie bc-we",popoverContentClassName),children:(0,helpers._v)(content,{isOpen,onClose:()=>setIsOpen(!1)})});return(0,jsx_runtime.jsx)(ReactTinyPopover_Popover_Popover,{boundaryElement:jukiAppDivRef.current?jukiAppDivRef.current:void 0,padding:marginOfChildren,isOpen,positions:[placementPositionAlign[placement].position,"top","bottom","left","right"],align:placementPositionAlign[placement].align,onClickOutside:()=>{(0,helpers.fo)(triggerOff,"click")&&setIsOpen(!1)},showPopperArrow,content:showPopperArrow?_ref2=>{let{position,childRect,popoverRect}=_ref2;return(0,jsx_runtime.jsx)(Popover.ArrowContainer,{position,childRect,popoverRect,arrowColor:"var(--t-color-white)",arrowSize:8,className:"popover-arrow-container jk-br-ie",arrowClassName:"popover-arrow",style:{filter:"drop-shadow(0 0 2px var(--t-color-shadow-dark))"},children:popoverContent})}:popoverContent,children:(0,jsx_runtime.jsx)(CustomComponent,{childProps:_ref=>{let{props:{ref,onMouseEnter,onMouseLeave,onClick}={}}=_ref;return{ref:e=>{null==ref||ref(e)},onMouseEnter:e=>{(0,helpers.fo)(triggerOn,"hover")&&setIsOpen(!0),null==onMouseEnter||onMouseEnter(e)},onMouseLeave:e=>{(0,helpers.fo)(triggerOff,"hover")&&setIsOpen(!1),null==onMouseLeave||onMouseLeave(e)},onClick:e=>{(0,helpers.fo)(triggerOn,"click")&&setIsOpen((prevState=>!prevState)),null==onClick||onClick(e)}}},children})})};try{Popover_Popover.displayName="Popover",Popover_Popover.__docgenInfo={description:"",displayName:"Popover",props:{content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"ReactNodeOrFunctionP1Type<{ isOpen: boolean; onClose: () => void; }>"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'},{value:'"bottomLeft"'},{value:'"bottomRight"'},{value:'"topLeft"'},{value:'"top"'},{value:'"topRight"'},{value:'"center"'},{value:'"bottom"'},{value:'"leftBottom"'},{value:'"rightBottom"'},{value:'"rightTop"'},{value:'"leftTop"'},{value:'"centerScreen"'}]}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},onVisibleChange:{defaultValue:null,description:"",name:"onVisibleChange",required:!1,type:{name:"((visible: boolean) => void)"}},triggerOn:{defaultValue:null,description:"",name:"triggerOn",required:!1,type:{name:"TriggerOnActionsType | TriggerOnActionsType[]"}},triggerOff:{defaultValue:null,description:"",name:"triggerOff",required:!1,type:{name:"TriggerOffActionsType | TriggerOffActionsType[]"}},popoverClassName:{defaultValue:null,description:"",name:"popoverClassName",required:!1,type:{name:"string"}},popoverContentClassName:{defaultValue:null,description:"",name:"popoverContentClassName",required:!1,type:{name:"string"}},showPopperArrow:{defaultValue:null,description:"",name:"showPopperArrow",required:!1,type:{name:"boolean"}},marginOfChildren:{defaultValue:null,description:"",name:"marginOfChildren",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/atoms/Popover/Popover.tsx#Popover"]={docgenInfo:Popover_Popover.__docgenInfo,name:"Popover",path:"src/components/atoms/Popover/Popover.tsx#Popover"})}catch(__react_docgen_typescript_loader_error){}}}]);