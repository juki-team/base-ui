"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[54495,92245,94259,99174],{"./src/components/organisms/ImageUploader/ImageUploaderModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ImageUploaderModal:()=>ImageUploaderModal});var react=__webpack_require__("./node_modules/react/index.js"),atoms=__webpack_require__("./src/components/atoms/index.tsx"),molecules=__webpack_require__("./src/components/molecules/index.tsx"),server=__webpack_require__("./src/components/server/index.ts"),settings=__webpack_require__("./src/settings/index.ts"),helpers=__webpack_require__("./src/helpers/index.ts"),useJukiNotification=__webpack_require__("./src/hooks/useJukiNotification.tsx"),types=__webpack_require__("./src/types/index.ts");const PublicImages=props=>{const{copyButtons,onPickImageUrl,publicImages}=props,{addNotification}=(0,useJukiNotification.E)();return react.createElement("div",{className:"public-images-tab jk-row"},publicImages.map((publicImage,index)=>react.createElement("div",{className:"thumbnail",key:publicImage.imageUrl},react.createElement("img",{src:publicImage.imageThumbnailUrl+"?v=".concat((new Date).getTime()),alt:"image "+index}),react.createElement(molecules.GK,{actionButtons:[...copyButtons?[{icon:react.createElement(server.c8I,null),buttons:[{icon:react.createElement(server.c8I,{size:"small"}),label:react.createElement(atoms.T,null,"URL"),onClick:()=>{(0,helpers.C)(publicImage.imageUrl),addNotification({type:types.NotificationType.QUIET,message:react.createElement(atoms.T,null,"copied")})}},{icon:react.createElement(server.c8I,null),label:react.createElement(atoms.T,null,"MD"),onClick:()=>{(0,helpers.C)("![image alt](".concat(publicImage.imageUrl,")")),addNotification({type:types.NotificationType.QUIET,message:react.createElement(atoms.T,null,"copied")})}}]}]:[],...onPickImageUrl?[{icon:react.createElement(server.Srz,null),buttons:[{icon:react.createElement(server.Srz,{size:"small"}),label:react.createElement(atoms.T,null,"pick"),onClick:()=>{onPickImageUrl(publicImage),addNotification({type:types.NotificationType.QUIET,message:react.createElement(atoms.T,null,"picked")})}}]}]:[]]}))))};PublicImages.__docgenInfo={description:"",methods:[],displayName:"PublicImages",props:{copyButtons:{required:!1,tsType:{name:"boolean"},description:""},onPickImageUrl:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: { imageThumbnailUrl: string, imageUrl: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ imageThumbnailUrl: string, imageUrl: string }",signature:{properties:[{key:"imageThumbnailUrl",value:{name:"string",required:!0}},{key:"imageUrl",value:{name:"string",required:!0}}]}},name:"props"}],return:{name:"void"}}},description:""},publicImages:{required:!0,tsType:{name:"Array",elements:[{name:"ImageSummaryResponseDTO"}],raw:"ImageSummaryResponseDTO[]"},description:""}}};const PublicImagesTab=props=>react.createElement(molecules.pW,{url:settings.Z.API_V1.image.getPublicList().url,triggerFetch:props.trigger},_ref=>{let{data:{contents}}=_ref;return react.createElement(PublicImages,{publicImages:contents,copyButtons:props.copyButtons,onPickImageUrl:props.onPickImageUrl})});PublicImagesTab.__docgenInfo={description:"",methods:[],displayName:"PublicImagesTab",props:{trigger:{required:!0,tsType:{name:"number"},description:""},copyButtons:{required:!1,tsType:{name:"boolean"},description:""},onPickImageUrl:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: { imageThumbnailUrl: string, imageUrl: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ imageThumbnailUrl: string, imageUrl: string }",signature:{properties:[{key:"imageThumbnailUrl",value:{name:"string",required:!0}},{key:"imageUrl",value:{name:"string",required:!0}}]}},name:"props"}],return:{name:"void"}}},description:""}}};var esm=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js");const UploadNewImageTab=(0,react.memo)(_ref=>{let{copyButtons,onPickImageUrl,onUploadedImage}=_ref;const[imagePublicUrl,setImagePublicUrl]=(0,react.useState)(""),[cropImage,setCropImage]=(0,react.useState)(),[isPublic,setIsPublic]=(0,react.useState)(!1),{addNotification}=(0,useJukiNotification.E)();return react.createElement("div",{className:"upload-new-image-tab jk-col top gap"},imagePublicUrl&&react.createElement("div",{className:"jk-col left"},copyButtons&&react.createElement(react.Fragment,null,react.createElement("div",{className:"jk-row gap left fw-bd"},react.createElement(atoms.T,null,"public url"),":",react.createElement("div",{className:"copyable jk-row"},react.createElement("a",{href:imagePublicUrl,className:"link",target:"_blank",rel:"noreferrer"},imagePublicUrl),react.createElement(atoms.$r,{text:imagePublicUrl,size:"small"}))),react.createElement("div",{className:"jk-row gap left fw-bd"},react.createElement(atoms.T,null,"markdown use"),":",react.createElement("div",{className:"copyable jk-row"},react.createElement("span",{className:"tx-t fw-bd"},"![image alt](",imagePublicUrl,")"),react.createElement(atoms.$r,{text:"![image alt](".concat(imagePublicUrl,")"),size:"small"})))),onPickImageUrl&&react.createElement(atoms.$n,{onClick:()=>onPickImageUrl({imageUrl:imagePublicUrl,imageThumbnailUrl:imagePublicUrl.replace("https://images.juki.pub/o/","https://images.juki.pub/t/")}),size:"small",expand:!0},react.createElement(atoms.T,null,"pick"))),react.createElement(atoms.JN,{checked:isPublic,leftLabel:react.createElement(atoms.T,{className:(0,helpers.xW)("tt-se",{"fw-bd":!isPublic})},"not public"),rightLabel:react.createElement(atoms.T,{className:(0,helpers.xW)("tt-se",{"fw-bd":isPublic})},"public"),onChange:setIsPublic}),react.createElement(molecules.mT,{onClick:async setLoader=>{if(null!=cropImage&&cropImage.previewCanvasRef.current){const blob=await(0,helpers.ZR)(cropImage.previewCanvasRef.current);if(blob){null==setLoader||setLoader(esm.nW6.LOADING);const{status,message,content}=await(0,helpers.XO)(blob,isPublic);status===esm.nW6.SUCCESS?(addNotification({type:types.NotificationType.SUCCESS,message:react.createElement(atoms.T,null,message)}),null==setLoader||setLoader(esm.nW6.SUCCESS),setImagePublicUrl(content.imageUrl),onUploadedImage()):(addNotification({type:types.NotificationType.ERROR,message:react.createElement(atoms.T,null,message)}),null==setLoader||setLoader(esm.nW6.ERROR))}}},disabled:!cropImage||!(null!=cropImage&&cropImage.previewCanvasRef.current),size:"small"},react.createElement(atoms.T,null,"upload image")),react.createElement(molecules.MI,{onCropChange:setCropImage,withAspect:!0,withRotate:!0,withScale:!0}))});UploadNewImageTab.__docgenInfo={description:"",methods:[],displayName:"UploadNewImageTab",props:{copyButtons:{required:!1,tsType:{name:"boolean"},description:""},onPickImageUrl:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: { imageThumbnailUrl: string, imageUrl: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ imageThumbnailUrl: string, imageUrl: string }",signature:{properties:[{key:"imageThumbnailUrl",value:{name:"string",required:!0}},{key:"imageUrl",value:{name:"string",required:!0}}]}},name:"props"}],return:{name:"void"}}},description:""},onUploadedImage:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ImageUploaderModal=props=>{const{isOpen,onClose,withPublicImagesTab=!0,copyButtons,onPickImageUrl}=props,[count,setCount]=(0,react.useState)(0),tabHeaders=[];return withPublicImagesTab&&tabHeaders.push({key:"public-images",header:react.createElement(react.Fragment,null,react.createElement(atoms.T,{className:"tt-se"},"public images"),react.createElement(atoms.$n,{icon:react.createElement(server.fNY,null),size:"small",type:"light",onClick:()=>setCount(count+1)})),body:react.createElement(PublicImagesTab,{trigger:count,key:"public-images-tab",copyButtons,onPickImageUrl})}),tabHeaders.push({key:"upload-new-image",header:react.createElement(atoms.T,{className:"tt-se"},"upload new image"),body:react.createElement(UploadNewImageTab,{key:"upload-new-image-tab",copyButtons,onPickImageUrl,onUploadedImage:()=>setCount(count+1)})}),react.createElement(atoms.aF,{isOpen,onClose,className:"modal-upload-image"},react.createElement("div",null,react.createElement(molecules.tU,{tabs:tabHeaders})))};ImageUploaderModal.__docgenInfo={description:"",methods:[],displayName:"ImageUploaderModal",props:{withPublicImagesTab:{required:!1,tsType:{name:"boolean"},description:""},copyButtons:{required:!1,tsType:{name:"boolean"},description:""},onPickImageUrl:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: { imageThumbnailUrl: string, imageUrl: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ imageThumbnailUrl: string, imageUrl: string }",signature:{properties:[{key:"imageThumbnailUrl",value:{name:"string",required:!0}},{key:"imageUrl",value:{name:"string",required:!0}}]}},name:"props"}],return:{name:"void"}}},description:""}},composes:["ModalProps"]}},"./src/components/organisms/ImageUploader/UploadImageButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UploadImageButton:()=>UploadImageButton});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_atoms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/atoms/index.tsx"),_server__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/server/index.ts"),_ImageUploaderModal__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/organisms/ImageUploader/ImageUploaderModal.tsx");const UploadImageButton=props=>{const{open,setOpen,isOpenRef,withLabel=!1,copyButtons,onPickImageUrl,children:_children}=props;isOpenRef&&(isOpenRef.current=open);const children=_children||(_ref=>{let{setOpen,withLabel}=_ref;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_1__.$n,{icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_server__WEBPACK_IMPORTED_MODULE_2__.kAu,null),type:"void",className:"bc-we",size:"small",onClick:()=>setOpen(!0)},withLabel&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_1__.T,null,"pick / upload image"))});return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":withLabel?"":"upload image","data-tooltip-t-class-name":"ws-np tt-se"},children({open,setOpen,withLabel})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ImageUploaderModal__WEBPACK_IMPORTED_MODULE_3__.ImageUploaderModal,{isOpen:open,onClose:()=>setOpen(!1),copyButtons,onPickImageUrl}))};UploadImageButton.__docgenInfo={description:"",methods:[],displayName:"UploadImageButton",props:{open:{required:!0,tsType:{name:"boolean"},description:""},setOpen:{required:!0,tsType:{name:"Dispatch",elements:[{name:"boolean"}],raw:"Dispatch<boolean>"},description:""},isOpenRef:{required:!1,tsType:{name:"MutableRefObject",elements:[{name:"boolean"}],raw:"MutableRefObject<boolean>"},description:""},withLabel:{required:!1,tsType:{name:"boolean"},description:""},copyButtons:{required:!1,tsType:{name:"boolean"},description:""},onPickImageUrl:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: { imageThumbnailUrl: string, imageUrl: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ imageThumbnailUrl: string, imageUrl: string }",signature:{properties:[{key:"imageThumbnailUrl",value:{name:"string",required:!0}},{key:"imageUrl",value:{name:"string",required:!0}}]}},name:"props"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: UploadImageButtonChildrenProps) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ open: boolean, setOpen: Dispatch<boolean>, withLabel: boolean }",signature:{properties:[{key:"open",value:{name:"boolean",required:!0}},{key:"setOpen",value:{name:"Dispatch",elements:[{name:"boolean"}],raw:"Dispatch<boolean>",required:!0}},{key:"withLabel",value:{name:"boolean",required:!0}}]}},name:"props"}],return:{name:"ReactNode"}}},description:""}}}},"./src/components/organisms/mdMath/MdFloatToolbar/MdFloatToolbar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>MdFloatToolbar});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/atoms/index.tsx"),_molecules__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/molecules/index.tsx"),_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/server/index.ts");const MdFloatToolbar=_ref=>{let{source,edit,onEdit,download}=_ref;const actionButtons=[];return edit&&onEdit&&actionButtons.push({icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_server__WEBPACK_IMPORTED_MODULE_4__.qUP,null),buttons:[{icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_server__WEBPACK_IMPORTED_MODULE_4__.qUP,null),label:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,null,"edit"),onClick:onEdit}]}),download&&actionButtons.push({icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_server__WEBPACK_IMPORTED_MODULE_4__.s3U,null),buttons:[{icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_server__WEBPACK_IMPORTED_MODULE_4__.PHA,null),label:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,null,"md"),onClick:()=>(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.IZ)(new Blob([source],{type:"text/plain"}),"file.md")}]}),actionButtons.length?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_molecules__WEBPACK_IMPORTED_MODULE_3__.GK,{actionButtons,placement:"rightTop"}):null};MdFloatToolbar.__docgenInfo={description:"",methods:[],displayName:"MdFloatToolbar",props:{source:{required:!0,tsType:{name:"string"},description:""},edit:{required:!1,tsType:{name:"boolean"},description:""},onEdit:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},download:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/components/organisms/mdMath/MdMathEditor.deprecated.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>MdMathEditorDeprecated});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_resize_detector__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-resize-detector/build/useResizeDetector.js"),_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/constants/index.ts"),_helpers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/helpers/index.ts"),_hooks_useJukiNotification__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/hooks/useJukiNotification.tsx"),_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/types/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/atoms/index.tsx"),_molecules__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/molecules/index.tsx"),_server__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/server/index.ts"),_ImageUploader_UploadImageButton__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/organisms/ImageUploader/UploadImageButton.tsx"),_constants__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/components/organisms/mdMath/constants.ts"),_MdFloatToolbar_MdFloatToolbar__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/components/organisms/mdMath/MdFloatToolbar/MdFloatToolbar.tsx"),_MdMathViewer__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/components/organisms/mdMath/MdMathViewer.tsx"),_viewer_MemoMdMathViewer__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/components/organisms/mdMath/viewer/MemoMdMathViewer.tsx");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const InformationButton=_ref=>{let{open,setOpen,isOpenRef,withLabel}=_ref;const[source,setSource]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_constants__WEBPACK_IMPORTED_MODULE_11__.$);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>setSource(_constants__WEBPACK_IMPORTED_MODULE_11__.$),[open]),isOpenRef&&(isOpenRef.current=open),react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.$n,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":withLabel?"":"information","data-tooltip-t-class-name":"ws-np tt-se",size:"small",className:"bc-we",type:"void",icon:react__WEBPACK_IMPORTED_MODULE_1__.createElement(_server__WEBPACK_IMPORTED_MODULE_9__.xK3,{circle:!0}),onClick:()=>setOpen(!0)},withLabel&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.T,{className:"tt-se"},"information")),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.aF,{isOpen:open,onClose:()=>setOpen(!1),className:"modal-info-markdown"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(MdMathEditorDeprecated,{initialMd:source,onChange:setSource})))};var View=function(View){return View.ONLY_EDITOR="ONLY_EDITOR",View.EDITOR_VIEWER_HORIZONTAL="EDITOR_VIEWER_HORIZONTAL",View.EDITOR_VIEWER_VERTICAL="EDITOR_VIEWER_VERTICAL",View.ONLY_VIEWER="ONLY_VIEWER",View}(View||{});const MdMathEditorDeprecated=props=>{const{initialMd:source,onChange,informationButton=!1,uploadImageButton=!1,downloadButton=!1,initEditMode=!1}=props,[view,setView]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(View.EDITOR_VIEWER_HORIZONTAL),textareaRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),[mdSource,setMdSource]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(source),[editing,setEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initEditMode),[loader,setLoader]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.nW6.NONE),layoutEditorRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),{addNotification}=(0,_hooks_useJukiNotification__WEBPACK_IMPORTED_MODULE_5__.E)(),[openUploadModal,setOpenUploadModal]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[openInfoModal,setOpenInfoModal]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),changeSource=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newText,editing,view)=>{const fun=()=>{!editing||view!==View.ONLY_EDITOR&&view!==View.EDITOR_VIEWER_VERTICAL&&view!==View.EDITOR_VIEWER_HORIZONTAL||(textareaRef.current?textareaRef.current.value=newText:setTimeout(fun,200))};fun(),setMdSource(newText)},[]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{changeSource(source,editing,view)},[changeSource,editing,source,view]);const{width=0}=(0,react_resize_detector__WEBPACK_IMPORTED_MODULE_2__.A)(function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({targetRef:layoutEditorRef},_constants__WEBPACK_IMPORTED_MODULE_3__.fV)),withLabels=width>600;return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{const handleClickOutside=event=>{!layoutEditorRef.current||layoutEditorRef.current.contains(event.target)||openUploadModal||openInfoModal||setTimeout(()=>{setEditing(!1)},0)};return"undefined"!=typeof document&&document.addEventListener("mousedown",handleClickOutside),()=>{"undefined"!=typeof document&&document.removeEventListener("mousedown",handleClickOutside)}},[openInfoModal,openUploadModal]),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{ref:layoutEditorRef,className:(0,_helpers__WEBPACK_IMPORTED_MODULE_4__.xW)("jk-md-math-editor-layout jk-border-radius-inline",{editing})},editing?react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"content-bar-options jk-row space-between jk-br-ie jk-pg-xsm sticky-top bc-we"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_4__.xW)("jk-row gap left",{gap:!withLabels})},informationButton&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(InformationButton,{open:openInfoModal,setOpen:setOpenInfoModal,withLabel:withLabels}),uploadImageButton&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(_ImageUploader_UploadImageButton__WEBPACK_IMPORTED_MODULE_10__.UploadImageButton,{open:openUploadModal,setOpen:setOpenUploadModal,withLabel:withLabels,copyButtons:!0}),view===View.ONLY_EDITOR&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.$n,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":withLabels?"":"editor | preview","data-tooltip-t-class-name":"ws-np",type:"void",size:"small",className:"bc-we",onClick:()=>setView(View.EDITOR_VIEWER_HORIZONTAL)},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"jk-row"},withLabels&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.T,null,"editor")," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(_server__WEBPACK_IMPORTED_MODULE_9__.qUP,null),"  | ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(_server__WEBPACK_IMPORTED_MODULE_9__.cyn,null)," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.T,null,"preview")))),view===View.EDITOR_VIEWER_HORIZONTAL&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.$n,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":withLabels?"":"preview","data-tooltip-t-class-name":"ws-np",type:"void",size:"small",className:"bc-we",icon:react__WEBPACK_IMPORTED_MODULE_1__.createElement(_server__WEBPACK_IMPORTED_MODULE_9__.cyn,null),onClick:()=>setView(View.ONLY_VIEWER)},withLabels&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.T,null,"preview")),view===View.ONLY_VIEWER&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.$n,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":withLabels?"":"editor","data-tooltip-t-class-name":"ws-np",type:"void",size:"small",className:"bc-we",icon:react__WEBPACK_IMPORTED_MODULE_1__.createElement(_server__WEBPACK_IMPORTED_MODULE_9__.qUP,null),onClick:()=>setView(View.ONLY_EDITOR)},withLabels&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.T,null,"editor"))),react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.$n,{icon:react__WEBPACK_IMPORTED_MODULE_1__.createElement(_server__WEBPACK_IMPORTED_MODULE_9__.USm,null),type:"void",size:"small",className:"bc-we",onClick:()=>setEditing(!1)})),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_4__.xW)("content-editor-preview",{"editor-top-preview-bottom":view===View.EDITOR_VIEWER_VERTICAL})},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_molecules__WEBPACK_IMPORTED_MODULE_8__.vh,{onlyFirstPane:view===View.ONLY_EDITOR,onlySecondPane:view===View.ONLY_VIEWER},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"editor",onPaste:uploadImageButton?async event=>{var _event$clipboardData;const items=null===(_event$clipboardData=event.clipboardData)||void 0===_event$clipboardData?void 0:_event$clipboardData.items;if(items){const imageFiles=[];for(const item of items)if("file"===item.kind){const file=item.getAsFile();file&&file.type.startsWith("image/")&&imageFiles.push(file)}if(imageFiles.length>0){event.stopPropagation(),event.preventDefault();let extraText="";setLoader(_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.nW6.LOADING);for(const imageFile of imageFiles){const{status,message,content}=await(0,_helpers__WEBPACK_IMPORTED_MODULE_4__.XO)(imageFile,!1);status===_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.nW6.SUCCESS?(addNotification({type:_types__WEBPACK_IMPORTED_MODULE_6__.NotificationType.SUCCESS,message:react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.T,null,message)}),extraText+=(extraText?"\n\n":"")+"![image alt](".concat(content.imageUrl,")")):addNotification({type:_types__WEBPACK_IMPORTED_MODULE_6__.NotificationType.ERROR,message:react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.T,null,message)})}setLoader(_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.nW6.NONE),(insertText=>{var _textareaRef$current$,_textareaRef$current;const textarea=textareaRef.current;if(!textarea)return;const start=textarea.selectionStart,end=textarea.selectionEnd,text=null!==(_textareaRef$current$=null===(_textareaRef$current=textareaRef.current)||void 0===_textareaRef$current?void 0:_textareaRef$current.value)&&void 0!==_textareaRef$current$?_textareaRef$current$:"",newText=text.substring(0,start)+insertText+text.substring(end);changeSource(newText,editing,view),null==onChange||onChange(newText),setTimeout(()=>{textarea.selectionStart=textarea.selectionEnd=start+insertText.length},0)})(extraText)}}}:void 0},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.fs,{ref:textareaRef,onChange:value=>{null==onChange||onChange(value),setMdSource(value)}})),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"preview"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_viewer_MemoMdMathViewer__WEBPACK_IMPORTED_MODULE_14__.O,{className:"jk-br-ie br-hl jk-pg-xsm",source:mdSource}))))):react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"content-preview"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_MdFloatToolbar_MdFloatToolbar__WEBPACK_IMPORTED_MODULE_12__.z,{source:mdSource,edit:!0,onEdit:()=>setEditing(!0),download:downloadButton}),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"preview",onDoubleClick:()=>{setEditing(!0),setView(View.EDITOR_VIEWER_HORIZONTAL)}},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_MdMathViewer__WEBPACK_IMPORTED_MODULE_13__.MdMathViewer,{className:"jk-br-ie br-hl jk-pg-xsm",source:mdSource}))),loader===_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.nW6.LOADING&&react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"jk-loader-layer pn-ae"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"jk-loader-layer pn-ae jk-overlay-backdrop",style:{opacity:.8}}),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"jk-row",style:{zIndex:1}},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"jk-row bc-we jk-pg-sm jk-br-ie",style:{alignItems:"baseline"}},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_7__.T,{className:"tt-se"},"uploading images"),"  ",react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"dot-flashing"})))))};MdMathEditorDeprecated.__docgenInfo={description:"",methods:[],displayName:"MdMathEditorDeprecated",props:{initialMd:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},informationButton:{required:!1,tsType:{name:"boolean"},description:""},uploadImageButton:{required:!1,tsType:{name:"boolean"},description:""},downloadButton:{required:!1,tsType:{name:"boolean"},description:""},initEditMode:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/components/organisms/mdMath/MdMathEditorDeprecated.stories.tsx":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(module,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Regular:()=>Regular,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_atoms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/atoms/index.tsx"),_mockup__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/mockup/index.ts"),_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/organisms/mdMath/constants.ts"),_MdMathEditor_deprecated__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/organisms/mdMath/MdMathEditor.deprecated.tsx"),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([_mockup__WEBPACK_IMPORTED_MODULE_2__]),__webpack_async_dependencies_result__=__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__;function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}_mockup__WEBPACK_IMPORTED_MODULE_2__=__webpack_async_dependencies_result__[0];const __WEBPACK_DEFAULT_EXPORT__={component:_MdMathEditor_deprecated__WEBPACK_IMPORTED_MODULE_4__.k,argTypes:{uploadImageButton:{control:{type:"boolean"}},informationButton:{control:{type:"boolean"}},downloadButton:{control:{type:"boolean"}}}},Cmp=_ref=>{let{props}=_ref;const[text,setText]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(_constants__WEBPACK_IMPORTED_MODULE_3__.$);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mockup__WEBPACK_IMPORTED_MODULE_2__.Ag,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{height:"100%",overflow:"auto"},className:"jk-pg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_MdMathEditor_deprecated__WEBPACK_IMPORTED_MODULE_4__.k,_extends({},props,{initialMd:text,onChange:value=>setText(value)})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,text),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_1__.$n,{onClick:()=>setText(_constants__WEBPACK_IMPORTED_MODULE_3__.$)},"clear")))},Regular={render:args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Cmp,{props:args})},__namedExportsOrder=["Regular"];Regular.parameters={...Regular.parameters,docs:{...Regular.parameters?.docs,source:{originalSource:"{\n  render: args => <Cmp props={args} />\n}",...Regular.parameters?.docs?.source}}},__webpack_async_result__()}catch(e){__webpack_async_result__(e)}})},"./src/components/organisms/mdMath/MdMathViewer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MdMathViewer:()=>MdMathViewer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/index.ts"),_MdFloatToolbar_MdFloatToolbar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/organisms/mdMath/MdFloatToolbar/MdFloatToolbar.tsx"),_viewer_MdMath__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/organisms/mdMath/viewer/MdMath.tsx");const MdMathViewer=_ref=>{let{source,downloadButton,className,blur,unBlur,style,slideView}=_ref;return slideView?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_viewer_MdMath__WEBPACK_IMPORTED_MODULE_3__.s,{source,blur,unBlur,slideView}):react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.xW)("jk-md-math-viewer-layout",className),style},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_MdFloatToolbar_MdFloatToolbar__WEBPACK_IMPORTED_MODULE_2__.z,{source,download:downloadButton}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_viewer_MdMath__WEBPACK_IMPORTED_MODULE_3__.s,{source,blur,unBlur,slideView}))};MdMathViewer.__docgenInfo={description:"",methods:[],displayName:"MdMathViewer",props:{source:{required:!0,tsType:{name:"string"},description:""},dark:{required:!1,tsType:{name:"boolean"},description:""},downloadButton:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""},blur:{required:!1,tsType:{name:"boolean"},description:""},unBlur:{required:!1,tsType:{name:"boolean"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},slideView:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/components/organisms/mdMath/viewer/MemoMdMathViewer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>MemoMdMathViewer});var react=__webpack_require__("./node_modules/react/index.js"),helpers=__webpack_require__("./src/helpers/index.ts"),MdFloatToolbar=__webpack_require__("./src/components/organisms/mdMath/MdFloatToolbar/MdFloatToolbar.tsx"),MdMath=__webpack_require__("./src/components/organisms/mdMath/viewer/MdMath.tsx");const MemoMdMath=(0,react.memo)(_ref=>{let{source}=_ref;return function splitMarkdownIntoChunks(md){const lines=md.split("\n"),chunks=[];let buffer=[],inCodeBlock=!1,inTable=!1;const isCodeFence=line=>{const trimmed=line.trim();return trimmed.startsWith("```")||trimmed.endsWith("```")},isTableLine=line=>line.includes("|")&&!line.trim().startsWith("-")&&!line.trim().startsWith(">"),isSeparator=line=>{const trimmed=line.trim();return/^-{3,}$/.test(trimmed)};for(let i=0;i<lines.length;i++){var _lines;const line=lines[i];isCodeFence(line)&&(inCodeBlock=!inCodeBlock),isTableLine(line)&&!inCodeBlock?inTable=!0:""!==line.trim()||inCodeBlock||(inTable=!1);const nextLine=null!==(_lines=lines[i+1])&&void 0!==_lines?_lines:"",isBlankLine=""===line.trim(),isNextBlankLine=""===nextLine.trim();inCodeBlock||inTable||!(isSeparator(line)||isBlankLine&&isNextBlankLine)?buffer.push(line):(buffer.length>0&&(chunks.push(buffer.join("\n").trim()),buffer=[]),i++)}return buffer.length>0&&chunks.push(buffer.join("\n").trim()),chunks}(source).map((chunk,index)=>react.createElement(MdMath.s,{key:chunk+index,source:chunk}))}),MemoMdMathViewer=_ref=>{let{source,downloadButton,className,style}=_ref;return react.createElement("div",{className:(0,helpers.xW)("jk-md-math-viewer-layout",className),style},react.createElement(MdFloatToolbar.z,{source,download:downloadButton}),react.createElement(MemoMdMath,{source}))};MemoMdMathViewer.__docgenInfo={description:"",methods:[],displayName:"MemoMdMathViewer",props:{source:{required:!0,tsType:{name:"string"},description:""},dark:{required:!1,tsType:{name:"boolean"},description:""},downloadButton:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""},blur:{required:!1,tsType:{name:"boolean"},description:""},unBlur:{required:!1,tsType:{name:"boolean"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},slideView:{required:!1,tsType:{name:"boolean"},description:""}}}}}]);