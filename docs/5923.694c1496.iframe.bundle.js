"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[5923,8596,7080],{"./src/components/templates/Submission/SubmitView.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmitView:()=>SubmitView});var react=__webpack_require__("./node_modules/react/index.js"),config=__webpack_require__("./src/config/index.tsx"),atoms=__webpack_require__("./src/components/atoms/index.ts"),molecules=__webpack_require__("./src/components/molecules/index.ts"),esm=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),submission=__webpack_require__("./src/helpers/submission.ts"),diff2html=__webpack_require__("./node_modules/diff2html/lib-esm/diff2html.js"),types=__webpack_require__("./node_modules/diff2html/lib/types.js"),helpers=__webpack_require__("./src/helpers/index.ts"),hooks=__webpack_require__("./src/hooks/index.ts"),SubmissionMemory=__webpack_require__("./src/components/templates/Submission/SubmissionMemory.tsx"),SubmissionTime=__webpack_require__("./src/components/templates/Submission/SubmissionTime.tsx"),SubmissionVerdict=__webpack_require__("./src/components/templates/Submission/SubmissionVerdict.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DiffViewButton=_ref=>{let{diffInput,croppedDiff}=_ref;const[isOpen,setIsOpen]=(0,react.useState)(!1),[diff,setDiff]=(0,react.useState)(""),{user:{settings:{[esm.mZ.THEME]:userTheme}}}=(0,hooks.Mg)();(0,react.useEffect)((()=>{const diffHtml=diff2html.qy(diffInput,{drawFileList:!1,matching:"words",renderNothingWhenEmpty:!1,colorScheme:userTheme===esm.Sx.DARK?types.d7.DARK:types.d7.LIGHT,outputFormat:"side-by-side"});setDiff(diffHtml)}),[diffInput,userTheme]);const left=diffInput.length-diffInput.indexOf("No newline at end of file")>26;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.$nd,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"view diff",icon:(0,jsx_runtime.jsx)(atoms.ITR,{}),size:"tiny",type:"light",onClick:()=>setIsOpen(!0)}),(0,jsx_runtime.jsx)(atoms.aFV,{isOpen,onClose:()=>setIsOpen(!1),closeWhenKeyEscape:!0,closeWhenClickOutside:!0,closeIcon:!0,children:(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch gap jk-pg-lg diff-body-modal",children:[(0,jsx_runtime.jsx)("div",{children:croppedDiff&&(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se cr-er fw-bd",children:"only the first 1000 characters of the difference are being displayed"})}),(0,jsx_runtime.jsx)("div",{dangerouslySetInnerHTML:{__html:diff}}),diffInput.includes("No newline at end of file")&&(0,jsx_runtime.jsxs)("div",{className:"jk-row block center",children:[(0,jsx_runtime.jsx)("div",{className:"appearance-error",children:left&&(0,jsx_runtime.jsx)(atoms.T,{children:"no newline at end of file"})}),(0,jsx_runtime.jsx)("div",{className:"appearance-error",children:!left&&(0,jsx_runtime.jsx)(atoms.T,{children:"no newline at end of file"})})]})]})})]})},SubmissionGroupInfo=props=>{const{groupKey,problemScoringMode,timeUsed,memoryUsed,verdict,points,testCases,submitId,isProblemEditor}=props,{viewPortSize}=(0,hooks.p1)(),rowHeight="sm"===viewPortSize?70:40,testCasesString=JSON.stringify(testCases),renderRow=(0,react.useCallback)((index=>{const testCase=JSON.parse(testCasesString)[index];return(0,jsx_runtime.jsxs)("div",{className:"jk-row extend block gap jk-table-inline-row",style:{borderBottom:"1px solid var(--t-color-gray-5)"},children:[isProblemEditor?(0,jsx_runtime.jsx)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":testCase.testCaseKey,"data-tooltip-t-class-name":"ws-np",className:"jk-row",style:{flex:.4},children:index+1}):(0,jsx_runtime.jsx)("div",{className:"jk-row",style:{flex:.4},children:index+1}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap center",children:[(0,jsx_runtime.jsx)(SubmissionVerdict.y,{verdict:testCase.verdict,submitId}),testCase.diff&&(0,jsx_runtime.jsx)(DiffViewButton,{croppedDiff:testCase.croppedDiff,diffInput:testCase.diff.replaceAll(testCase.testCaseKey+".judge.out","A").replaceAll(testCase.testCaseKey+".out","B")})]}),problemScoringMode===esm.ME.PARTIAL&&(0,jsx_runtime.jsx)("div",{className:"jk-row",children:testCase.points}),(0,jsx_runtime.jsx)("div",{className:"jk-row center ws-np nowrap",children:(0,jsx_runtime.jsx)(SubmissionTime.u,{verdict:testCase.verdict,timeUsed:testCase.timeUsed})}),(0,jsx_runtime.jsx)("div",{className:"jk-row center ws-np nowrap",children:(0,jsx_runtime.jsx)(SubmissionMemory.m,{verdict:testCase.verdict,memoryUsed:testCase.memoryUsed})}),(0,jsx_runtime.jsx)("div",{className:(0,helpers.xW)("jk-row center gap",{"cr-er fw-bd":0!==(null==testCase?void 0:testCase.exitCode)}),children:testCase.exitCode})]},index)}),[isProblemEditor,problemScoringMode,submitId,testCasesString]);return(0,jsx_runtime.jsx)(molecules.SD,{header:_ref2=>{let{isOpen,toggle}=_ref2;return(0,jsx_runtime.jsxs)("div",{className:(0,helpers.xW)("jk-row extend block gap jk-table-inline-row jk-pg-md group-info",{"fw-br":isOpen}),children:[(0,jsx_runtime.jsxs)("div",{className:"jk-row left nowrap",children:[!!testCases.length&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.Hd_,{onClick:toggle,rotate:isOpen?0:180,className:"link"})," "]}),+groupKey?problemScoringMode===esm.ME.SUBTASK?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se ws-np",children:"subtask"})," ",groupKey]}):problemScoringMode===esm.ME.PARTIAL?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se ws-np",children:"group"})," ",groupKey]}):(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"test cases"}):(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"sample cases"})]}),(0,jsx_runtime.jsx)("div",{className:"jk-row center gap nowrap",style:{flex:3},children:(0,jsx_runtime.jsx)(SubmissionVerdict.y,{verdict,points,submitId})}),(problemScoringMode===esm.ME.SUBTASK||problemScoringMode===esm.ME.PARTIAL)&&(0,jsx_runtime.jsx)("div",{className:"jk-row",children:+points.toFixed(4)}),(0,jsx_runtime.jsx)("div",{className:"jk-row center gap",children:(0,jsx_runtime.jsx)(SubmissionTime.u,{timeUsed,verdict})}),(0,jsx_runtime.jsx)("div",{className:"jk-row center gap",children:(0,jsx_runtime.jsx)(SubmissionMemory.m,{verdict,memoryUsed})})]})},className:"jk-row extend",children:(0,jsx_runtime.jsxs)("div",{className:(0,helpers.xW)("jk-row extend group-info-details"),children:[(0,jsx_runtime.jsxs)("div",{className:(0,helpers.xW)("jk-row extend block gap jk-table-inline-row fw-bd"),children:[(0,jsx_runtime.jsx)("div",{className:"jk-row",style:{flex:.4},children:(0,jsx_runtime.jsx)(atoms.T,{children:"#"})}),(0,jsx_runtime.jsx)("div",{className:"jk-row center gap",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"verdict"})}),problemScoringMode===esm.ME.PARTIAL&&(0,jsx_runtime.jsx)("div",{className:"jk-row center gap",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"points"})}),(0,jsx_runtime.jsx)("div",{className:"jk-row center gap",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"time"})}),(0,jsx_runtime.jsx)("div",{className:"jk-row center gap",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"memory"})}),(0,jsx_runtime.jsx)("div",{className:"jk-row center gap",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"exit code"})})]}),(0,jsx_runtime.jsx)("div",{style:{width:"100%",height:rowHeight*Math.min(testCases.length,3)+1},className:(0,helpers.xW)({"top-bottom-inset-shadow":testCases.length>3}),children:(0,jsx_runtime.jsx)(atoms.$0g,{size:testCases.length,rowHeight,renderRow})})]})})};try{SubmissionGroupInfo.displayName="SubmissionGroupInfo",SubmissionGroupInfo.__docgenInfo={description:"",displayName:"SubmissionGroupInfo",props:{isProblemEditor:{defaultValue:null,description:"",name:"isProblemEditor",required:!0,type:{name:"boolean"}},groupKey:{defaultValue:null,description:"",name:"groupKey",required:!0,type:{name:"number"}},problemScoringMode:{defaultValue:null,description:"",name:"problemScoringMode",required:!0,type:{name:"enum",value:[{value:'"SUBTASK"'},{value:'"TOTAL"'},{value:'"PARTIAL"'}]}},timeUsed:{defaultValue:null,description:"",name:"timeUsed",required:!0,type:{name:"number"}},memoryUsed:{defaultValue:null,description:"",name:"memoryUsed",required:!0,type:{name:"number"}},verdict:{defaultValue:null,description:"",name:"verdict",required:!0,type:{name:"enum",value:[{value:'"NONE"'},{value:'"PENDING"'},{value:'"HIDDEN"'},{value:'"CE"'},{value:'"RE"'},{value:'"TLE"'},{value:'"MLE"'},{value:'"WA"'},{value:'"PE"'},{value:'"PA"'},{value:'"AC"'}]}},points:{defaultValue:null,description:"",name:"points",required:!0,type:{name:"number"}},testCases:{defaultValue:null,description:"",name:"testCases",required:!0,type:{name:"TestCaseResultType[]"}},submitId:{defaultValue:null,description:"",name:"submitId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/templates/Submission/SubmissionGroupInfo.tsx#SubmissionGroupInfo"]={docgenInfo:SubmissionGroupInfo.__docgenInfo,name:"SubmissionGroupInfo",path:"src/components/templates/Submission/SubmissionGroupInfo.tsx#SubmissionGroupInfo"})}catch(__react_docgen_typescript_loader_error){}var SubmissionListenerVerdict=__webpack_require__("./src/components/templates/Submission/SubmissionListenerVerdict.tsx");const SubmitViewContent=_ref=>{let{submit}=_ref;const{submitId,problem:{isEditor:isProblemEditor,scoringMode:problemScoringMode},user:{canViewSourceCode},language,sourceCode,memoryUsed,timeUsed,verdict,points,status,timestamp,testCaseResults,verdictByGroups,compilationResult,judgmentTime}=submit,date=new Date(timestamp),testCasesByGroup={};(testCaseResults||[]).forEach((testCase=>{const group=testCase.group?problemScoringMode===esm.ME.SUBTASK?testCase.group:1:0;testCasesByGroup[group]?testCasesByGroup[group].push(testCase):testCasesByGroup[group]=[testCase]}));const compilationFailed=verdict!==esm.np.NONE&&verdict!==esm.np.PENDING&&!1===(null==compilationResult?void 0:compilationResult.success);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(molecules.SD,{header:_ref2=>{var _PROGRAMMING_LANGUAGE;let{isOpen,toggle}=_ref2;return(0,jsx_runtime.jsxs)("div",{className:"jk-row-col gap",children:[(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsx)("div",{style:{height:48},className:"jk-row",children:(null===(_PROGRAMMING_LANGUAGE=esm.tc[language])||void 0===_PROGRAMMING_LANGUAGE?void 0:_PROGRAMMING_LANGUAGE.label)||language}),(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"language"})]}),(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsxs)("div",{className:"jk-row gap center",style:{height:48},children:[(0,jsx_runtime.jsx)(SubmissionListenerVerdict.g,{verdict,points,status,submitId}),compilationFailed&&(0,jsx_runtime.jsx)(atoms.Hd_,{onClick:toggle,rotate:isOpen?0:180,className:"link"})]}),(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"verdict"})]}),(0,submission.J)(verdict)&&(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsx)("div",{className:"jk-row",style:{height:48},children:(0,jsx_runtime.jsx)(SubmissionTime.u,{timeUsed,verdict})}),(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"time used"})]}),(0,submission.J)(verdict)&&(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsx)("div",{className:"jk-row",style:{height:48},children:(0,jsx_runtime.jsx)(SubmissionMemory.m,{memoryUsed,verdict})}),(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"memory used"})]}),(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsx)(atoms.cLw,{date,twoLines:!0,style:{height:48}}),(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:"date"})]}),isProblemEditor&&(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsxs)("div",{className:"jk-row",style:{height:48},children:["~ ",judgmentTime>0?(0,jsx_runtime.jsx)(molecules.M4,{currentTimestamp:judgmentTime,interval:0,literal:!0,laps:1}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(molecules.M4,{currentTimestamp:Date.now()- -judgmentTime,interval:1e3,literal:!0,laps:1})})]}),(0,jsx_runtime.jsx)(atoms.T,{className:"fw-bd tt-se",children:judgmentTime>0?"judgment time":"judging"})]})]})},startsShowing:compilationFailed,children:(0,jsx_runtime.jsx)("div",{className:"submission-stderr-content jk-text-stderr",children:null==compilationResult?void 0:compilationResult.err})}),(verdictByGroups&&!!Object.keys(verdictByGroups).length||testCasesByGroup&&!!Object.keys(testCasesByGroup).length)&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"tx-l fw-bd cr-pd",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:problemScoringMode===esm.ME.SUBTASK?"information by subtasks":problemScoringMode===esm.ME.PARTIAL?"information by groups":"sample and test case information"})}),(0,jsx_runtime.jsx)("div",{className:"jk-col gap",children:(0,jsx_runtime.jsxs)("div",{className:"jk-row extend block gap jk-table-inline-header",children:[(0,jsx_runtime.jsx)("div",{className:"jk-row",children:(0,jsx_runtime.jsx)(atoms.T,{children:problemScoringMode===esm.ME.SUBTASK?"groups":""})}),(0,jsx_runtime.jsx)("div",{className:"jk-row",style:{flex:3},children:(0,jsx_runtime.jsx)(atoms.T,{children:"verdict"})}),(problemScoringMode===esm.ME.SUBTASK||problemScoringMode===esm.ME.PARTIAL)&&(0,jsx_runtime.jsx)("div",{className:"jk-row",children:(0,jsx_runtime.jsx)(atoms.T,{children:"points"})}),(0,jsx_runtime.jsx)("div",{className:"jk-row",children:(0,jsx_runtime.jsx)(atoms.T,{children:"time"})}),(0,jsx_runtime.jsx)("div",{className:"jk-row",children:(0,jsx_runtime.jsx)(atoms.T,{children:"memory"})})]})}),verdictByGroups&&Object.keys(verdictByGroups).length?(0,jsx_runtime.jsx)("div",{className:"jk-col jk-border-radius-inline",children:Object.entries(verdictByGroups).map((_ref3=>{let[groupKey,result]=_ref3;return(0,jsx_runtime.jsx)(SubmissionGroupInfo,{groupKey:+groupKey,isProblemEditor,problemScoringMode,memoryUsed:result.memoryUsed,verdict:result.verdict,timeUsed:result.timeUsed,points:result.points,testCases:testCasesByGroup[result.group]||[],submitId},groupKey)}))}):(0,jsx_runtime.jsx)("div",{className:"jk-col jk-border-radius-inline",children:Object.entries(testCasesByGroup).map((_ref4=>{let[groupKey,result]=_ref4;return(0,jsx_runtime.jsx)(SubmissionGroupInfo,{groupKey:+groupKey,isProblemEditor,problemScoringMode,memoryUsed:0,verdict,timeUsed:0,points:problemScoringMode===esm.ME.PARTIAL?+result.reduce(((sum,testCase)=>sum+testCase.points),0).toFixed(3):0,testCases:result,submitId},groupKey)}))})]}),!!canViewSourceCode&&(0,jsx_runtime.jsxs)("div",{className:"jk-col gap stretch",children:[(0,jsx_runtime.jsx)("div",{className:"tx-l fw-bd cr-pd",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"source code"})}),(0,jsx_runtime.jsx)("div",{className:"submission-info-code-source",children:(0,jsx_runtime.jsx)(molecules.Cv,{code:sourceCode,language,lineNumbers:!0,withCopyButton:!0,withLanguageLabel:!0})})]})]})};try{SubmitViewContent.displayName="SubmitViewContent",SubmitViewContent.__docgenInfo={description:"",displayName:"SubmitViewContent",props:{submit:{defaultValue:null,description:"",name:"submit",required:!0,type:{name:"SubmissionDataResponseDTO"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/templates/Submission/SubmitViewContent.tsx#SubmitViewContent"]={docgenInfo:SubmitViewContent.__docgenInfo,name:"SubmitViewContent",path:"src/components/templates/Submission/SubmitViewContent.tsx#SubmitViewContent"})}catch(__react_docgen_typescript_loader_error){}const SubmitView=_ref=>{let{submitId,triggerFetch}=_ref;return(0,jsx_runtime.jsx)(molecules.pW,{url:config.J.API.submission.getData({params:{id:submitId}}).url,errorView:()=>(0,jsx_runtime.jsx)("div",{className:"jk-col extend jk-pg-md",children:(0,jsx_runtime.jsxs)("div",{className:"jk-col gap center",children:[(0,jsx_runtime.jsx)("div",{className:"image-404",children:(0,jsx_runtime.jsx)(atoms.CZe,{})}),(0,jsx_runtime.jsx)("h3",{children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-ue",children:"submission not found"})}),(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"the submission does not exist or you do not have permissions to view it"})})]})}),triggerFetch,children:_ref2=>{let{data,mutate}=_ref2;return(0,jsx_runtime.jsx)(SubmitViewContent,{submit:data.content})}})};try{SubmitView.displayName="SubmitView",SubmitView.__docgenInfo={description:"",displayName:"SubmitView",props:{submitId:{defaultValue:null,description:"",name:"submitId",required:!0,type:{name:"string"}},triggerFetch:{defaultValue:null,description:"",name:"triggerFetch",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/templates/Submission/SubmitView.tsx#SubmitView"]={docgenInfo:SubmitView.__docgenInfo,name:"SubmitView",path:"src/components/templates/Submission/SubmitView.tsx#SubmitView"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/templates/UserPreviewModal/UserPreviewModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UserPreviewModal:()=>UserPreviewModal});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),_config__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/config/index.tsx")),_hooks_useJukiUI__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/useJukiUI.tsx"),_atoms__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/atoms/index.ts"),_molecules__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/molecules/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const UserPreviewModal=_ref=>{let{isOpen,nickname,companyKey,onClose,userHref}=_ref;const{components:{Image}}=(0,_hooks_useJukiUI__WEBPACK_IMPORTED_MODULE_3__.p)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.aFV,{isOpen,onClose,className:"modal-user-preview wh-aoa",closeWhenClickOutside:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_5__.pW,{url:_config__WEBPACK_IMPORTED_MODULE_2__.J.API.user.getSummary({params:{nickname,companyKey}}).url,onError:error=>onClose((()=>()=>_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.nW.ERROR),_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.nW.ERROR,{fetcherLayerErrorEvent:error}),children:_ref2=>{var _data$content,_data$content2,_data$content3,_data$content4,_data$content5,_data$content6,_data$content6$city,_data$content7,_data$content7$countr,_data$content8,_data$content9,_data$content10,_data$content11,_data$content11$insti,_data$content12,_data$content13;let{data}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-pg-md jk-col stretch gap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row center gap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(Image,{src:null==data||null===(_data$content=data.content)||void 0===_data$content?void 0:_data$content.imageUrl,className:"jk-user-profile-img elevation-1",alt:nickname,height:100,width:100}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-col stretch",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-col stretch",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row left gap nowrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("h3",{className:"fl-tt-il",children:null==data||null===(_data$content2=data.content)||void 0===_data$content2?void 0:_data$content2.nickname}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.$rC,{text:null==data||null===(_data$content3=data.content)||void 0===_data$content3?void 0:_data$content3.nickname,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"jk-button light only-icon small",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.c8I,{})})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"cr-g3",children:[null==data||null===(_data$content4=data.content)||void 0===_data$content4?void 0:_data$content4.givenName," ",null==data||null===(_data$content5=data.content)||void 0===_data$content5?void 0:_data$content5.familyName]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-col gap stretch",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"jk-divider tiny"}),((null==data||null===(_data$content6=data.content)||void 0===_data$content6||null===(_data$content6$city=_data$content6.city)||void 0===_data$content6$city?void 0:_data$content6$city.trim())||(null==data||null===(_data$content7=data.content)||void 0===_data$content7||null===(_data$content7$countr=_data$content7.country)||void 0===_data$content7$countr?void 0:_data$content7$countr.trim()))&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row left gap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.Sfg,{}),null==data||null===(_data$content8=data.content)||void 0===_data$content8?void 0:_data$content8.city,(null==data||null===(_data$content9=data.content)||void 0===_data$content9?void 0:_data$content9.city)&&","," ",null==data||null===(_data$content10=data.content)||void 0===_data$content10?void 0:_data$content10.country]}),(null==data||null===(_data$content11=data.content)||void 0===_data$content11||null===(_data$content11$insti=_data$content11.institution)||void 0===_data$content11$insti?void 0:_data$content11$insti.trim())&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row left gap nowrap wb-ba",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.wPO,{}),null==data||null===(_data$content12=data.content)||void 0===_data$content12?void 0:_data$content12.institution]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row left gap nowrap wb-ba",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.r4D,{}),null==data||null===(_data$content13=data.content)||void 0===_data$content13?void 0:_data$content13.email]})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row-col gap block stretch",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_5__.mT,{size:"small",type:"light",onClick:onClose,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.T,{children:"close"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("a",{href:userHref,target:"_blank",rel:"noreferrer",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.$nd,{size:"small",extend:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row nowrap gap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.T,{className:"ws-np",children:"see profile"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.PHA,{})]})})})]})]})}})})};try{UserPreviewModal.displayName="UserPreviewModal",UserPreviewModal.__docgenInfo={description:"",displayName:"UserPreviewModal",props:{nickname:{defaultValue:null,description:"",name:"nickname",required:!0,type:{name:"string"}},companyKey:{defaultValue:null,description:"",name:"companyKey",required:!1,type:{name:"string"}},userHref:{defaultValue:null,description:"",name:"userHref",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"ButtonLoaderOnClickType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/templates/UserPreviewModal/UserPreviewModal.tsx#UserPreviewModal"]={docgenInfo:UserPreviewModal.__docgenInfo,name:"UserPreviewModal",path:"src/components/templates/UserPreviewModal/UserPreviewModal.tsx#UserPreviewModal"})}catch(__react_docgen_typescript_loader_error){}},"./src/contexts/JukiProviders.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{JukiProviders:()=>JukiProviders});var esm=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),react=__webpack_require__("./node_modules/react/index.js"),DndProvider=__webpack_require__("./node_modules/react-dnd/dist/core/DndProvider.js"),dist=__webpack_require__("./node_modules/react-dnd-html5-backend/dist/index.js"),atoms=__webpack_require__("./src/components/atoms/index.ts"),molecules=__webpack_require__("./src/components/molecules/index.ts"),config=__webpack_require__("./src/config/index.tsx"),hooks=__webpack_require__("./src/hooks/index.ts"),types=__webpack_require__("./src/types/index.ts"),SubmitView=__webpack_require__("./src/components/templates/Submission/SubmitView.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const SubmissionModal=_ref=>{let{submitId}=_ref;const{components:{Link}}=(0,hooks.p1)(),{deleteSearchParams}=(0,hooks.uY)(),[triggerFetch,setTriggerFetch]=(0,react.useState)(0);return(0,jsx_runtime.jsx)(atoms.aFV,{isOpen:!0,onClose:()=>deleteSearchParams({name:types.rs.SUBMISSION}),closeIcon:!0,closeWhenClickOutside:!0,children:(0,jsx_runtime.jsxs)("section",{className:"jk-pg-md",children:[(0,jsx_runtime.jsxs)("div",{className:"fw-bd tx-l jk-row-col left gap",children:[(0,jsx_runtime.jsx)("h3",{children:(0,jsx_runtime.jsx)(atoms.T,{children:"submission"})}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap",children:[(0,jsx_runtime.jsx)(Link,{href:config.J.ROUTES.submissions().view({id:submitId}),target:"_blank",children:(0,jsx_runtime.jsx)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"open submission in new tab",className:"jk-button light only-icon small link",children:(0,jsx_runtime.jsx)(atoms.PHA,{})})}),(0,jsx_runtime.jsx)(atoms.$rC,{text:submitId,children:(0,jsx_runtime.jsx)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"copy id",className:"jk-button light only-icon small",children:(0,jsx_runtime.jsx)(atoms.c8I,{})})}),(0,jsx_runtime.jsx)(molecules.mT,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"reload",size:"small",icon:(0,jsx_runtime.jsx)(atoms.fNY,{}),onClick:async setLoaderStatus=>{setLoaderStatus(esm.nW.LOADING),setTriggerFetch(Date.now()),setLoaderStatus(esm.nW.SUCCESS)}})]})]}),(0,jsx_runtime.jsx)(SubmitView.SubmitView,{submitId,triggerFetch})]})})};try{SubmissionModal.displayName="SubmissionModal",SubmissionModal.__docgenInfo={description:"",displayName:"SubmissionModal",props:{submitId:{defaultValue:null,description:"",name:"submitId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/templates/Submission/Submission.tsx#SubmissionModal"]={docgenInfo:SubmissionModal.__docgenInfo,name:"SubmissionModal",path:"src/components/templates/Submission/Submission.tsx#SubmissionModal"})}catch(__react_docgen_typescript_loader_error){}var UserPreviewModal=__webpack_require__("./src/components/templates/UserPreviewModal/UserPreviewModal.tsx"),JukiLastPathProvider=__webpack_require__("./src/contexts/JukiLastPathProvider/index.ts"),JukiPageProvider=__webpack_require__("./src/contexts/JukiPageProvider/index.ts"),JukiRouterProvider=__webpack_require__("./src/contexts/JukiRouterProvider/index.ts"),components=__webpack_require__("./src/components/index.ts"),context=__webpack_require__("./src/contexts/JukiTasksProvider/context.ts");const JukiTasksProvider=_ref=>{let{children}=_ref;const{addErrorNotification,addSuccessNotification}=(0,hooks.Eq)(),[submissions,setSubmissions]=(0,react.useState)({}),[submissionsToCheck,setSubmissionsToCheck]=(0,react.useState)([]),{socket}=(0,hooks.Mg)(),onMessageRef=(0,react.useRef)({});(0,react.useEffect)((()=>{for(const{id,problem,contest}of submissionsToCheck){const submission=submissions[id],verdict=(null==submission?void 0:submission.verdict)||null,points=(null==submission?void 0:submission.points)||0,header=contest?(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(components.T,{className:"tt-se",children:"contest"}),": ",contest.name]}),(0,jsx_runtime.jsxs)("div",{children:["(",contest.problemIndex,") ",problem.name]})]}):(0,jsx_runtime.jsx)("div",{children:problem.name});null!==verdict&&verdict!==esm.np.PENDING&&(verdict===esm.np.AC?addSuccessNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,(0,jsx_runtime.jsx)(components.T,{className:"tt-ce",children:esm.K7[esm.np.AC].label})]})):verdict===esm.np.PA?addSuccessNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(components.T,{className:"tt-ce",children:esm.K7[esm.np.PA].label}),"&bnsp; (",points," ",(0,jsx_runtime.jsx)(components.T,{children:"pts."}),")"]})]})):Object.keys(esm.K7).includes(verdict)?addErrorNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,(0,jsx_runtime.jsx)(components.T,{className:"tt-ce",children:esm.K7[verdict].label})]})):addErrorNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,verdict]})),setSubmissionsToCheck((prevState=>prevState.filter((_ref2=>{let{id:pId}=_ref2;return pId!==id})))))}}),[submissionsToCheck,submissions,addSuccessNotification,addErrorNotification]);const unListenSubmission=(0,react.useCallback)((submissionId=>{socket.unsubscribe(esm.yg.SUBMISSION_RUN_STATUS,submissionId)}),[socket]),listenSubmission=(0,react.useCallback)(((submissionToCheck,withNotification)=>{withNotification&&setSubmissionsToCheck((prevState=>[...prevState,submissionToCheck])),socket.subscribe(esm.yg.SUBMISSION_RUN_STATUS,submissionToCheck.id),onMessageRef.current[submissionToCheck.id]||socket.onMessage(esm.yg.SUBMISSION_RUN_STATUS,submissionToCheck.id,(dataResponse=>{const data=dataResponse,submitId=null==data?void 0:data.id,nextStatus=data.status;setSubmissions((prevState=>{var _prevState$submitId;const submissionData=prevState[submitId],currentStatus=null===(_prevState$submitId=prevState[submitId])||void 0===_prevState$submitId?void 0:_prevState$submitId.status;return submissionData?data.messageTimestamp>submissionData.messageTimestamp?{...prevState,[submitId]:data}:[esm.ae.COMPILING,esm.ae.COMPILED,esm.ae.FAILED].includes(nextStatus)&&data.messageTimestamp>submissionData.messageTimestamp?{...prevState,[submitId]:data}:[esm.ae.FETCHING_TEST_CASES,esm.ae.RUNNING_SAMPLE_TEST_CASES,esm.ae.RUNNING_TEST_CASES,esm.ae.EXECUTED_TEST_CASE].includes(nextStatus)&&[esm.ae.COMPILING,esm.ae.COMPILED,esm.ae.FAILED,esm.ae.FETCHING_TEST_CASES,esm.ae.RUNNING_SAMPLE_TEST_CASES,esm.ae.RUNNING_TEST_CASES,esm.ae.EXECUTED_TEST_CASE].includes(currentStatus)&&data.messageTimestamp>submissionData.messageTimestamp?{...prevState,[submitId]:{...data}}:[esm.ae.GRADING,esm.ae.COMPLETED].includes(nextStatus)&&[esm.ae.RECEIVED,esm.ae.COMPILING,esm.ae.COMPILED,esm.ae.FAILED,esm.ae.FETCHING_TEST_CASES,esm.ae.RUNNING_SAMPLE_TEST_CASES,esm.ae.RUNNING_TEST_CASES,esm.ae.EXECUTED_TEST_CASE,esm.ae.GRADING].includes(currentStatus)?{...prevState,[submitId]:data}:prevState:{...prevState,[submitId]:data}}))}))}),[socket]);return(0,jsx_runtime.jsx)(context.s.Provider,{value:{unListenSubmission,listenSubmission,submissions},children})};try{JukiTasksProvider.displayName="JukiTasksProvider",JukiTasksProvider.__docgenInfo={description:"",displayName:"JukiTasksProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiTasksProvider/JukiTasksProvider.tsx#JukiTasksProvider"]={docgenInfo:JukiTasksProvider.__docgenInfo,name:"JukiTasksProvider",path:"src/contexts/JukiTasksProvider/JukiTasksProvider.tsx#JukiTasksProvider"})}catch(__react_docgen_typescript_loader_error){}var JukiTProvider_context=__webpack_require__("./src/contexts/JukiTProvider/context.ts");const JukiTProvider=_ref=>{let{i18n,children}=_ref;const[trigger,setTrigger]=(0,react.useState)(Date.now());(0,react.useEffect)((()=>{i18n.on("languageChanged",(()=>setTrigger(Date.now)))}),[i18n]),(0,react.useEffect)((()=>{(async()=>{try{const namespace="translation",[dataEN,dataES]=await Promise.all([fetch(config.J.API.locale.get({params:{locale:esm.TM.EN,namespace}}).url).then((res=>res.json())),fetch(config.J.API.locale.get({params:{locale:esm.TM.ES,namespace}}).url).then((res=>res.json()))]);i18n.addResourceBundle(esm.TM.EN,namespace,dataEN),i18n.addResourceBundle(esm.TM.ES,namespace,dataES),setTimeout((()=>setTrigger(Date.now())),200)}catch(error){(0,esm.yA)(error)}})()}),[i18n]);const value=(0,react.useMemo)((()=>({i18n})),[i18n,trigger]);return(0,jsx_runtime.jsx)(JukiTProvider_context.c.Provider,{value,children})};try{JukiTProvider.displayName="JukiTProvider",JukiTProvider.__docgenInfo={description:"",displayName:"JukiTProvider",props:{i18n:{defaultValue:null,description:"",name:"i18n",required:!0,type:{name:"i18n"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiTProvider/JukiTProvider.tsx#JukiTProvider"]={docgenInfo:JukiTProvider.__docgenInfo,name:"JukiTProvider",path:"src/contexts/JukiTProvider/JukiTProvider.tsx#JukiTProvider"})}catch(__react_docgen_typescript_loader_error){}var JukiUIProvider=__webpack_require__("./src/contexts/JukiUIProvider/index.ts"),JukiUserProvider=__webpack_require__("./src/contexts/JukiUserProvider/index.ts");const CommonModals=_ref=>{let{children}=_ref;const{searchParams,deleteSearchParams}=(0,hooks.uY)(),userPreviewQuery=searchParams.getAll(types.rs.USER_PREVIEW),[userPreviewNickname,userPreviewCompanyKey]=Array.isArray(userPreviewQuery)?userPreviewQuery:[userPreviewQuery],{socket}=(0,hooks.Mg)(),[_,setTimestamp]=(0,react.useState)(0),readyState=socket.getReadyState();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UserPreviewModal.UserPreviewModal,{isOpen:!!searchParams.get(types.rs.USER_PREVIEW),nickname:userPreviewNickname,companyKey:userPreviewCompanyKey,onClose:()=>deleteSearchParams({name:types.rs.USER_PREVIEW}),userHref:config.J.ROUTES.profiles().view({nickname:userPreviewNickname})}),searchParams.get(types.rs.SUBMISSION)&&(0,jsx_runtime.jsx)(SubmissionModal,{submitId:searchParams.get(types.rs.SUBMISSION)}),children,!(readyState===WebSocket.OPEN)&&(0,jsx_runtime.jsx)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"offline, try to reconnect","data-tooltip-t-class-name":"tt-se",style:{position:"fixed",left:"var(--pad-md)",bottom:"var(--pad-md",zIndex:1e6},children:(0,jsx_runtime.jsx)(molecules.mT,{className:"jk-row bc-er",style:{"--button-background-color":"var(--t-color-error)"},onClick:setLoader=>{setLoader(esm.nW.LOADING),socket.start(),setTimeout((()=>{setTimestamp(Date.now()),setLoader(esm.nW.NONE)}),1e3)},icon:(0,jsx_runtime.jsx)(atoms.IJR,{}),size:"small"})})]})},JukiProviders=props=>{const{children,serviceApiUrl,socketServiceUrl,serviceApiV2Url,tokenName,components,router,i18n,initialLastPath}=props,providers=(0,jsx_runtime.jsx)(JukiRouterProvider.k,{searchParams:router.searchParams,appendSearchParams:router.appendSearchParams,setSearchParams:router.setSearchParams,deleteSearchParams:router.deleteSearchParams,routeParams:router.routeParams,pushRoute:router.pushRoute,replaceRoute:router.replaceRoute,reloadRoute:router.reloadRoute,isLoadingRoute:router.isLoadingRoute,pathname:router.pathname,children:(0,jsx_runtime.jsx)(JukiPageProvider.o,{children:(0,jsx_runtime.jsx)(JukiUserProvider.I,{socketServiceUrl,serviceApiUrl,serviceApiV2Url,tokenName,children:(0,jsx_runtime.jsx)(JukiUIProvider.n,{components,children:(0,jsx_runtime.jsx)(JukiLastPathProvider.M,{initialLastPath,children:(0,jsx_runtime.jsx)(JukiTasksProvider,{children:(0,jsx_runtime.jsx)(DndProvider.Q,{backend:dist.t2,children:(0,jsx_runtime.jsx)(CommonModals,{children})})})})})})})});return i18n?(0,jsx_runtime.jsx)(JukiTProvider,{i18n,children:providers}):providers};try{JukiProviders.displayName="JukiProviders",JukiProviders.__docgenInfo={description:"",displayName:"JukiProviders",props:{components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"Partial<UIComponentsContextInterface>"}},serviceApiUrl:{defaultValue:null,description:"",name:"serviceApiUrl",required:!0,type:{name:"string"}},socketServiceUrl:{defaultValue:null,description:"",name:"socketServiceUrl",required:!0,type:{name:"string"}},serviceApiV2Url:{defaultValue:null,description:"",name:"serviceApiV2Url",required:!0,type:{name:"string"}},tokenName:{defaultValue:null,description:"",name:"tokenName",required:!0,type:{name:"string"}},i18n:{defaultValue:null,description:"",name:"i18n",required:!1,type:{name:"i18n"}},initialLastPath:{defaultValue:null,description:"",name:"initialLastPath",required:!0,type:{name:"LastPathType<T>"}},router:{defaultValue:null,description:"",name:"router",required:!0,type:{name:"{ searchParams: URLSearchParams; appendSearchParams: AppendSearchParamsType; setSearchParams: SetSearchParamsType; ... 6 more ...; isLoadingRoute?: boolean | undefined; } | { ...; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiProviders.tsx#JukiProviders"]={docgenInfo:JukiProviders.__docgenInfo,name:"JukiProviders",path:"src/contexts/JukiProviders.tsx#JukiProviders"})}catch(__react_docgen_typescript_loader_error){}}}]);