"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[7552,7707],{"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{XI:()=>action,qp:()=>configureActions});var external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("storybook/internal/preview-api"),external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_=__webpack_require__("storybook/internal/preview-errors"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},configureActions=(options={})=>{Object.assign(config,options)},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a},generateId=()=>"object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2);function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!window?.FEATURES?.disallowImplicitActionsInRenderV8,error=new external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_.ImplicitActionsDuringRendering({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id=generateId(),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler.implicit=options.implicit,handler}},"./src/components/molecules/SimpleSortableRows/SimpleSortableRows.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SimpleSortableRows:()=>SimpleSortableRows,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/index.ts"),_mockup__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/mockup/index.ts"),_SimpleSortableRows__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/molecules/SimpleSortableRows/SimpleSortableRows.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={component:_SimpleSortableRows__WEBPACK_IMPORTED_MODULE_4__.SimpleSortableRows,argTypes:{}};(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.qp)({depth:100,limit:20});const Component=_ref=>{let{value,dragComponent,dragComponentRef,isDragging,isPreview,index,isOver,rowKey,props}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"jk-row left gap bc-we",style:{opacity:isDragging&&!isPreview?0:1},ref:dragComponentRef,children:[index,dragComponent,value,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)({"bc-er":isDragging}),children:"isD"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)({"bc-er":isPreview}),children:"isP"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)({"bc-er":isOver}),children:"isO"}),rowKey,JSON.stringify(props)]})},SimpleSortableRows=()=>{const[rows,setRows]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([{key:"1",value:"111"},{key:"2",value:"222"},{key:"3",value:"333"},{key:"3.5",value:"444"},{key:"4",value:"555"},{key:"5",value:"666"},{key:"6",value:"777"},{key:"7",value:"888"}]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mockup__WEBPACK_IMPORTED_MODULE_3__.A,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{style:{height:"500px",width:"400px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_SimpleSortableRows__WEBPACK_IMPORTED_MODULE_4__.SimpleSortableRows,{rows,setRows,Cmp:Component,props:{otherValue:"test"},onDragEnd:rowKey=>{console.info("onDragEnd",{rowKey})},onDragStart:rowKey=>{console.info("onDragStart",{rowKey})}})})})},__namedExportsOrder=["SimpleSortableRows"];SimpleSortableRows.parameters={...SimpleSortableRows.parameters,docs:{...SimpleSortableRows.parameters?.docs,source:{originalSource:'() => {\n  const [rows, setRows] = useState<RowSortableItem<string>[]>([{\n    key: "1",\n    value: "111"\n  }, {\n    key: "2",\n    value: "222"\n  }, {\n    key: "3",\n    value: "333"\n  }, {\n    key: "3.5",\n    value: "444"\n  }, {\n    key: "4",\n    value: "555"\n  }, {\n    key: "5",\n    value: "666"\n  }, {\n    key: "6",\n    value: "777"\n  }, {\n    key: "7",\n    value: "888"\n  }]);\n  return <MockupJukiProvider>\n      <div style={{\n      height: "500px",\n      width: "400px"\n    }}>\n        <SimpleSortableRowsComponent<string, {\n        otherValue: string;\n      }> rows={rows} setRows={setRows} Cmp={Component}\n      // props={undefined}\n      props={{\n        otherValue: "test"\n      }} onDragEnd={rowKey => {\n        console.info("onDragEnd", {\n          rowKey\n        });\n      }} onDragStart={rowKey => {\n        console.info("onDragStart", {\n          rowKey\n        });\n      }} />\n      </div>\n    </MockupJukiProvider>;\n}',...SimpleSortableRows.parameters?.docs?.source}}}},"./src/components/molecules/SimpleSortableRows/SimpleSortableRows.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SimpleSortableRows:()=>SimpleSortableRows,snapToGrid:()=>snapToGrid});var _Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),immutability_helper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/immutability-helper/index.js"),immutability_helper__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(immutability_helper__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_dnd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-dnd/dist/hooks/useDragLayer.js"),react_dnd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-dnd/dist/hooks/useDrop/useDrop.js"),react_dnd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react-dnd/dist/hooks/useDrag/useDrag.js"),react_dnd__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/react-dnd/dist/core/DndProvider.js"),react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react-dnd-html5-backend/dist/getEmptyImage.js"),react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/react-dnd-html5-backend/dist/index.js"),react_resize_detector__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-resize-detector/build/index.esm.js"),_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/atoms/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const layerStyles={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,height:"100%"};function snapToGrid(x,y){return[32*Math.round(x/32),32*Math.round(y/32)]}function getItemStyles(initialOffset,currentOffset,isSnapToGrid){if(!initialOffset||!currentOffset)return{display:"none"};let{x,y}=currentOffset;isSnapToGrid&&(x-=initialOffset.x,y-=initialOffset.y,[x,y]=snapToGrid(x,y),x+=initialOffset.x,y+=initialOffset.y);const transform="translate(".concat(x,"px, ").concat(y,"px)");return{transform,WebkitTransform:transform}}const CustomDragLayer=_ref=>{let{Cmp,width}=_ref;const{itemType,isDragging,item,initialOffset,currentOffset}=(0,react_dnd__WEBPACK_IMPORTED_MODULE_5__.V)((monitor=>({item:monitor.getItem(),itemType:monitor.getItemType(),initialOffset:monitor.getInitialSourceClientOffset(),currentOffset:monitor.getSourceClientOffset(),isDragging:monitor.isDragging()})));return isDragging?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:(0,_Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.A)((0,_Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.A)({},layerStyles),{},{width}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:getItemStyles(initialOffset,currentOffset,!1),children:function renderItem(){return"row"===itemType?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Cmp,{dragComponentRef:null,dragComponent:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{style:{cursor:"move"},className:"jk-sortable-row-drag-icon jk-row",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.WP0,{})}),isDragging:!0,isOver:!1,index:item.index,rowKey:item.key,isPreview:!0,value:item.value,props:item.props}):null}()})}):null},Row=_ref2=>{let{rowKey,Cmp,index,moveRow,value,props,setIsDragging,rowDraggingRef}=_ref2;const ref=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),[{isOver},drop]=(0,react_dnd__WEBPACK_IMPORTED_MODULE_7__.H)({accept:"row",collect:monitor=>({handlerId:monitor.getHandlerId(),isOver:monitor.isOver()}),hover(item,monitor){var _ref$current;if(!ref.current)return;const dragIndex=item.index,hoverIndex=index;if(dragIndex===hoverIndex)return;const hoverBoundingRect=null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.getBoundingClientRect(),hoverMiddleY=(hoverBoundingRect.bottom-hoverBoundingRect.top)/2,hoverClientY=monitor.getClientOffset().y-hoverBoundingRect.top;dragIndex<hoverIndex&&hoverClientY<hoverMiddleY||dragIndex>hoverIndex&&hoverClientY>hoverMiddleY||(moveRow(dragIndex,hoverIndex),item.index=hoverIndex)}}),[{item},drag,preview]=(0,react_dnd__WEBPACK_IMPORTED_MODULE_8__.i)({type:"row",item:()=>({key:rowKey,index,value,props}),collect:monitor=>({isDragging:monitor.isDragging(),handlerId:monitor.getHandlerId(),item:monitor.getItem()})});drag(drop(ref)),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{preview((0,react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_9__.n)(),{captureDraggingState:!0})}),[]);const isDragging=(null==item?void 0:item.key)===rowKey;var _item$key;item&&(rowDraggingRef.current=null!==(_item$key=null==item?void 0:item.key)&&void 0!==_item$key?_item$key:null);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{setIsDragging(item?prevState=>(0,_Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.A)((0,_Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.A)({},prevState),{},{[null==item?void 0:item.key]:!0}):prevState=>(0,_Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.A)((0,_Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.A)({},prevState),{},{[rowDraggingRef.current]:!1}))}),[item,setIsDragging]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Cmp,{index,isDragging,isPreview:!1,isOver,rowKey,value,props,dragComponent:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{ref,style:{cursor:"move"},className:"jk-sortable-row-drag-icon jk-row",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.WP0,{})}),dragComponentRef:ref})},SimpleSortableRows=properties=>{const{rows,setRows,className,Cmp,props,onDragEnd,onDragStart}=properties,moveRow=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(((dragIndex,hoverIndex)=>{setRows((prevCards=>immutability_helper__WEBPACK_IMPORTED_MODULE_0___default()(prevCards,{$splice:[[dragIndex,1],[hoverIndex,0,prevCards[dragIndex]]]})))}),[setRows]),[isDragging,setIsDragging]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),{width=0,ref}=(0,react_resize_detector__WEBPACK_IMPORTED_MODULE_10__.u)(),rowDraggingRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),onDragStartRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(onDragStart);onDragStartRef.current=onDragStart;const onDragEndRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(onDragEnd);onDragEndRef.current=onDragEnd;const startedRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{const item=Object.entries(isDragging).find((_ref3=>{let[key,value]=_ref3;return value}));var _onDragStartRef$curre;if(item)null===(_onDragStartRef$curre=onDragStartRef.current)||void 0===_onDragStartRef$curre||_onDragStartRef$curre.call(onDragStartRef,item[0]),startedRef.current=!0;else if(startedRef.current){var _onDragEndRef$current;null===(_onDragEndRef$current=onDragEndRef.current)||void 0===_onDragEndRef$current||_onDragEndRef$current.call(onDragEndRef,rowDraggingRef.current),startedRef.current=!1}}),[isDragging,rows.length]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_dnd__WEBPACK_IMPORTED_MODULE_11__.Q,{backend:react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_12__.t2,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)("jk-sortable-rows-container",className),ref,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(CustomDragLayer,{Cmp,width}),rows.map(((row,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Row,{rowKey:row.key,index:i,id:row.key,Cmp,moveRow,value:row.value,props,setIsDragging,rowDraggingRef},row.key)))]})})};try{SimpleSortableRows.displayName="SimpleSortableRows",SimpleSortableRows.__docgenInfo={description:"",displayName:"SimpleSortableRows",props:{rows:{defaultValue:null,description:"",name:"rows",required:!0,type:{name:"RowSortableItem<T>[]"}},setRows:{defaultValue:null,description:"",name:"setRows",required:!0,type:{name:"Dispatch<SetStateAction<RowSortableItem<T>[]>>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},Cmp:{defaultValue:null,description:"",name:"Cmp",required:!0,type:{name:"FC<RowComponentProps<T, U>>"}},props:{defaultValue:null,description:"",name:"props",required:!0,type:{name:"U"}},onDragStart:{defaultValue:null,description:"",name:"onDragStart",required:!1,type:{name:"((rowKey: string | null) => void)"}},onDragEnd:{defaultValue:null,description:"",name:"onDragEnd",required:!1,type:{name:"((rowKey: string | null) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/molecules/SimpleSortableRows/SimpleSortableRows.tsx#SimpleSortableRows"]={docgenInfo:SimpleSortableRows.__docgenInfo,name:"SimpleSortableRows",path:"src/components/molecules/SimpleSortableRows/SimpleSortableRows.tsx#SimpleSortableRows"})}catch(__react_docgen_typescript_loader_error){}}}]);