"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[1575,3654,6525],{"./node_modules/motion/dist/es/framer-motion/dist/es/components/AnimatePresence/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>AnimatePresence});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/react/index.js"),LayoutGroupContext=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/context/LayoutGroupContext.mjs"),use_constant=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/utils/use-constant.mjs"),use_isomorphic_effect=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/utils/use-isomorphic-effect.mjs"),PresenceContext=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/context/PresenceContext.mjs"),MotionConfigContext=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/context/MotionConfigContext.mjs"),is_html_element=__webpack_require__("./node_modules/motion/dist/es/motion-dom/dist/es/utils/is-html-element.mjs");class PopChildMeasure extends react.Component{getSnapshotBeforeUpdate(prevProps){const element=this.props.childRef.current;if(element&&prevProps.isPresent&&!this.props.isPresent){const parent=element.offsetParent,parentWidth=(0,is_html_element.s)(parent)&&parent.offsetWidth||0,size=this.props.sizeRef.current;size.height=element.offsetHeight||0,size.width=element.offsetWidth||0,size.top=element.offsetTop,size.left=element.offsetLeft,size.right=parentWidth-size.width-size.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children,isPresent,anchorX}){const id=(0,react.useId)(),ref=(0,react.useRef)(null),size=(0,react.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce}=(0,react.useContext)(MotionConfigContext.Q);return(0,react.useInsertionEffect)((()=>{const{width,height,top,left,right}=size.current;if(isPresent||!ref.current||!width||!height)return;const x="left"===anchorX?`left: ${left}`:`right: ${right}`;ref.current.dataset.motionPopId=id;const style=document.createElement("style");return nonce&&(style.nonce=nonce),document.head.appendChild(style),style.sheet&&style.sheet.insertRule(`\n          [data-motion-pop-id="${id}"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            ${x}px !important;\n            top: ${top}px !important;\n          }\n        `),()=>{document.head.contains(style)&&document.head.removeChild(style)}}),[isPresent]),(0,jsx_runtime.jsx)(PopChildMeasure,{isPresent,childRef:ref,sizeRef:size,children:react.cloneElement(children,{ref})})}const PresenceChild=({children,initial,isPresent,onExitComplete,custom,presenceAffectsLayout,mode,anchorX})=>{const presenceChildren=(0,use_constant.M)(newChildrenMap),id=(0,react.useId)();let isReusedContext=!0,context=(0,react.useMemo)((()=>(isReusedContext=!1,{id,initial,isPresent,custom,onExitComplete:childId=>{presenceChildren.set(childId,!0);for(const isComplete of presenceChildren.values())if(!isComplete)return;onExitComplete&&onExitComplete()},register:childId=>(presenceChildren.set(childId,!1),()=>presenceChildren.delete(childId))})),[isPresent,presenceChildren,onExitComplete]);return presenceAffectsLayout&&isReusedContext&&(context={...context}),(0,react.useMemo)((()=>{presenceChildren.forEach(((_,key)=>presenceChildren.set(key,!1)))}),[isPresent]),react.useEffect((()=>{!isPresent&&!presenceChildren.size&&onExitComplete&&onExitComplete()}),[isPresent]),"popLayout"===mode&&(children=(0,jsx_runtime.jsx)(PopChild,{isPresent,anchorX,children})),(0,jsx_runtime.jsx)(PresenceContext.t.Provider,{value:context,children})};function newChildrenMap(){return new Map}var use_presence=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/components/AnimatePresence/use-presence.mjs");const getChildKey=child=>child.key||"";function onlyElements(children){const filtered=[];return react.Children.forEach(children,(child=>{(0,react.isValidElement)(child)&&filtered.push(child)})),filtered}const AnimatePresence=({children,custom,initial=!0,onExitComplete,presenceAffectsLayout=!0,mode="sync",propagate=!1,anchorX="left"})=>{const[isParentPresent,safeToRemove]=(0,use_presence.xQ)(propagate),presentChildren=(0,react.useMemo)((()=>onlyElements(children)),[children]),presentKeys=propagate&&!isParentPresent?[]:presentChildren.map(getChildKey),isInitialRender=(0,react.useRef)(!0),pendingPresentChildren=(0,react.useRef)(presentChildren),exitComplete=(0,use_constant.M)((()=>new Map)),[diffedChildren,setDiffedChildren]=(0,react.useState)(presentChildren),[renderedChildren,setRenderedChildren]=(0,react.useState)(presentChildren);(0,use_isomorphic_effect.E)((()=>{isInitialRender.current=!1,pendingPresentChildren.current=presentChildren;for(let i=0;i<renderedChildren.length;i++){const key=getChildKey(renderedChildren[i]);presentKeys.includes(key)?exitComplete.delete(key):!0!==exitComplete.get(key)&&exitComplete.set(key,!1)}}),[renderedChildren,presentKeys.length,presentKeys.join("-")]);const exitingChildren=[];if(presentChildren!==diffedChildren){let nextChildren=[...presentChildren];for(let i=0;i<renderedChildren.length;i++){const child=renderedChildren[i],key=getChildKey(child);presentKeys.includes(key)||(nextChildren.splice(i,0,child),exitingChildren.push(child))}return"wait"===mode&&exitingChildren.length&&(nextChildren=exitingChildren),setRenderedChildren(onlyElements(nextChildren)),setDiffedChildren(presentChildren),null}const{forceRender}=(0,react.useContext)(LayoutGroupContext.L);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:renderedChildren.map((child=>{const key=getChildKey(child),isPresent=!(propagate&&!isParentPresent)&&(presentChildren===renderedChildren||presentKeys.includes(key));return(0,jsx_runtime.jsx)(PresenceChild,{isPresent,initial:!(isInitialRender.current&&!initial)&&void 0,custom,presenceAffectsLayout,mode,onExitComplete:isPresent?void 0:()=>{if(!exitComplete.has(key))return;exitComplete.set(key,!0);let isEveryExitComplete=!0;exitComplete.forEach((isExitComplete=>{isExitComplete||(isEveryExitComplete=!1)})),isEveryExitComplete&&(forceRender?.(),setRenderedChildren(pendingPresentChildren.current),propagate&&safeToRemove?.(),onExitComplete&&onExitComplete())},anchorX,children:child},key)}))})}},"./src/components/atoms/Collapse/Collapse.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Collapse:()=>Collapse});var motion_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/components/AnimatePresence/index.mjs"),motion_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/render/components/motion/proxy.mjs"),_helpers__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/helpers/index.ts")),_hooks_useHandleState__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/useHandleState.ts"),_server__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/atoms/server/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Collapse=props=>{const{children,header,className,showContent:_showContent,onChangeShowContent:_onChangeShowContent,startsShowing=!1,direction="column"}=props,[isOpen,setIsOpen]=(0,_hooks_useHandleState__WEBPACK_IMPORTED_MODULE_2__.X)(startsShowing,_showContent,_onChangeShowContent),open=()=>setIsOpen(!0),close=()=>setIsOpen(!1),toggle=()=>setIsOpen((prevState=>!prevState));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:[(0,_helpers__WEBPACK_IMPORTED_MODULE_1__._v)(header,{isOpen,close,open,toggle,icon:isOpen?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_server__WEBPACK_IMPORTED_MODULE_3__.DBI,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_server__WEBPACK_IMPORTED_MODULE_3__.rf3,{}),Icon:isOpen?_server__WEBPACK_IMPORTED_MODULE_3__.DBI:_server__WEBPACK_IMPORTED_MODULE_3__.rf3}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(motion_react__WEBPACK_IMPORTED_MODULE_5__.N,{initial:!1,children:isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(motion_react__WEBPACK_IMPORTED_MODULE_6__.P.div,{initial:"row"===direction?{width:0}:{height:0},animate:"row"===direction?{width:"auto"}:{height:"auto"},exit:"row"===direction?{width:0}:{height:0},style:{overflow:"hidden"},className,children:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__._v)(children,{isOpen,close,open,toggle})},"content")})]})};try{Collapse.displayName="Collapse",Collapse.__docgenInfo={description:"",displayName:"Collapse",props:{showContent:{defaultValue:null,description:"",name:"showContent",required:!1,type:{name:"boolean"}},onChangeShowContent:{defaultValue:null,description:"",name:"onChangeShowContent",required:!1,type:{name:"((showContent: boolean) => void)"}},header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"ReactNodeOrFunctionP1Type<{ isOpen: boolean; close: () => void; open: () => void; toggle: () => void; icon: ReactNode; Icon: (props: BasicIconProps) => Element; }>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},startsShowing:{defaultValue:null,description:"",name:"startsShowing",required:!1,type:{name:"boolean"}},direction:{defaultValue:null,description:"",name:"direction",required:!1,type:{name:"enum",value:[{value:'"column"'},{value:'"row"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/atoms/Collapse/Collapse.tsx#Collapse"]={docgenInfo:Collapse.__docgenInfo,name:"Collapse",path:"src/components/atoms/Collapse/Collapse.tsx#Collapse"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/ContentsSectionHeader.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ContentsSectionHeader:()=>ContentsSectionHeader});var react=__webpack_require__("./node_modules/react/index.js"),helpers=__webpack_require__("./src/helpers/index.ts"),types=__webpack_require__("./src/types/index.ts"),atoms=__webpack_require__("./src/components/atoms/index.tsx"),server=__webpack_require__("./src/components/atoms/server/index.ts"),TableOfContents=__webpack_require__("./src/components/organisms/worksheet/sheets/TableOfContents.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const TableOfContentsModal=props=>{const{sheetsInPages,isOpen,onClose,page,subPage,onPageChange}=props;return(0,jsx_runtime.jsx)(atoms.aF,{isOpen,onClose,closeIcon:!1,children:(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch",children:[(0,jsx_runtime.jsx)("div",{className:"jk-row bc-py jk-pg-sm",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se fw-bd cr-we",children:"table of content"})}),(0,jsx_runtime.jsx)(TableOfContents.M,{page,subPage,sheetsInPages,onPageChange})]})})};try{TableOfContentsModal.displayName="TableOfContentsModal",TableOfContentsModal.__docgenInfo={description:"",displayName:"TableOfContentsModal",props:{page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"number"}},subPage:{defaultValue:null,description:"",name:"subPage",required:!0,type:{name:"number"}},sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!0,type:{name:"OnPageChange"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/sheets/TableOfContentsModal.tsx#TableOfContentsModal"]={docgenInfo:TableOfContentsModal.__docgenInfo,name:"TableOfContentsModal",path:"src/components/organisms/worksheet/sheets/TableOfContentsModal.tsx#TableOfContentsModal"})}catch(__react_docgen_typescript_loader_error){}const ContentsSectionHeader=props=>{const{page,subPage,onPageChange,sheetsInPages}=props,[isOpen,setIsOpen]=(0,react.useState)(!1),totalPages=sheetsInPages.length;return(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch gap bc-we jk-br-ie cr-pd fw-bd",children:[(0,jsx_runtime.jsx)(TableOfContentsModal,{page,subPage,isOpen,onPageChange,onClose:()=>setIsOpen(!1),sheetsInPages}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap center",children:[(0,jsx_runtime.jsxs)("div",{onClick:page<=1?void 0:()=>onPageChange(page-1,1,{name:types.QueryParamKey.PAGE_FOCUS,value:"jk-worksheet-viewer-container"}),className:(0,helpers.xW)("jk-row gap jk-pg-xsm jk-br-ie",{"cr-g6":page<=1,"cr-pr hoverable":!(page<=1)}),children:[(0,jsx_runtime.jsx)(server.gFQ,{}),(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"previous"})]}),(0,jsx_runtime.jsxs)("div",{className:"jk-row cr-pr hoverable jk-br-ie jk-pg-xsm",onClick:()=>setIsOpen(!0),children:[(0,jsx_runtime.jsx)(server.jZu,{}),(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"table of contents"})]}),(0,jsx_runtime.jsxs)("div",{onClick:page===totalPages?void 0:()=>onPageChange(page+1,1,{name:types.QueryParamKey.PAGE_FOCUS,value:"jk-worksheet-viewer-container"}),className:(0,helpers.xW)("jk-row gap jk-pg-xsm jk-br-ie",{"cr-g6":page===totalPages,"cr-pr hoverable":!(page===totalPages)}),children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"next"}),(0,jsx_runtime.jsx)(server.sIg,{})]})]})]})};try{ContentsSectionHeader.displayName="ContentsSectionHeader",ContentsSectionHeader.__docgenInfo={description:"",displayName:"ContentsSectionHeader",props:{page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"number"}},subPage:{defaultValue:null,description:"",name:"subPage",required:!0,type:{name:"number"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!0,type:{name:"OnPageChange"}},sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/ContentsSectionHeader.tsx#ContentsSectionHeader"]={docgenInfo:ContentsSectionHeader.__docgenInfo,name:"ContentsSectionHeader",path:"src/components/organisms/worksheet/ContentsSectionHeader.tsx#ContentsSectionHeader"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/WorksheetBodies.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorksheetBodies:()=>WorksheetBodies});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/index.ts"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/types/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/atoms/index.tsx"),_atoms_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/atoms/server/index.ts"),_WorksheetBody__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/organisms/worksheet/WorksheetBody.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const WorksheetBodies=props=>{var _sheetsInPages,_sheetsInPages2;const{sheetsInPages,isEditor,setSheets,userResults,isSolvable,worksheetKey,page,onPageChange,lastPageChildren,readOnly}=props,containerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),setPageSheets=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((newPageHeader,newPageSheetContent)=>{const newSheetsInPages=[...sheetsInPages];newSheetsInPages[page-1]={header:null!=newPageHeader?newPageHeader:newSheetsInPages[page-1].header,content:newPageSheetContent};const newSheets=[];for(const{header,content}of newSheetsInPages)newSheets.push(header,...content);null==setSheets||setSheets(newSheets)}),[page,setSheets,sheetsInPages]),setSheet=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value=>{const newPageSheetContent="function"==typeof value?value(sheetsInPages[page-1].content):value;setPageSheets(null,newPageSheetContent)}),[page,setPageSheets,sheetsInPages]),pages=sheetsInPages.length;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.xW)("jk-col gap nowrap top stretch extend worksheet-bodies",{"is-solvable":isSolvable}),children:[setSheets&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row gap extend nowrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.pd,{label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.T,{className:"tt-se",children:"page title"}),value:null===(_sheetsInPages=sheetsInPages[page-1])||void 0===_sheetsInPages?void 0:_sheetsInPages.header.title,onChange:title=>{setPageSheets({...sheetsInPages[page-1].header,title},sheetsInPages[page-1].content)},expand:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.$n,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"remove page divider",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_4__.d7y,{}),onClick:()=>{const newSheetsInPages=[...sheetsInPages],newSheets=[];if(page===pages){let i=0;for(const{header,content}of newSheetsInPages)i!==page-1&&newSheets.push(header),newSheets.push(...content),i++;setSheets(newSheets)}else{let i=0,contentDeleted=null;for(const{header,content}of newSheetsInPages)i===page-1?contentDeleted=content:(newSheets.push(header),null!==contentDeleted&&(newSheets.push(...contentDeleted),contentDeleted=null),newSheets.push(...content)),i++;setSheets(newSheets)}page>1&&page===pages&&onPageChange(Math.max(page,1),1,{name:_types__WEBPACK_IMPORTED_MODULE_2__.QueryParamKey.PAGE_FOCUS,value:"jk-worksheet-viewer-container"})},disabled:pages<=1})]},`${page}`),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_WorksheetBody__WEBPACK_IMPORTED_MODULE_5__.WorksheetBody,{sheet:null===(_sheetsInPages2=sheetsInPages[page-1])||void 0===_sheetsInPages2?void 0:_sheetsInPages2.content,setSheet:setSheets?setSheet:void 0,userResults,readOnly:!!readOnly,isSolvable,isEditor,worksheetKey,ref:containerRef}),page<pages?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.$n,{className:"next-button",type:"light",onClick:()=>onPageChange(page+1,1,{name:_types__WEBPACK_IMPORTED_MODULE_2__.QueryParamKey.PAGE_FOCUS,value:"jk-worksheet-viewer-container"}),expand:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.T,{className:"tt-se",children:"next page"})}):lastPageChildren]})};try{WorksheetBodies.displayName="WorksheetBodies",WorksheetBodies.__docgenInfo={description:"",displayName:"WorksheetBodies",props:{sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},setSheets:{defaultValue:null,description:"",name:"setSheets",required:!1,type:{name:"Dispatch<BodyWorksheetType[]>"}},userResults:{defaultValue:null,description:"",name:"userResults",required:!1,type:{name:"UserResultsType"}},isSolvable:{defaultValue:null,description:"",name:"isSolvable",required:!0,type:{name:"boolean"}},isEditor:{defaultValue:null,description:"",name:"isEditor",required:!0,type:{name:"boolean"}},worksheetKey:{defaultValue:null,description:"",name:"worksheetKey",required:!0,type:{name:"string"}},page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"number"}},subPage:{defaultValue:null,description:"",name:"subPage",required:!0,type:{name:"number"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!0,type:{name:"OnPageChange"}},lastPageChildren:{defaultValue:null,description:"",name:"lastPageChildren",required:!1,type:{name:"ReactNode"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/WorksheetBodies.tsx#WorksheetBodies"]={docgenInfo:WorksheetBodies.__docgenInfo,name:"WorksheetBodies",path:"src/components/organisms/worksheet/WorksheetBodies.tsx#WorksheetBodies"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/WorksheetViewer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorksheetViewer:()=>WorksheetViewer});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/index.ts"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.ts"),_settings__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/settings/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/atoms/index.tsx"),_ContentsSectionHeader__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/organisms/worksheet/ContentsSectionHeader.tsx"),_sheets_TableOfContents__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/organisms/worksheet/sheets/TableOfContents.tsx"),_WorksheetBodies__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/organisms/worksheet/WorksheetBodies.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react/jsx-runtime.js");const WorksheetViewer=props=>{const{content,worksheetKey,isSolvable=!1,isEditor=!1,resultsUserKey,page:initialPage,subPage:initialSubPage,onPageChange:initialOnPageChange,lastPageChildren,readOnly:initialReadOnly=!1,withoutTableOfContents=!1}=props,{viewPortSize}=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.p1)(),userNickname=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.kH)((state=>state.user.nickname)),companyKey=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.kH)((state=>state.company.key)),userIsLogged=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.kH)((state=>state.user.isLogged)),setSearchParams=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.Ic)((state=>state.setSearchParams)),[page,_setPage]=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.ID)(null!=initialPage?initialPage:1),[subPage,_setSubPage]=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.ID)(null!=initialSubPage?initialSubPage:1),onPageChange=null!=initialOnPageChange?initialOnPageChange:(page,subPage,entries)=>{_setPage(page),_setSubPage(subPage),setSearchParams(entries)},{data:userResultsData,mutate:userResultsMutate,isLoading:userResultsIsLoading,isValidating:userResultsIsValidating}=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.Ls)(worksheetKey&&isSolvable&&userIsLogged?_settings__WEBPACK_IMPORTED_MODULE_4__.u.API_V1.worksheet.getSubmissionsUser({params:{key:worksheetKey,userKey:resultsUserKey||(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.Lwn)(userNickname,companyKey)}}).url:null),userResults=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>({data:null!=userResultsData&&userResultsData.success?userResultsData.content:void 0,isLoading:userResultsIsLoading,isValidating:userResultsIsValidating,mutate:userResultsMutate})),[userResultsData,userResultsIsLoading,userResultsIsValidating,userResultsMutate]),sheetsInPages=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.bs0)(content)),[content]),isSmallPortSize="sm"===viewPortSize,readOnly=initialReadOnly||!(null==userResults||!userResults.data)&&userNickname!==userResults.data.user.nickname,pages=sheetsInPages.length;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{id:"jk-worksheet-viewer-container",className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)("gap nowrap worksheet-viewer-container center top",{"jk-col":isSmallPortSize,"jk-row":!isSmallPortSize}),children:[!withoutTableOfContents&&(isSmallPortSize?pages>1&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{className:"jk-row",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_ContentsSectionHeader__WEBPACK_IMPORTED_MODULE_6__.ContentsSectionHeader,{page,subPage,onPageChange,sheetsInPages})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)("div",{className:"jk-col gap bc-we jk-pg-xsm jk-br-ie left worksheet-content sticky-top",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_5__.T,{className:"tt-se fw-bd cr-py",children:"table of content"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_sheets_TableOfContents__WEBPACK_IMPORTED_MODULE_7__.M,{sheetsInPages,page,subPage,onPageChange})]})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_WorksheetBodies__WEBPACK_IMPORTED_MODULE_8__.WorksheetBodies,{sheetsInPages,isSolvable:isSolvable&&userIsLogged,userResults,readOnly,isEditor,worksheetKey,page,onPageChange,subPage,lastPageChildren})]})};try{WorksheetViewer.displayName="WorksheetViewer",WorksheetViewer.__docgenInfo={description:"",displayName:"WorksheetViewer",props:{resultsUserKey:{defaultValue:null,description:"",name:"resultsUserKey",required:!1,type:{name:"string"}},content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"BodyWorksheetType[]"}},worksheetKey:{defaultValue:null,description:"",name:"worksheetKey",required:!0,type:{name:"string"}},isSolvable:{defaultValue:null,description:"",name:"isSolvable",required:!1,type:{name:"boolean"}},isEditor:{defaultValue:null,description:"",name:"isEditor",required:!1,type:{name:"boolean"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number"}},subPage:{defaultValue:null,description:"",name:"subPage",required:!1,type:{name:"number"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!1,type:{name:"OnPageChange"}},lastPageChildren:{defaultValue:null,description:"",name:"lastPageChildren",required:!1,type:{name:"ReactNode"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},withoutTableOfContents:{defaultValue:null,description:"",name:"withoutTableOfContents",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/WorksheetViewer.tsx#WorksheetViewer"]={docgenInfo:WorksheetViewer.__docgenInfo,name:"WorksheetViewer",path:"src/components/organisms/worksheet/WorksheetViewer.tsx#WorksheetViewer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/sheets/TableOfContents.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>TableOfContents});__webpack_require__("./node_modules/react/index.js");var _constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/constants/index.ts"),_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/index.ts"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/types/index.ts"),_atoms_Collapse_Collapse__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/atoms/Collapse/Collapse.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TableOfContents=_ref=>{let{sheetsInPages,onPageChange,page,subPage}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"jk-col gap stretch jk-pg-sm wh-100",children:sheetsInPages.map(((_ref2,index)=>{let{header,content}=_ref2;const subTitles=content.filter((chunk=>!!chunk.title.trim()));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)("jk-col stretch jk-br-ie",{"br-hl":page===index+1}),style:{border:page===index+1?void 0:"1px solid transparent"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms_Collapse_Collapse__WEBPACK_IMPORTED_MODULE_4__.Collapse,{header:_ref3=>{let{toggle,icon}=_ref3;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)("fw-bd jk-row gap nowrap space-between stretch jk-br-ie",{hoverable:!!onPageChange,"bc-hl cr-th":page===index+1}),style:{padding:"2px 8px"},onClick:()=>null==onPageChange?void 0:onPageChange(index+1,1,{name:_types__WEBPACK_IMPORTED_MODULE_3__.QueryParamKey.PAGE_FOCUS,value:"jk-worksheet-viewer-container"}),children:[header.title,!!subTitles.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{onClick:event=>{event.stopPropagation(),toggle()},className:"jk-row",children:icon})]},index)},startsShowing:!0,children:!!subTitles.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"jk-col stretch gap jk-pg-xsm-trb jk-pg-l jk-br-ie",children:subTitles.map(((chunk,subIndex)=>{var _LOGO_WORKSHEET_TYPE$;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)("fw-bd jk-row nowrap gap left stretch jk-br-ie",{hoverable:!!onPageChange,"bc-hl cr-th":page===index+1&&subPage===subIndex+1}),style:{padding:2},onClick:()=>null==onPageChange?void 0:onPageChange(index+1,subIndex+1,{name:_types__WEBPACK_IMPORTED_MODULE_3__.QueryParamKey.PAGE_FOCUS,value:chunk.id}),children:[(null===(_LOGO_WORKSHEET_TYPE$=(0,_constants__WEBPACK_IMPORTED_MODULE_1__._z)()[null==chunk?void 0:chunk.type])||void 0===_LOGO_WORKSHEET_TYPE$?void 0:_LOGO_WORKSHEET_TYPE$.icon)||null,chunk.title]},`${chunk.title}-${subIndex}`)}))})})})}))})};try{TableOfContents.displayName="TableOfContents",TableOfContents.__docgenInfo={description:"",displayName:"TableOfContents",props:{sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"number"}},subPage:{defaultValue:null,description:"",name:"subPage",required:!0,type:{name:"number"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!0,type:{name:"OnPageChange"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/sheets/TableOfContents.tsx#TableOfContents"]={docgenInfo:TableOfContents.__docgenInfo,name:"TableOfContents",path:"src/components/organisms/worksheet/sheets/TableOfContents.tsx#TableOfContents"})}catch(__react_docgen_typescript_loader_error){}}}]);