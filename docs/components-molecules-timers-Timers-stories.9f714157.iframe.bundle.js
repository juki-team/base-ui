"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[4533],{"./src/components/molecules/timers/Timer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Timer:()=>Timer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/index.ts"),_hooks_custom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/custom.ts"),_atoms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/atoms/index.tsx"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/molecules/timers/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Timer=react__WEBPACK_IMPORTED_MODULE_0__.memo((props=>{const{currentTimestamp,laps=3,interval=1,literal,ignoreLeadingZeros=!1,ignoreTrailingZeros=!1}=props,[counter,setCounter]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({remaining:currentTimestamp,startTimestamp:0});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const slack=currentTimestamp%Math.abs(interval),startCounting=setTimeout((()=>{setCounter({remaining:currentTimestamp,startTimestamp:Date.now()})}),slack);return()=>{clearTimeout(startCounting)}}),[interval,currentTimestamp]),(0,_hooks_custom__WEBPACK_IMPORTED_MODULE_2__.$$)((()=>{const startTimestamp=Date.now();setCounter((prevState=>({startTimestamp,remaining:prevState.remaining-(interval<0?startTimestamp-prevState.startTimestamp:prevState.startTimestamp-startTimestamp)})))}),Math.abs(interval));const timeSplit=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.E)(counter.remaining,laps,ignoreLeadingZeros,ignoreTrailingZeros);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.xW)("jk-timer-layout jk-row nowrap",{literal:!!literal}),children:literal?timeSplit.map(((remaining,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[index>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.T,{children:"and"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{children:remaining.remaining}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.T,{children:remaining.label})]},remaining.label))):timeSplit.map(((remaining,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"content-stamp",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"content-number tx-s fw-bd jk-row",children:remaining.remaining}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"content-label tx-t fw-bd tt-ue jk-row",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.T,{children:remaining.label})})]}),index!==timeSplit.length-1&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{className:"content-dots tx-l fw-bd",children:":"})]},remaining.label)))})}));try{Timer.displayName="Timer",Timer.__docgenInfo={description:"",displayName:"Timer",props:{currentTimestamp:{defaultValue:null,description:"",name:"currentTimestamp",required:!0,type:{name:"number"}},laps:{defaultValue:null,description:"",name:"laps",required:!1,type:{name:"number"}},interval:{defaultValue:null,description:"",name:"interval",required:!1,type:{name:"number"}},literal:{defaultValue:null,description:"",name:"literal",required:!1,type:{name:"boolean"}},ignoreLeadingZeros:{defaultValue:null,description:"",name:"ignoreLeadingZeros",required:!1,type:{name:"boolean"}},ignoreTrailingZeros:{defaultValue:null,description:"",name:"ignoreTrailingZeros",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/molecules/timers/Timer.tsx#Timer"]={docgenInfo:Timer.__docgenInfo,name:"Timer",path:"src/components/molecules/timers/Timer.tsx#Timer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/molecules/timers/TimerLabeled.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TimerLabeled:()=>TimerLabeled});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/types/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/atoms/index.tsx"),_Timer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/molecules/timers/Timer.tsx"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/molecules/timers/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const DEFAULT_LABELS={[_types__WEBPACK_IMPORTED_MODULE_1__.Period.FUTURE]:"stars in",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_START]:"starts ago",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_END]:"ends in",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.PAST]:"ended ago",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.TIME_OUT]:"time out",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.CALC]:"..."},TimerLabeled=_ref=>{let{startDate,endDate,currentDate,labels,laps:_laps=3}=_ref;const[time,setTime]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({period:_types__WEBPACK_IMPORTED_MODULE_1__.Period.CALC,remaining:0,interval:0});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const current=currentDate||new Date;let period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.CALC,remaining=0,interval=0;startDate<current&&current<endDate?(period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_END,remaining=endDate.getTime()-current.getTime(),interval=-1):endDate<current&&current<startDate?(period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_START,remaining=current.getTime()-endDate.getTime(),interval=1):current<startDate?(period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.FUTURE,remaining=startDate.getTime()-current.getTime(),interval=-1):current>endDate&&(period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.PAST,remaining=current.getTime()-endDate.getTime(),interval=1),setTime({period,remaining,interval});const timeout=setTimeout((()=>{period!==_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_START&&period!==_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_END&&period!==_types__WEBPACK_IMPORTED_MODULE_1__.Period.FUTURE||setTime({period:_types__WEBPACK_IMPORTED_MODULE_1__.Period.TIME_OUT,remaining:0,interval:0})}),remaining);return()=>{clearTimeout(timeout)}}),[currentDate,endDate,startDate]);const laps=Math.min(Math.max(0,_laps),6),myLabels={...DEFAULT_LABELS,...labels},timeSplit=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.E)(Math.max(time.remaining,0),laps,!1,!1),timeInterval=Math.max(timeSplit[timeSplit.length-1].milliseconds,1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"layout-timer-clock",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"label-period tx-s fw-bd",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,{children:myLabels[time.period]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Timer__WEBPACK_IMPORTED_MODULE_3__.Timer,{laps,currentTimestamp:time.remaining,interval:time.interval*timeInterval})]})};try{TimerLabeled.displayName="TimerLabeled",TimerLabeled.__docgenInfo={description:"",displayName:"TimerLabeled",props:{startDate:{defaultValue:null,description:"",name:"startDate",required:!0,type:{name:"Date"}},endDate:{defaultValue:null,description:"",name:"endDate",required:!0,type:{name:"Date"}},currentDate:{defaultValue:null,description:"",name:"currentDate",required:!1,type:{name:"Date"}},labels:{defaultValue:null,description:"",name:"labels",required:!1,type:{name:"{ FUTURE: string; LIVE_START: string; LIVE_END: string; PAST: string; CALC: string; TIME_OUT: string; }"}},laps:{defaultValue:null,description:"",name:"laps",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/molecules/timers/TimerLabeled.tsx#TimerLabeled"]={docgenInfo:TimerLabeled.__docgenInfo,name:"TimerLabeled",path:"src/components/molecules/timers/TimerLabeled.tsx#TimerLabeled"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/molecules/timers/Timers.stories.tsx":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(module,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Regular:()=>Regular,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _mockup__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/mockup/index.ts"),_Timer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/molecules/timers/Timer.tsx"),_TimerLabeled__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/molecules/timers/TimerLabeled.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js"),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([_mockup__WEBPACK_IMPORTED_MODULE_1__]);_mockup__WEBPACK_IMPORTED_MODULE_1__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];const __WEBPACK_DEFAULT_EXPORT__={component:_TimerLabeled__WEBPACK_IMPORTED_MODULE_3__.TimerLabeled},Regular={render:args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_mockup__WEBPACK_IMPORTED_MODULE_1__.Ag,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{children:"TimerClock"}),[15e3,0,-3e4].map((startTimestamp=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TimerLabeled__WEBPACK_IMPORTED_MODULE_3__.TimerLabeled,{startDate:new Date(Date.now()+startTimestamp),endDate:new Date(Date.now()+startTimestamp+15e3),laps:7}))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TimerLabeled__WEBPACK_IMPORTED_MODULE_3__.TimerLabeled,{endDate:new Date(Date.now()-15e3),startDate:new Date(Date.now()+15e3),laps:7}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{children:"laps 4"}),[15e3,0,-3e4].map((startTimestamp=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TimerLabeled__WEBPACK_IMPORTED_MODULE_3__.TimerLabeled,{startDate:new Date(Date.now()+startTimestamp),endDate:new Date(Date.now()+startTimestamp+15e3),laps:4}))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TimerLabeled__WEBPACK_IMPORTED_MODULE_3__.TimerLabeled,{endDate:new Date(Date.now()-15e3),startDate:new Date(Date.now()+15e3),laps:4}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("h3",{children:"Timer"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Timer__WEBPACK_IMPORTED_MODULE_2__.Timer,{interval:-1,currentTimestamp:1e4,laps:7}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Timer__WEBPACK_IMPORTED_MODULE_2__.Timer,{interval:-1,currentTimestamp:6e5}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Timer__WEBPACK_IMPORTED_MODULE_2__.Timer,{interval:-1,currentTimestamp:6e4,laps:1}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Timer__WEBPACK_IMPORTED_MODULE_2__.Timer,{interval:-1,currentTimestamp:94608e8,laps:7}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Timer__WEBPACK_IMPORTED_MODULE_2__.Timer,{interval:1,currentTimestamp:94608e8,laps:7}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Timer__WEBPACK_IMPORTED_MODULE_2__.Timer,{interval:1,currentTimestamp:6e5,laps:7}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Timer__WEBPACK_IMPORTED_MODULE_2__.Timer,{interval:-1,currentTimestamp:6e5,literal:!0,laps:2})]})},__namedExportsOrder=["Regular"];Regular.parameters={...Regular.parameters,docs:{...Regular.parameters?.docs,source:{originalSource:"{\n  render: args => <MockupJukiProvider>\n      <h3>TimerClock</h3>\n      {[15 * 1000, 0, -30 * 1000].map(startTimestamp => <TimerLabeled startDate={new Date(Date.now() + startTimestamp)} endDate={new Date(Date.now() + startTimestamp + 15 * 1000)} laps={7} />)}\n      <TimerLabeled endDate={new Date(Date.now() - 15 * 1000)} startDate={new Date(Date.now() + 15 * 1000)} laps={7} />\n      <h3>laps 4</h3>\n      {[15 * 1000, 0, -30 * 1000].map(startTimestamp => <TimerLabeled startDate={new Date(Date.now() + startTimestamp)} endDate={new Date(Date.now() + startTimestamp + 15 * 1000)} laps={4} />)}\n      <TimerLabeled endDate={new Date(Date.now() - 15 * 1000)} startDate={new Date(Date.now() + 15 * 1000)} laps={4} />\n      <h3>Timer</h3>\n      <Timer interval={-1} currentTimestamp={10 * 1000} laps={7} />\n      <Timer interval={-1} currentTimestamp={10 * 60 * 1000} />\n      <Timer interval={-1} currentTimestamp={60 * 1000} laps={1} />\n      <Timer interval={-1} currentTimestamp={300 * 365 * 24 * 60 * 60 * 1000} laps={7} />\n      <Timer interval={1} currentTimestamp={300 * 365 * 24 * 60 * 60 * 1000} laps={7} />\n      <Timer interval={1} currentTimestamp={10 * 60 * 1000} laps={7} />\n      \n      <Timer interval={-1} currentTimestamp={10 * 60 * 1000} literal laps={2} />\n    </MockupJukiProvider>\n}",...Regular.parameters?.docs?.source}}},__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},"./src/components/molecules/timers/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>cutTimeSplit});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js");const cutTimeSplit=(remaining,laps,ignoreLeadingZeros,ignoreTrailingZeros)=>{let timeSplit=(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.SBk)(Math.max(remaining,0));for(;timeSplit[0].remaining<=0&&timeSplit.length>laps;)timeSplit.shift();for(;ignoreLeadingZeros&&timeSplit.length&&0===timeSplit[0].remaining;)timeSplit.shift();for(;ignoreTrailingZeros&&timeSplit.length&&0===timeSplit[timeSplit.length-1].remaining;)timeSplit.pop();return timeSplit.splice(0,laps)}}}]);