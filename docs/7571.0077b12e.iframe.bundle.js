"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[7571],{"./src/components/organisms/_layz_/GraphvizViewer/GraphvizViewer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>GraphvizViewer,useGraphvizStore:()=>useGraphvizStore});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_viz_js_viz__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@viz-js/viz/dist/viz.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),zustand__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/zustand/esm/react.mjs"),_helpers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/helpers/index.ts"),_stores_i18n_useI18nStore__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/stores/i18n/useI18nStore.ts"),useGraphvizStore=(0,zustand__WEBPACK_IMPORTED_MODULE_3__.v)(function(set){return{shouldRerender:0,triggerRerender:function(){return set(function(){return{shouldRerender:Date.now()}})}}});function GraphvizViewer(param){var dot=param.dot,className=param.className,containerRef=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null),t=(0,_stores_i18n_useI18nStore__WEBPACK_IMPORTED_MODULE_5__.T)(function(store){return store.i18n.t}),shouldRerender=useGraphvizStore(function(s){return s.shouldRerender});return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function(){var el=containerRef.current;if(el)return(0,_viz_js_viz__WEBPACK_IMPORTED_MODULE_1__.KJ)().then(function(viz){el.innerHTML="";try{var svg=viz.renderSVGElement(dot,{});el.appendChild(svg)}catch(e){console.warn("error on drawing Graphviz",e),el.innerHTML="";var errorDiv=document.createElement("div");errorDiv.textContent=t("error rendering graph")+": ".concat((null==e?void 0:e.message)||String(e)),errorDiv.style.color="red",errorDiv.style.whiteSpace="pre-wrap",el.appendChild(errorDiv)}}),function(){try{el.innerHTML=""}catch(e){}}},[dot,shouldRerender]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_4__.xW)("jk-graphviz-viewer-container",className),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"jk-graphviz-viewer",ref:containerRef})})}GraphvizViewer.__docgenInfo={description:"",methods:[],displayName:"GraphvizViewer",props:{dot:{required:!0,tsType:{name:"string"},description:"A string containing a graph representation using the Graphviz DOT language.\r\n@see https://graphviz.org/doc/info/lang.html"},className:{required:!1,tsType:{name:"string"},description:"The classname to attach to this component for styling purposes."}}}}}]);