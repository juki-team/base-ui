"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[8557],{"./src/contexts/JukiProviders.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{JukiProviders:()=>JukiProviders});var react=__webpack_require__("./node_modules/react/index.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),useJukiUser=__webpack_require__("./src/hooks/useJukiUser.tsx"),context=__webpack_require__("./src/contexts/JukiLastPathProvider/context.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const JukiLastPathProvider=props=>{const{children,initialLastPath}=props,{user:{nickname}}=(0,useJukiUser.M)();context.A.current||(context.A.current=(0,context.V)(initialLastPath));const[lastPath,setLastPath]=(0,react.useState)(initialLastPath),value=(0,react.useMemo)((()=>({pushPath:_ref=>{let{key,pathname,searchParams}=_ref;return setLastPath((prevState=>(0,objectSpread2.A)((0,objectSpread2.A)({},prevState),{},{[key]:{pathname,searchParams}})))},lastPath})),[lastPath,setLastPath]);return(0,react.useEffect)((()=>{setLastPath(initialLastPath)}),[nickname]),(0,jsx_runtime.jsx)(context.A.current.Provider,{value,children})};try{JukiLastPathProvider.displayName="JukiLastPathProvider",JukiLastPathProvider.__docgenInfo={description:"",displayName:"JukiLastPathProvider",props:{initialLastPath:{defaultValue:null,description:"",name:"initialLastPath",required:!0,type:{name:"LastPathType<T>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiLastPathProvider/JukiLastPathProvider.tsx#JukiLastPathProvider"]={docgenInfo:JukiLastPathProvider.__docgenInfo,name:"JukiLastPathProvider",path:"src/contexts/JukiLastPathProvider/JukiLastPathProvider.tsx#JukiLastPathProvider"})}catch(__react_docgen_typescript_loader_error){}var JukiPageProvider_context=__webpack_require__("./src/contexts/JukiPageProvider/context.ts");const hasDocument="undefined"!=typeof document,vendorEvents=[{hidden:"hidden",event:"visibilitychange",state:"visibilityState"},{hidden:"webkitHidden",event:"webkitvisibilitychange",state:"webkitVisibilityState"},{hidden:"mozHidden",event:"mozvisibilitychange",state:"mozVisibilityState"},{hidden:"msHidden",event:"msvisibilitychange",state:"msVisibilityState"},{hidden:"oHidden",event:"ovisibilitychange",state:"oVisibilityState"}],isSupported=hasDocument&&Boolean(document.addEventListener),visibility=(()=>{if(!isSupported)return null;for(let event of vendorEvents)if(event.hidden in document)return event;return null})(),getHandlerArgs=()=>{if(!visibility)return[!0,"visible"];const{hidden,state}=visibility;return[!document[hidden],document[state]]},isSupportedLocal=isSupported&&visibility,JukiPageProvider=_ref=>{let{children}=_ref;const isOnline=(()=>{const[isOnline,setIsOnline]=(0,react.useState)(!0);return(0,react.useEffect)((()=>{var _window,_window2;const offline=()=>setIsOnline(!1),online=()=>setIsOnline(!0);return null===(_window=window)||void 0===_window||_window.addEventListener("offline",offline),null===(_window2=window)||void 0===_window2||_window2.addEventListener("online",online),()=>{var _window3,_window4;null===(_window3=window)||void 0===_window3||_window3.removeEventListener("offline",offline),null===(_window4=window)||void 0===_window4||_window4.removeEventListener("online",online)}}),[]),isOnline})(),isPageVisible=(()=>{const[initiallyVisible]=getHandlerArgs(),[isVisible,setIsVisible]=(0,react.useState)(initiallyVisible);return(0,react.useEffect)((()=>{if(isSupportedLocal){const handler=()=>{const[currentlyVisible]=getHandlerArgs();setIsVisible(currentlyVisible)};return document.addEventListener(null==visibility?void 0:visibility.event,handler),()=>{document.removeEventListener(null==visibility?void 0:visibility.event,handler)}}return()=>null}),[]),isVisible})(),isPageFocus=(()=>{const[isFocus,setIsFocus]=(0,react.useState)(!0);return(0,react.useEffect)((()=>{var _window,_window2;const handlerOnFocus=()=>setIsFocus(!0),handlerOnBlur=()=>setIsFocus(!1);return null===(_window=window)||void 0===_window||_window.addEventListener("focus",handlerOnFocus),null===(_window2=window)||void 0===_window2||_window2.addEventListener("blur",handlerOnBlur),()=>{var _window3,_window4;null===(_window3=window)||void 0===_window3||_window3.removeEventListener("focus",handlerOnFocus),null===(_window4=window)||void 0===_window4||_window4.removeEventListener("blur",handlerOnBlur)}}),[]),isFocus})(),value=(0,react.useMemo)((()=>({isOnline,isPageVisible,isPageFocus})),[isOnline,isPageVisible,isPageFocus]);return(0,jsx_runtime.jsx)(JukiPageProvider_context.N.Provider,{value,children})};try{JukiPageProvider.displayName="JukiPageProvider",JukiPageProvider.__docgenInfo={description:"",displayName:"JukiPageProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiPageProvider/JukiPageProvider.tsx#JukiPageProvider"]={docgenInfo:JukiPageProvider.__docgenInfo,name:"JukiPageProvider",path:"src/contexts/JukiPageProvider/JukiPageProvider.tsx#JukiPageProvider"})}catch(__react_docgen_typescript_loader_error){}var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),helpers=__webpack_require__("./src/helpers/index.ts"),JukiRouterProvider_context=__webpack_require__("./src/contexts/JukiRouterProvider/context.ts");const _excluded=["children","routeParams","pushRoute","replaceRoute","reloadRoute","pathname","isLoadingRoute"],getHref=href=>{var _href$searchParams;if("string"==typeof href)return href;const search=(null===(_href$searchParams=href.searchParams)||void 0===_href$searchParams?void 0:_href$searchParams.toString())||"";return"".concat(href.pathname).concat(search?"?"+search:"")},JukiRouterProvider=props=>{const{children,routeParams,pushRoute,replaceRoute,reloadRoute,pathname,isLoadingRoute}=props,router=(0,objectWithoutProperties.A)(props,_excluded),[_searchParams,_setSearchParams]=(0,react.useState)(new URLSearchParams("")),updateSearchParams=(0,react.useCallback)((newSearchParams=>{const newSearchParamsSorted=(0,helpers.b$)(newSearchParams),searchParamsSorted=(0,helpers.b$)(_searchParams);newSearchParams.sort(),searchParamsSorted.sort(),newSearchParamsSorted.toString()!==searchParamsSorted.toString()&&_setSearchParams(newSearchParams)}),[_searchParams]),appendSearchParams=(0,react.useCallback)((function(){const newSearchParams=(0,helpers.b$)(_searchParams);for(var _len=arguments.length,props=new Array(_len),_key=0;_key<_len;_key++)props[_key]=arguments[_key];for(const{name,value}of props)newSearchParams.append(name,value);updateSearchParams(newSearchParams)}),[_searchParams,updateSearchParams]),deleteSearchParams=(0,react.useCallback)((function(){const newSearchParams=(0,helpers.b$)(_searchParams);for(var _len2=arguments.length,props=new Array(_len2),_key2=0;_key2<_len2;_key2++)props[_key2]=arguments[_key2];for(const{name,value}of props){const values=newSearchParams.getAll(name);if(newSearchParams.delete(name),void 0!==value)for(const v of values)v!==value&&newSearchParams.append(name,v)}updateSearchParams(newSearchParams)}),[_searchParams,updateSearchParams]),setSearchParams=(0,react.useCallback)((function(){const newSearchParams=(0,helpers.b$)(_searchParams);for(var _len3=arguments.length,props=new Array(_len3),_key3=0;_key3<_len3;_key3++)props[_key3]=arguments[_key3];for(const{name,value}of props){newSearchParams.delete(name);let values=[];"string"==typeof value?values.push(value):values=value;for(const value of values)newSearchParams.append(name,value)}updateSearchParams(newSearchParams)}),[_searchParams,updateSearchParams]),[loaderCounter,setLoaderCounter]=(0,react.useState)(0),push=(0,react.useCallback)((async href=>{setLoaderCounter((prevState=>prevState+1));const result=await pushRoute(getHref(href));return setLoaderCounter((prevState=>prevState-1)),result}),[pushRoute]),replace=(0,react.useCallback)((async href=>{setLoaderCounter((prevState=>prevState+1));const result=await replaceRoute(getHref(href));return setLoaderCounter((prevState=>prevState-1)),result}),[replaceRoute]),reload=(0,react.useCallback)((async()=>{setLoaderCounter((prevState=>prevState+1));const result=await reloadRoute();return setLoaderCounter((prevState=>prevState-1)),result}),[reloadRoute]),value=(0,react.useMemo)((()=>(0,objectSpread2.A)((0,objectSpread2.A)({},Object.values(router).filter(Boolean).length?router:{searchParams:_searchParams,appendSearchParams,deleteSearchParams,setSearchParams}),{},{routeParams,pushRoute:push,replaceRoute:replace,reloadRoute:reload,isLoadingRoute:isLoadingRoute||!!loaderCounter,pathname})),[_searchParams,router.searchParams,router.appendSearchParams,router.deleteSearchParams,router.setSearchParams,routeParams,push,replace,reload,isLoadingRoute,loaderCounter,pathname]);return(0,jsx_runtime.jsx)(JukiRouterProvider_context.z.Provider,{value,children})};try{JukiRouterProvider.displayName="JukiRouterProvider",JukiRouterProvider.__docgenInfo={description:"",displayName:"JukiRouterProvider",props:{routeParams:{defaultValue:null,description:"",name:"routeParams",required:!0,type:{name:"ParsedUrlQuery"}},pushRoute:{defaultValue:null,description:"",name:"pushRoute",required:!0,type:{name:"RouterFn<string>"}},replaceRoute:{defaultValue:null,description:"",name:"replaceRoute",required:!0,type:{name:"RouterFn<string>"}},reloadRoute:{defaultValue:null,description:"",name:"reloadRoute",required:!0,type:{name:"RouterFn<void>"}},pathname:{defaultValue:null,description:"",name:"pathname",required:!0,type:{name:"string"}},isLoadingRoute:{defaultValue:null,description:"",name:"isLoadingRoute",required:!1,type:{name:"boolean"}},searchParams:{defaultValue:null,description:"",name:"searchParams",required:!0,type:{name:"URLSearchParams"}},appendSearchParams:{defaultValue:null,description:"",name:"appendSearchParams",required:!0,type:{name:"AppendSearchParamsType"}},setSearchParams:{defaultValue:null,description:"",name:"setSearchParams",required:!0,type:{name:"SetSearchParamsType"}},deleteSearchParams:{defaultValue:null,description:"",name:"deleteSearchParams",required:!0,type:{name:"DeleteSearchParamsType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiRouterProvider/JukiRouterProvider.tsx#JukiRouterProvider"]={docgenInfo:JukiRouterProvider.__docgenInfo,name:"JukiRouterProvider",path:"src/contexts/JukiRouterProvider/JukiRouterProvider.tsx#JukiRouterProvider"})}catch(__react_docgen_typescript_loader_error){}var esm=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),T=__webpack_require__("./src/components/atoms/T/index.ts"),hooks=__webpack_require__("./src/hooks/index.ts"),useJukiNotification=__webpack_require__("./src/hooks/useJukiNotification.tsx"),settings=__webpack_require__("./src/settings/index.ts"),JukiTasksProvider_context=__webpack_require__("./src/contexts/JukiTasksProvider/context.ts");const JukiTasksProvider=_ref=>{let{children}=_ref;const{addErrorNotification,addSuccessNotification}=(0,useJukiNotification.Eq)(),[submissions,setSubmissions]=(0,react.useState)({}),[submissionsToCheck,setSubmissionsToCheck]=(0,react.useState)([]),{user:{sessionId}}=(0,hooks.Mg)();(0,react.useEffect)((()=>{for(const{id,problem,contest}of submissionsToCheck){const submission=submissions[id],verdict=(null==submission?void 0:submission.verdict)||null,points=(null==submission?void 0:submission.points)||0,header=contest?(0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(T.T,{className:"tt-se",children:"contest"}),": ",contest.name]}),(0,jsx_runtime.jsxs)("div",{children:["(",contest.problemIndex,") ",problem.name]})]}):(0,jsx_runtime.jsx)("div",{children:problem.name});null!==verdict&&verdict!==esm.npq.PENDING&&(verdict===esm.npq.AC?addSuccessNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,(0,jsx_runtime.jsx)(T.T,{className:"tt-ce",children:esm.K7p[esm.npq.AC].label})]})):verdict===esm.npq.PA?addSuccessNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(T.T,{className:"tt-ce",children:esm.K7p[esm.npq.PA].label}),"&bnsp; (",points," ",(0,jsx_runtime.jsx)(T.T,{children:"pts."}),")"]})]})):Object.keys(esm.K7p).includes(verdict)?addErrorNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,(0,jsx_runtime.jsx)(T.T,{className:"tt-ce",children:esm.K7p[verdict].label})]})):addErrorNotification((0,jsx_runtime.jsxs)("div",{className:"jk-col",children:[header,verdict]})),setSubmissionsToCheck((prevState=>prevState.filter((_ref2=>{let{id:pId}=_ref2;return pId!==id})))))}}),[submissionsToCheck,submissions,addSuccessNotification,addErrorNotification]);const unListenSubmission=(0,react.useCallback)((submissionId=>{const event={event:esm.ad3.SUBSCRIBE_SUBMISSION_RUN_STATUS,sessionId,submitId:submissionId};settings.ug.SOCKET.unsubscribe(event)}),[sessionId]),listenSubmission=(0,react.useCallback)(((submissionToCheck,withNotification)=>{withNotification&&setSubmissionsToCheck((prevState=>[...prevState,submissionToCheck]));const event={event:esm.ad3.SUBSCRIBE_SUBMISSION_RUN_STATUS,sessionId,submitId:submissionToCheck.id};settings.ug.SOCKET.send(event,"",(data=>{if((0,esm.OwF)(data)){const nextStatus=data.status,submitId=data.submitId;setSubmissions((prevState=>{var _prevState$submitId;const submissionData=prevState[submitId],currentStatus=null===(_prevState$submitId=prevState[submitId])||void 0===_prevState$submitId?void 0:_prevState$submitId.status;return submissionData?data.messageTimestamp>submissionData.messageTimestamp?(0,objectSpread2.A)((0,objectSpread2.A)({},prevState),{},{[submitId]:data}):[esm.aeR.COMPILING,esm.aeR.COMPILED,esm.aeR.FAILED].includes(nextStatus)&&data.messageTimestamp>submissionData.messageTimestamp?(0,objectSpread2.A)((0,objectSpread2.A)({},prevState),{},{[submitId]:data}):[esm.aeR.FETCHING_TEST_CASES,esm.aeR.RUNNING_SAMPLE_TEST_CASES,esm.aeR.RUNNING_TEST_CASES,esm.aeR.EXECUTED_TEST_CASE].includes(nextStatus)&&[esm.aeR.COMPILING,esm.aeR.COMPILED,esm.aeR.FAILED,esm.aeR.FETCHING_TEST_CASES,esm.aeR.RUNNING_SAMPLE_TEST_CASES,esm.aeR.RUNNING_TEST_CASES,esm.aeR.EXECUTED_TEST_CASE].includes(currentStatus)&&data.messageTimestamp>submissionData.messageTimestamp?(0,objectSpread2.A)((0,objectSpread2.A)({},prevState),{},{[submitId]:(0,objectSpread2.A)({},data)}):[esm.aeR.GRADING,esm.aeR.COMPLETED].includes(nextStatus)&&[esm.aeR.RECEIVED,esm.aeR.COMPILING,esm.aeR.COMPILED,esm.aeR.FAILED,esm.aeR.FETCHING_TEST_CASES,esm.aeR.RUNNING_SAMPLE_TEST_CASES,esm.aeR.RUNNING_TEST_CASES,esm.aeR.EXECUTED_TEST_CASE,esm.aeR.GRADING].includes(currentStatus)?(0,objectSpread2.A)((0,objectSpread2.A)({},prevState),{},{[submitId]:data}):prevState:(0,objectSpread2.A)((0,objectSpread2.A)({},prevState),{},{[submitId]:data})}))}}))}),[sessionId]);return(0,jsx_runtime.jsx)(JukiTasksProvider_context.s.Provider,{value:{unListenSubmission,listenSubmission,submissions},children})};try{JukiTasksProvider.displayName="JukiTasksProvider",JukiTasksProvider.__docgenInfo={description:"",displayName:"JukiTasksProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiTasksProvider/JukiTasksProvider.tsx#JukiTasksProvider"]={docgenInfo:JukiTasksProvider.__docgenInfo,name:"JukiTasksProvider",path:"src/contexts/JukiTasksProvider/JukiTasksProvider.tsx#JukiTasksProvider"})}catch(__react_docgen_typescript_loader_error){}var MotionConfig=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/components/MotionConfig/index.mjs"),loaders=__webpack_require__("./src/components/atoms/loaders/index.ts"),layouts=__webpack_require__("./src/components/molecules/layouts/index.tsx"),NotificationProvider=__webpack_require__("./src/components/organisms/Notifications/NotificationProvider.tsx"),types=__webpack_require__("./src/types/index.ts"),Notifications_context=__webpack_require__("./src/components/organisms/Notifications/context.tsx");function SoundProvider(_ref){let{children}=_ref;const[sounds,setSounds]=(0,react.useState)(null);return(0,react.useEffect)((()=>{setSounds({[types.AB.CLICK]:new Audio("https://files.juki.pub/sounds/click.wav"),[types.AB.SUCCESS]:new Audio("https://files.juki.pub/sounds/success.mp3"),[types.AB.ERROR]:new Audio("https://files.juki.pub/sounds/error.mp3"),[types.AB.NOTIFICATION]:new Audio("https://files.juki.pub/sounds/notification.wav"),[types.AB.WARNING]:new Audio("https://files.juki.pub/sounds/warning.mp3"),[types.AB.MESSAGE]:new Audio("https://files.juki.pub/sounds/message.mp3"),[types.AB.POP]:new Audio("https://files.juki.pub/sounds/pop.wav"),[types.AB.BELL]:new Audio("https://files.juki.pub/sounds/bell.mp3")})}),[]),(0,jsx_runtime.jsx)(Notifications_context.j.Provider,{value:{sounds},children})}try{SoundProvider.displayName="SoundProvider",SoundProvider.__docgenInfo={description:"",displayName:"SoundProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/Notifications/SoundProvider.tsx#SoundProvider"]={docgenInfo:SoundProvider.__docgenInfo,name:"SoundProvider",path:"src/components/organisms/Notifications/SoundProvider.tsx#SoundProvider"})}catch(__react_docgen_typescript_loader_error){}var useJukiRouter=__webpack_require__("./src/hooks/useJukiRouter.tsx"),JukiUIProvider_context=__webpack_require__("./src/contexts/JukiUIProvider/context.ts"),Image=__webpack_require__("./src/contexts/JukiUIProvider/Image.tsx"),Link=__webpack_require__("./src/contexts/JukiUIProvider/Link.tsx");const JukiUIProvider_excluded=["href"],ReactTooltip=(0,react.lazy)((()=>__webpack_require__.e(4060).then(__webpack_require__.bind(__webpack_require__,"./node_modules/react-tooltip/dist/react-tooltip.min.mjs")).then((module=>({default:module.Tooltip}))))),JukiUIProvider=_ref=>{let{children,components}=_ref;const{viewPortSize,viewPortHeight,viewPortWidth}=(()=>{const[viewPortSize,setViewPortSize]=(0,react.useState)(""),[viewPortWidth,setViewPortWidth]=(0,react.useState)(0),[viewPortHeight,setViewPortHeight]=(0,react.useState)(0);return(0,react.useEffect)((()=>{var _window;const listener=()=>{var _document;const vh=.01*window.innerHeight;null===(_document=document)||void 0===_document||_document.documentElement.style.setProperty("--vh","".concat(vh,"px"));const width=window.innerWidth,height=window.innerHeight;setViewPortWidth(width),setViewPortHeight(height),setViewPortSize(width>=1920?"hg":width>=1280?"lg":width>=640?"md":"sm")};return listener(),null===(_window=window)||void 0===_window||_window.addEventListener("resize",listener),()=>{var _window2;null===(_window2=window)||void 0===_window2||_window2.removeEventListener("resize",listener)}}),[]),{viewPortSize,viewPortWidth,viewPortHeight}})(),{searchParams}=(0,useJukiRouter.u)(),{Image:ImageCmp=Image._,Link:LinkCMP=Link.N}=components||{Image:Image._,Link:Link.N},{isLoadingRoute}=(0,useJukiRouter.u)(),ref=(0,react.useRef)(null),LinkCmp=(0,react.useCallback)((_ref2=>{let pathname,sp,{href}=_ref2,restProps=(0,objectWithoutProperties.A)(_ref2,JukiUIProvider_excluded);if("string"==typeof href){const[p,s]=href.split("?");pathname=p,sp=new URLSearchParams(s)}else pathname=href.pathname,sp=new URLSearchParams("?"+(href.query||""));const token=searchParams.get(types.rs.TOKEN);token&&sp.set(types.rs.TOKEN,token);const company=searchParams.get(types.rs.COMPANY);return company&&sp.set(types.rs.COMPANY,company),(0,jsx_runtime.jsx)(LinkCMP,(0,objectSpread2.A)({href:{pathname,query:sp.toString()}},restProps))}),[LinkCMP,searchParams]),value=(0,react.useMemo)((()=>({jukiAppDivRef:ref,viewPortSize,viewPortHeight,viewPortWidth,components:{Image:ImageCmp,Link:LinkCmp}})),[viewPortSize,viewPortHeight,viewPortWidth,ImageCmp,LinkCmp]);return(0,jsx_runtime.jsx)(MotionConfig.x,{transition:{duration:types.dw.NORMAL},children:(0,jsx_runtime.jsx)(JukiUIProvider_context._.Provider,{value,children:(0,jsx_runtime.jsx)(SoundProvider,{children:(0,jsx_runtime.jsxs)(NotificationProvider.p,{children:[isLoadingRoute&&(0,jsx_runtime.jsx)("div",{className:"page-line-loader",children:(0,jsx_runtime.jsx)(loaders.Q,{delay:800})}),(0,jsx_runtime.jsxs)("div",{id:"juki-app",className:(0,helpers.xW)({"loading-route":isLoadingRoute}),ref,children:[children,(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsxs)(layouts.Q,{children:[(0,jsx_runtime.jsx)(T.T,{className:"tt-se",children:"loading component"}),"..."]}),children:(0,jsx_runtime.jsx)(ReactTooltip,{id:"jk-tooltip",opacity:1,positionStrategy:"fixed",clickable:!0,render:_ref3=>{let{content,activeAnchor}=_ref3;return content?(0,jsx_runtime.jsx)(T.T,{className:(null==activeAnchor?void 0:activeAnchor.getAttribute("data-tooltip-t-class-name"))||"tt-se tx-s",children:content}):null}})})]})]})})})})};try{JukiUIProvider.displayName="JukiUIProvider",JukiUIProvider.__docgenInfo={description:"",displayName:"JukiUIProvider",props:{components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"Partial<UIComponentsContextInterface>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiUIProvider/JukiUIProvider.tsx#JukiUIProvider"]={docgenInfo:JukiUIProvider.__docgenInfo,name:"JukiUIProvider",path:"src/contexts/JukiUIProvider/JukiUIProvider.tsx#JukiUIProvider"})}catch(__react_docgen_typescript_loader_error){}var lib=__webpack_require__("./node_modules/react-device-detect/dist/lib.js"),constants=__webpack_require__("./src/constants/index.ts"),useFetcher=__webpack_require__("./src/hooks/useFetcher.ts"),JukiUserProvider_context=__webpack_require__("./src/contexts/JukiUserProvider/context.ts");const JukiUserProvider=props=>{var _user$settings;const{children}=props,token=settings.ug.getToken(),{user,company,setUser,isLoading,mutate}=(()=>{const{data,isLoading:isLoadingPing,isValidating,mutate}=(0,useFetcher.L)(settings.ug.API_V1.auth.ping().url,{refreshInterval:3e5}),[user,_setUser]=(0,react.useState)(constants.GO),[company,setCompany]=(0,react.useState)(constants.Ik),i18n=settings.mg.getI18n(),setUser=(0,react.useCallback)((user=>{var _i18n$changeLanguage2;"function"==typeof user?_setUser((prevState=>{var _i18n$changeLanguage;const newUser=user(prevState);return null===(_i18n$changeLanguage=i18n.changeLanguage)||void 0===_i18n$changeLanguage||_i18n$changeLanguage.call(i18n,newUser.settings[esm.mZ_.LANGUAGE]),newUser})):(_setUser(user),null===(_i18n$changeLanguage2=i18n.changeLanguage)||void 0===_i18n$changeLanguage2||_i18n$changeLanguage2.call(i18n,user.settings[esm.mZ_.LANGUAGE]))}),[_setUser,i18n]);(0,react.useEffect)((()=>{let preferredLanguage=localStorage.getItem(esm.mZ_.LANGUAGE);preferredLanguage!==esm.TMK.EN&&preferredLanguage!==esm.TMK.ES&&(preferredLanguage=esm.TMK.EN);let preferredTheme=localStorage.getItem(esm.mZ_.THEME);preferredTheme!==esm.Sxu.DARK&&preferredTheme!==esm.Sxu.LIGHT&&(preferredTheme=esm.Sxu.LIGHT),null!=data&&data.success?(setCompany(data.content.company),data.content.user.isLogged?setUser(null==data?void 0:data.content.user):setUser((0,objectSpread2.A)((0,objectSpread2.A)({},null==data?void 0:data.content.user),{},{settings:{[esm.mZ_.THEME]:preferredTheme,[esm.mZ_.LANGUAGE]:preferredLanguage,[esm.mZ_.DATA_VIEW_MODE]:esm.pln.ROWS,[esm.mZ_.MENU_VIEW_MODE]:esm.MDi.VERTICAL,[esm.mZ_.NEWSLETTER_SUBSCRIPTION]:!0}})),helpers.WW.setItem(settings.ug.TOKEN_NAME,null==data?void 0:data.content.user.sessionId)):setUser((0,objectSpread2.A)((0,objectSpread2.A)({},constants.GO),{},{settings:{[esm.mZ_.THEME]:preferredTheme,[esm.mZ_.LANGUAGE]:preferredLanguage,[esm.mZ_.DATA_VIEW_MODE]:esm.pln.ROWS,[esm.mZ_.MENU_VIEW_MODE]:esm.MDi.VERTICAL,[esm.mZ_.NEWSLETTER_SUBSCRIPTION]:!0}}))}),[data,setUser]);const isLoading=isLoadingPing||""===company.key;return{user,company,setUser,isLoading,isValidating:isLoading||isValidating,mutate}})();(0,react.useEffect)((()=>(settings.ug.SOCKET.start(),()=>{settings.ug.SOCKET.stop()})),[token]);const device=(0,react.useMemo)((()=>({type:lib.RX,isMobile:!1,isBrowser:!1,label:lib.Fr?"".concat(lib._0," ").concat(lib.zn):"".concat(lib.C0," ").concat(lib.n5),osLabel:"".concat(lib.wH," ").concat(lib.B4)})),[]),value=(0,react.useMemo)((()=>({user,company,isLoading,device,setUser,mutate})),[user,company,isLoading,device,setUser,mutate]),userTheme=null===(_user$settings=user.settings)||void 0===_user$settings?void 0:_user$settings[esm.mZ_.THEME];return(0,react.useEffect)((()=>{var _document$querySelect,_document$querySelect2,_document$querySelect3,_document$querySelect4;"undefined"!=typeof document&&(null===(_document$querySelect=document.querySelector("body"))||void 0===_document$querySelect||_document$querySelect.classList.remove("jk-theme-dark"),null===(_document$querySelect2=document.querySelector("body"))||void 0===_document$querySelect2||_document$querySelect2.classList.remove("jk-theme-light"),userTheme===esm.Sxu.DARK?null===(_document$querySelect3=document.querySelector("body"))||void 0===_document$querySelect3||_document$querySelect3.classList.add("jk-theme-dark"):null===(_document$querySelect4=document.querySelector("body"))||void 0===_document$querySelect4||_document$querySelect4.classList.add("jk-theme-light"))}),[userTheme]),(0,jsx_runtime.jsx)(JukiUserProvider_context.R.Provider,{value,children})};try{JukiUserProvider.displayName="JukiUserProvider",JukiUserProvider.__docgenInfo={description:"",displayName:"JukiUserProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiUserProvider/JukiUserProvider.tsx#JukiUserProvider"]={docgenInfo:JukiUserProvider.__docgenInfo,name:"JukiUserProvider",path:"src/contexts/JukiUserProvider/JukiUserProvider.tsx#JukiUserProvider"})}catch(__react_docgen_typescript_loader_error){}const JukiProviders=props=>{const{children,components,router,initialLastPath}=props;return(0,jsx_runtime.jsx)(JukiPageProvider,{children:(0,jsx_runtime.jsx)(JukiRouterProvider,{searchParams:router.searchParams,appendSearchParams:router.appendSearchParams,setSearchParams:router.setSearchParams,deleteSearchParams:router.deleteSearchParams,routeParams:router.routeParams,pushRoute:router.pushRoute,replaceRoute:router.replaceRoute,reloadRoute:router.reloadRoute,isLoadingRoute:router.isLoadingRoute,pathname:router.pathname,children:(0,jsx_runtime.jsx)(JukiUserProvider,{children:(0,jsx_runtime.jsx)(JukiUIProvider,{components,children:(0,jsx_runtime.jsx)(JukiLastPathProvider,{initialLastPath,children:(0,jsx_runtime.jsx)(JukiTasksProvider,{children})})})})})})};try{JukiProviders.displayName="JukiProviders",JukiProviders.__docgenInfo={description:"",displayName:"JukiProviders",props:{components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"Partial<UIComponentsContextInterface>"}},initialLastPath:{defaultValue:null,description:"",name:"initialLastPath",required:!0,type:{name:"LastPathType<T>"}},router:{defaultValue:null,description:"",name:"router",required:!0,type:{name:"{ searchParams: URLSearchParams; appendSearchParams: AppendSearchParamsType; setSearchParams: SetSearchParamsType; ... 6 more ...; isLoadingRoute?: boolean | undefined; } | { ...; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/JukiProviders.tsx#JukiProviders"]={docgenInfo:JukiProviders.__docgenInfo,name:"JukiProviders",path:"src/contexts/JukiProviders.tsx#JukiProviders"})}catch(__react_docgen_typescript_loader_error){}}}]);