"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[47],{"./src/components/molecules/ImageLoaderCropper/ImageLoaderCropper.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ImageLoaderCropper:()=>ImageLoaderCropper});var react=__webpack_require__("./node_modules/react/index.js");const M={x:0,y:0,width:0,height:0,unit:"px"},v=(o,e,t)=>Math.min(Math.max(o,e),t),Y=(o,e)=>o===e||o.width===e.width&&o.height===e.height&&o.x===e.x&&o.y===e.y&&o.unit===e.unit;function D(o,e,t){return"%"===o.unit?{...M,...o,unit:"%"}:{unit:"%",x:o.x?o.x/e*100:0,y:o.y?o.y/t*100:0,width:o.width?o.width/e*100:0,height:o.height?o.height/t*100:0}}function y(o,e,t){return o.unit?"px"===o.unit?{...M,...o,unit:"px"}:{unit:"px",x:o.x?o.x*e/100:0,y:o.y?o.y*t/100:0,width:o.width?o.width*e/100:0,height:o.height?o.height*t/100:0}:{...M,...o,unit:"px"}}function P(o,e,t,h,i,n=0,s=0,w=h,a=i){const r={...o};let c=Math.min(n,h),d=Math.min(s,i),g=Math.min(w,h),l=Math.min(a,i);e&&(e>1?(c=s?s*e:c,d=c/e,g=w*e):(d=n?n/e:d,c=d*e,l=a/e)),r.y<0&&(r.height=Math.max(r.height+r.y,d),r.y=0),r.x<0&&(r.width=Math.max(r.width+r.x,c),r.x=0);const m=h-(r.x+r.width);m<0&&(r.x=Math.min(r.x,h-c),r.width+=m);const x=i-(r.y+r.height);if(x<0&&(r.y=Math.min(r.y,i-d),r.height+=x),r.width<c&&(("sw"===t||"nw"==t)&&(r.x-=c-r.width),r.width=c),r.height<d&&(("nw"===t||"ne"==t)&&(r.y-=d-r.height),r.height=d),r.width>g&&(("sw"===t||"nw"==t)&&(r.x-=g-r.width),r.width=g),r.height>l&&(("nw"===t||"ne"==t)&&(r.y-=l-r.height),r.height=l),e){const b=r.width/r.height;if(b<e){const C=Math.max(r.width/e,d);("nw"===t||"ne"==t)&&(r.y-=C-r.height),r.height=C}else if(b>e){const C=Math.max(r.height*e,c);("sw"===t||"nw"==t)&&(r.x-=C-r.width),r.width=C}}return r}const f={capture:!0,passive:!1};let $=0;const u=class u extends react.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=(0,react.createRef)(),this.mediaRef=(0,react.createRef)(),this.initChangeCalled=!1,this.instanceId="rc-"+$++,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:h}=this.props,i=this.getBox();if(!t)return;const n=y(t,i.width,i.height);if(h)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const s=e.target.dataset.ord,w=!!s;let a=e.clientX,r=e.clientY,c=n.x,d=n.y;if(s){const g=e.clientX-i.x,l=e.clientY-i.y;let m=0,x=0;"ne"===s||"e"==s?(m=g-(n.x+n.width),x=l-n.y,c=n.x,d=n.y+n.height):"se"===s||"s"===s?(m=g-(n.x+n.width),x=l-(n.y+n.height),c=n.x,d=n.y):"sw"===s||"w"==s?(m=g-n.x,x=l-(n.y+n.height),c=n.x+n.width,d=n.y):("nw"===s||"n"==s)&&(m=g-n.x,x=l-n.y,c=n.x+n.width,d=n.y+n.height),a=c+i.x+m,r=d+i.y+x}this.evData={startClientX:a,startClientY:r,startCropX:c,startCropY:d,clientX:e.clientX,clientY:e.clientY,isResize:w,ord:s},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:h,locked:i,keepSelection:n,onChange:s}=this.props,w=this.getBox();if(h||i||n&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const a=e.clientX-w.x,r=e.clientY-w.y,c={unit:"px",x:a,y:r,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:a,startCropY:r,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,s(y(c,w.width,w.height),D(c,w.width,w.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:h,onChange:i,onDragStart:n}=this.props,s=this.getBox();if(h||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,n&&n(e));const{evData:w}=this;let a;w.clientX=e.clientX,w.clientY=e.clientY,a=w.isResize?this.resizeCrop():this.dragCrop(),Y(t,a)||i(y(a,s.width,s.height),D(a,s.width,s.height))},this.onComponentKeyDown=e=>{const{crop:t,disabled:h,onChange:i,onComplete:n}=this.props;if(h)return;const s=e.key;let w=!1;if(!t)return;const a=this.getBox(),r=this.makePixelCrop(a),d=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?u.nudgeStepLarge:e.shiftKey?u.nudgeStepMedium:u.nudgeStep;if("ArrowLeft"===s?(r.x-=d,w=!0):"ArrowRight"===s?(r.x+=d,w=!0):"ArrowUp"===s?(r.y-=d,w=!0):"ArrowDown"===s&&(r.y+=d,w=!0),w){e.cancelable&&e.preventDefault(),r.x=v(r.x,0,a.width-r.width),r.y=v(r.y,0,a.height-r.height);const g=y(r,a.width,a.height),l=D(r,a.width,a.height);i(g,l),n&&n(g,l)}},this.onHandlerKeyDown=(e,t)=>{const{aspect:h=0,crop:i,disabled:n,minWidth:s=0,minHeight:w=0,maxWidth:a,maxHeight:r,onChange:c,onComplete:d}=this.props,g=this.getBox();if(n||!i)return;if("ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;e.stopPropagation(),e.preventDefault();const m=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?u.nudgeStepLarge:e.shiftKey?u.nudgeStepMedium:u.nudgeStep,b=function _(o,e,t,h){const i={...o};return"ArrowLeft"===e?"nw"===h?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):"w"===h?(i.x-=t,i.width+=t):"sw"===h?(i.x-=t,i.width+=t,i.height+=t):"ne"===h?(i.y+=t,i.width-=t,i.height-=t):"e"===h?i.width-=t:"se"===h&&(i.width-=t,i.height-=t):"ArrowRight"===e&&("nw"===h?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):"w"===h?(i.x+=t,i.width-=t):"sw"===h?(i.x+=t,i.width-=t,i.height-=t):"ne"===h?(i.y-=t,i.width+=t,i.height+=t):"e"===h?i.width+=t:"se"===h&&(i.width+=t,i.height+=t)),"ArrowUp"===e?"nw"===h?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):"n"===h?(i.y-=t,i.height+=t):"ne"===h?(i.y-=t,i.width+=t,i.height+=t):"sw"===h?(i.x+=t,i.width-=t,i.height-=t):"s"===h?i.height-=t:"se"===h&&(i.width-=t,i.height-=t):"ArrowDown"===e&&("nw"===h?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):"n"===h?(i.y+=t,i.height-=t):"ne"===h?(i.y+=t,i.width-=t,i.height-=t):"sw"===h?(i.x-=t,i.width+=t,i.height+=t):"s"===h?i.height+=t:"se"===h&&(i.width+=t,i.height+=t)),i}(y(i,g.width,g.height),e.key,m,t),C=P(b,h,t,g.width,g.height,s,w,a,r);if(!Y(i,C)){const R=D(C,g.width,g.height);c(C,R),d&&d(C,R)}},this.onDocPointerDone=e=>{const{crop:t,disabled:h,onComplete:i,onDragEnd:n}=this.props,s=this.getBox();this.unbindDocMove(),!h&&t&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,n&&n(e),i&&i(y(t,s.width,s.height),D(t,s.width,s.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var e;null==(e=this.componentRef.current)||e.scrollTo(0,0)}}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:h,width:i,height:n}=e.getBoundingClientRect();return{x:t,y:h,width:i,height:n}}componentDidUpdate(e){const{crop:t,onComplete:h}=this.props;if(h&&!e.crop&&t){const{width:i,height:n}=this.getBox();i&&n&&h(y(t,i,n),D(t,i,n))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,f),this.document.addEventListener("pointerup",this.onDocPointerDone,f),this.document.addEventListener("pointercancel",this.onDocPointerDone,f),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,f),this.document.removeEventListener("pointerup",this.onDocPointerDone,f),this.document.removeEventListener("pointercancel",this.onDocPointerDone,f),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),h=this.makePixelCrop(t),i=e.clientX-e.startClientX,n=e.clientY-e.startClientY;return h.x=v(e.startCropX+i,0,t.width-h.width),h.y=v(e.startCropY+n,0,t.height-h.height),h}getPointRegion(e,t,h,i){const{evData:n}=this,s=n.clientX-e.x,w=n.clientY-e.y;let a,r;return a=i&&t?"nw"===t||"n"===t||"ne"===t:w<n.startCropY,r=h&&t?"nw"===t||"w"===t||"sw"===t:s<n.startCropX,r?a?"nw":"sw":a?"ne":"se"}resolveMinDimensions(e,t,h=0,i=0){const n=Math.min(h,e.width),s=Math.min(i,e.height);return t&&(n||s)?t>1?n?[n,n/t]:[s*t,s]:s?[s*t,s]:[n,n/t]:[n,s]}resizeCrop(){const{evData:e}=this,{aspect:t=0,maxWidth:h,maxHeight:i}=this.props,n=this.getBox(),[s,w]=this.resolveMinDimensions(n,t,this.props.minWidth,this.props.minHeight);let a=this.makePixelCrop(n);const r=this.getPointRegion(n,e.ord,s,w),c=e.ord||r;let d=e.clientX-e.startClientX,g=e.clientY-e.startClientY;(s&&"nw"===c||"w"===c||"sw"===c)&&(d=Math.min(d,-s)),(w&&"nw"===c||"n"===c||"ne"===c)&&(g=Math.min(g,-w));const l={unit:"px",x:0,y:0,width:0,height:0};"ne"===r?(l.x=e.startCropX,l.width=d,t?(l.height=l.width/t,l.y=e.startCropY-l.height):(l.height=Math.abs(g),l.y=e.startCropY-l.height)):"se"===r?(l.x=e.startCropX,l.y=e.startCropY,l.width=d,l.height=t?l.width/t:g):"sw"===r?(l.x=e.startCropX+d,l.y=e.startCropY,l.width=Math.abs(d),l.height=t?l.width/t:g):"nw"===r&&(l.x=e.startCropX+d,l.width=Math.abs(d),t?(l.height=l.width/t,l.y=e.startCropY-l.height):(l.height=Math.abs(g),l.y=e.startCropY+g));const m=P(l,t,r,n.width,n.height,s,w,h,i);return t||u.xyOrds.indexOf(c)>-1?a=m:u.xOrds.indexOf(c)>-1?(a.x=m.x,a.width=m.width):u.yOrds.indexOf(c)>-1&&(a.y=m.y,a.height=m.height),a.x=v(a.x,0,n.width-a.width),a.y=v(a.y,0,n.height-a.height),a}renderCropSelection(){const{ariaLabels:e=u.defaultProps.ariaLabels,disabled:t,locked:h,renderSelectionAddon:i,ruleOfThirds:n,crop:s}=this.props,w=this.getCropStyle();if(s)return react.createElement("div",{style:w,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!h&&react.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},react.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),react.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),react.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),react.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),react.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"nw"),role:"button"}),react.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"n"),role:"button"}),react.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"ne"),role:"button"}),react.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"e"),role:"button"}),react.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"se"),role:"button"}),react.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"s"),role:"button"}),react.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"sw"),role:"button"}),react.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:a=>this.onHandlerKeyDown(a,"w"),role:"button"})),i&&react.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:a=>a.stopPropagation()},i(this.state)),n&&react.createElement(react.Fragment,null,react.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),react.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){return y({...M,...this.props.crop||{}},e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:h,className:i,crop:n,disabled:s,locked:w,style:a,ruleOfThirds:r}=this.props,{cropIsActive:c,newCropIsBeingDrawn:d}=this.state,g=n?this.renderCropSelection():null,l=((...o)=>o.filter((e=>e&&"string"==typeof e)).join(" "))("ReactCrop",i,c&&"ReactCrop--active",s&&"ReactCrop--disabled",w&&"ReactCrop--locked",d&&"ReactCrop--new-crop",n&&e&&"ReactCrop--fixed-aspect",n&&h&&"ReactCrop--circular-crop",n&&r&&"ReactCrop--rule-of-thirds",!this.dragStarted&&n&&!n.width&&!n.height&&"ReactCrop--invisible-crop",h&&"ReactCrop--no-animate");return react.createElement("div",{ref:this.componentRef,className:l,style:a},react.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),n?react.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},react.createElement("defs",null,react.createElement("mask",{id:`hole-${this.instanceId}`},react.createElement("rect",{width:"100%",height:"100%",fill:"white"}),h?react.createElement("ellipse",{cx:`${n.x+n.width/2}${n.unit}`,cy:`${n.y+n.height/2}${n.unit}`,rx:`${n.width/2}${n.unit}`,ry:`${n.height/2}${n.unit}`,fill:"black"}):react.createElement("rect",{x:`${n.x}${n.unit}`,y:`${n.y}${n.unit}`,width:`${n.width}${n.unit}`,height:`${n.height}${n.unit}`,fill:"black"}))),react.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,g)}};u.xOrds=["e","w"],u.yOrds=["n","s"],u.xyOrds=["nw","ne","se","sw"],u.nudgeStep=1,u.nudgeStepMedium=10,u.nudgeStepLarge=100,u.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let X=u;var hooks=__webpack_require__("./src/hooks/index.ts"),atoms=__webpack_require__("./src/components/atoms/index.ts");const TO_RADIANS=Math.PI/180;var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function centerAspectCrop(mediaWidth,mediaHeight,aspect){return function I(o,e,t){const h=y(o,e,t);return h.x=(e-h.width)/2,h.y=(t-h.height)/2,"%"===o.unit?D(h,e,t):h}(function H(o,e,t,h){const i=y(o,t,h);return o.width&&(i.height=i.width/e),o.height&&(i.width=i.height*e),i.y+i.height>h&&(i.height=h-i.y,i.width=i.height*e),i.x+i.width>t&&(i.width=t-i.x,i.height=i.width/e),"%"===o.unit?D(i,t,h):i}({unit:"%",width:90},aspect,mediaWidth,mediaHeight),mediaWidth,mediaHeight)}const ImageLoaderCropper=props=>{const{defaultCrop,onCropChange,aspect:initialAspect,scale:initialScale,rotate:initialRotate,circularCrop,withAspect,withRotate,withScale}=props,[imgSrc,setImgSrc]=(0,react.useState)(""),previewCanvasRef=(0,react.useRef)(null),imgRef=(0,react.useRef)(null),[crop,setCrop]=(0,react.useState)(defaultCrop),[completedCrop,setCompletedCrop]=(0,react.useState)(),[scale,setScale]=(0,hooks.Xk)(1,initialScale),[rotate,setRotate]=(0,hooks.Xk)(0,initialRotate),[aspect,setAspect]=(0,react.useState)(initialAspect||void 0),[aspectText,setAspectText]=(0,react.useState)((aspect||"")+""),updateAspect=aspect=>{if(aspect){if(imgRef.current){const{width,height}=imgRef.current;setAspect(aspect);const crop=centerAspectCrop(width,height,aspect);setCrop(crop),setCompletedCrop(y(crop,width,height))}}else setAspect(void 0)};return(0,react.useEffect)((()=>{updateAspect(initialAspect),setAspectText((initialAspect||"")+"")}),[initialAspect]),(0,react.useEffect)((()=>updateAspect(aspect)),[aspect]),(0,hooks.Wj)((async()=>{null!=completedCrop&&completedCrop.width&&null!=completedCrop&&completedCrop.height&&imgRef.current&&previewCanvasRef.current&&await async function canvasPreview(image,canvas,crop){let scale=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,rotate=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const ctx=canvas.getContext("2d");if(!ctx)throw new Error("No 2d context");const scaleX=image.naturalWidth/image.width,scaleY=image.naturalHeight/image.height,pixelRatio=window.devicePixelRatio;canvas.width=Math.floor(crop.width*scaleX*pixelRatio),canvas.height=Math.floor(crop.height*scaleY*pixelRatio),ctx.scale(pixelRatio,pixelRatio),ctx.imageSmoothingQuality="high";const cropX=crop.x*scaleX,cropY=crop.y*scaleY,rotateRads=rotate*TO_RADIANS,centerX=image.naturalWidth/2,centerY=image.naturalHeight/2;ctx.save(),ctx.translate(-cropX,-cropY),ctx.translate(centerX,centerY),ctx.rotate(rotateRads),ctx.scale(scale,scale),ctx.translate(-centerX,-centerY),ctx.drawImage(image,0,0,image.naturalWidth,image.naturalHeight,0,0,image.naturalWidth,image.naturalHeight),ctx.globalCompositeOperation="destination-in",ctx.beginPath(),ctx.restore()}(imgRef.current,previewCanvasRef.current,completedCrop,scale,rotate)}),100,[completedCrop,scale,rotate]),(0,react.useEffect)((()=>{if(previewCanvasRef.current&&completedCrop&&imgRef.current){const{width,height}=imgRef.current;null==onCropChange||onCropChange({percentCrop:D(completedCrop,width,height),pixelCrop:completedCrop,previewCanvasRef,scale,rotate,circularCrop:!!circularCrop,aspect})}}),[completedCrop,scale,rotate,onCropChange,circularCrop,aspect]),(0,jsx_runtime.jsxs)("div",{className:"image-loader-cropper-layout jk-col gap",children:[(0,jsx_runtime.jsxs)("div",{className:"jk-row space-between gap nowrap",children:[(0,jsx_runtime.jsx)(atoms.pde,{type:"file",accept:"image/*",onChange:function onSelectFile(files){if((null==files?void 0:files.length)>0){setCrop(void 0);const reader=new FileReader;reader.addEventListener("load",(()=>{var _reader$result;return setImgSrc((null===(_reader$result=reader.result)||void 0===_reader$result?void 0:_reader$result.toString())||"")})),reader.readAsDataURL(files[0])}}}),withScale&&(0,jsx_runtime.jsx)(atoms.pde,{labelPlacement:"left",label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"scale"}),type:"number",step:.1,value:scale,disabled:!imgSrc,size:"auto",onChange:setScale}),withRotate&&(0,jsx_runtime.jsx)(atoms.pde,{labelPlacement:"left",label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"rotate"}),type:"number",value:rotate,disabled:!imgSrc,size:"auto",onChange:value=>setRotate(Math.min(180,Math.max(-180,value)))}),withAspect&&(0,jsx_runtime.jsx)(atoms.pde,{labelPlacement:"left",label:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"aspect"}),type:"text",value:aspectText,disabled:!imgSrc,size:"auto",onChange:value=>{setAspectText(value);const values=null==value?void 0:value.split("/"),aspect=+values[0]/+(values[1]||1);Number.isNaN(aspect)||setAspect(aspect)}})]}),Boolean(imgSrc)&&(0,jsx_runtime.jsx)(X,{crop,onChange:(_,percentCrop)=>setCrop(percentCrop),onComplete:c=>setCompletedCrop(c),aspect,circularCrop,children:(0,jsx_runtime.jsx)("img",{ref:imgRef,alt:"Crop me",src:imgSrc,style:{transform:"scale(".concat(scale,") rotate(").concat(rotate,"deg)")},onLoad:function onImageLoad(e){const{width,height}=e.currentTarget;setCrop(aspect?centerAspectCrop(width,height,aspect):{width:100,height:100,y:0,x:0,unit:"%"})}})}),(0,jsx_runtime.jsx)("div",{style:{display:"none"},children:!!completedCrop&&(0,jsx_runtime.jsx)("canvas",{ref:previewCanvasRef})})]})};try{ImageLoaderCropper.displayName="ImageLoaderCropper",ImageLoaderCropper.__docgenInfo={description:"",displayName:"ImageLoaderCropper",props:{onCropChange:{defaultValue:null,description:"",name:"onCropChange",required:!1,type:{name:"((props: CropImageType) => void)"}},defaultCrop:{defaultValue:null,description:"",name:"defaultCrop",required:!1,type:{name:"Crop"}},scale:{defaultValue:null,description:"",name:"scale",required:!1,type:{name:"number"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!1,type:{name:"number"}},aspect:{defaultValue:null,description:"",name:"aspect",required:!1,type:{name:"number"}},circularCrop:{defaultValue:null,description:"",name:"circularCrop",required:!1,type:{name:"boolean"}},withScale:{defaultValue:null,description:"",name:"withScale",required:!1,type:{name:"boolean"}},withRotate:{defaultValue:null,description:"",name:"withRotate",required:!1,type:{name:"boolean"}},withAspect:{defaultValue:null,description:"",name:"withAspect",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/molecules/ImageLoaderCropper/ImageLoaderCropper.tsx#ImageLoaderCropper"]={docgenInfo:ImageLoaderCropper.__docgenInfo,name:"ImageLoaderCropper",path:"src/components/molecules/ImageLoaderCropper/ImageLoaderCropper.tsx#ImageLoaderCropper"})}catch(__react_docgen_typescript_loader_error){}}}]);