"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[8234],{"./src/components/molecules/MultiSelectSearchable/MultiSelectSearchable.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MultiSelectSearchable:()=>MultiSelectSearchable});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_resize_detector__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react-resize-detector/build/useResizeDetector.js"),_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/index.ts"),_hooks_useHandleState__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/useHandleState.ts"),_atoms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/atoms/index.tsx"),_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/server/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const MultiSelectSearchable=props=>{const{className,options:_options,selectedOptions:_initialSelectedOptions,onChange:_onChange,showOptions:_showOptions,onChangeShowOptions:_onChangeShowOptions,disabled,optionsPlacement="bottom",expand,rowHeightOption=32,onFilter,multiselect=!0}=props,optionValues=JSON.stringify(_options.map(option=>option.value)),options=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>_options,[optionValues]),initialSelectedOptionValues=JSON.stringify(_initialSelectedOptions.map(option=>option.value)),initialSelectedOptions=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>_initialSelectedOptions,[initialSelectedOptionValues]),onChangeRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(_onChange);onChangeRef.current=_onChange;const searchable=!!onFilter,{width:widthContainer,ref:selectLayoutRef}=(0,react_resize_detector__WEBPACK_IMPORTED_MODULE_6__.A)(),[showOptions,setShowOptions]=(0,_hooks_useHandleState__WEBPACK_IMPORTED_MODULE_2__.X)(!1,_showOptions,_onChangeShowOptions),[search,setSearch]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[filteredOptions,setFilteredOptions]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(options),selectedOptions=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>initialSelectedOptions.map(initialOptionSelected=>{const value=JSON.stringify(initialOptionSelected.value),option=options.find(option=>JSON.stringify(option.value)===value);return{value:initialOptionSelected.value,label:initialOptionSelected.label||(null==option?void 0:option.label)||"",inputLabel:initialOptionSelected.inputLabel||(null==option?void 0:option.inputLabel)||""}}),[initialSelectedOptions,options]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setFilteredOptions(search&&onFilter?options.filter(option=>onFilter({search,option,options,selectedOptions})):options)},[onFilter,options,search,selectedOptions]);const selectedOptionRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),widthLabels=Math.max(...[...options,...selectedOptions].map(_ref=>{let{label}=_ref;return(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.rf)(label).length})),isDisabled=disabled||!onChangeRef.current,containerWidth=17*widthLabels+35,renderRow=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(index=>{const option=filteredOptions[index],value=JSON.stringify(option.value),selected=selectedOptions.some(optionSelected=>value===JSON.stringify(optionSelected.value)),disabled=!!option.disabled,onChange=option.disabled?void 0:()=>{var _onChangeRef$current;null===(_onChangeRef$current=onChangeRef.current)||void 0===_onChangeRef$current||_onChangeRef$current.call(onChangeRef,selected?selectedOptions.filter(optionSelected=>JSON.stringify(option.value)!==JSON.stringify(optionSelected.value)):[...multiselect?selectedOptions:[],option])};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.xW)("jk-select-option",{selected,disabled,multiselect}),ref:e=>{selected&&(selectedOptionRef.current=e)},onClick:multiselect?void 0:onChange,children:multiselect?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.GL,{checked:selected,disabled,onChange,label:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.lm)(option.label)}):(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.lm)(option.label)},JSON.stringify(option.value))},[filteredOptions,multiselect,selectedOptions]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.AM,{popoverClassName:"jk-select-options-content bc-we jk-br-ie elevation-1",triggerOn:"click",placement:optionsPlacement,onOpenChange:setShowOptions,offset:4,content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.xW)("jk-select-options-virtual"),style:{width:expand?(widthContainer||0)+8+4-2:containerWidth-2},children:[searchable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"jk-row nowrap gap jk-pg-md elevation-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_server__WEBPACK_IMPORTED_MODULE_4__.WIv,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.pd,{value:search,onChange:setSearch,expand:!0})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{style:{width:"100%",height:Math.ceil(256/rowHeightOption)*rowHeightOption},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.$0,{size:filteredOptions.length,rowHeight:rowHeightOption,renderRow})})]}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.xW)("jk-multi-select-layout",className,{open:showOptions,disabled:isDisabled}),style:{width:expand?"100%":"".concat(containerWidth,"px")},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.xW)({open:showOptions},"jk-select jk-border-radius-inline jk-row space-between nowrap"),ref:selectLayoutRef,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"jk-row left jk-multi-select-selected-options",children:selectedOptions.map(optionSelected=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.xW)("jk-row nowrap",{"jk-tag gray-6":multiselect}),children:[null!=optionSelected&&optionSelected.inputLabel?(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.lm)(null==optionSelected?void 0:optionSelected.inputLabel):(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.lm)(optionSelected.label),onChangeRef.current&&multiselect&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_server__WEBPACK_IMPORTED_MODULE_4__.USm,{size:"small",filledCircle:!0,onClick:event=>{var _onChangeRef$current2;null===(_onChangeRef$current2=onChangeRef.current)||void 0===_onChangeRef$current2||_onChangeRef$current2.call(onChangeRef,selectedOptions.filter(option=>JSON.stringify(optionSelected.value)!==JSON.stringify(option.value))),event.stopPropagation()},className:"cr-hd"})]},JSON.stringify(optionSelected.value)))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"jk-row nowrap jk-multi-select-selected-searchable-icons",children:[!!onChangeRef.current&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_server__WEBPACK_IMPORTED_MODULE_4__.USm,{className:"input-icon",onClick:event=>{var _onChangeRef$current3;null===(_onChangeRef$current3=onChangeRef.current)||void 0===_onChangeRef$current3||_onChangeRef$current3.call(onChangeRef,[]),event.stopPropagation()}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_server__WEBPACK_IMPORTED_MODULE_4__.rf3,{className:"input-icon"})]})]})})})};MultiSelectSearchable.__docgenInfo={description:"",methods:[],displayName:"MultiSelectSearchable",props:{className:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\r\n  value: T,\r\n  label: U,\r\n  inputLabel?: V,\r\n  disabled?: boolean\r\n}",signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"U",required:!0}},{key:"inputLabel",value:{name:"V",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOptionType<T, U, V>[]"},description:""},selectedOptions:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\r\n  value: T,\r\n  label?: U,\r\n  inputLabel?: V,\r\n  disabled?: boolean\r\n}",signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"U",required:!1}},{key:"inputLabel",value:{name:"V",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption2Type<T, U, V>[]"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(options: SelectOptionType<T, U, V>[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\r\n  value: T,\r\n  label: U,\r\n  inputLabel?: V,\r\n  disabled?: boolean\r\n}",signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"U",required:!0}},{key:"inputLabel",value:{name:"V",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOptionType<T, U, V>[]"},name:"options"}],return:{name:"void"}}},description:""},showOptions:{required:!1,tsType:{name:"boolean"},description:""},onChangeShowOptions:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},optionsPlacement:{required:!1,tsType:{name:"Placement"},description:""},expand:{required:!1,tsType:{name:"boolean"},description:""},rowHeightOption:{required:!1,tsType:{name:"number"},description:""},onFilter:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: {\n  search: string,\n  option: SelectOptionType<T, U, V>,\n  options: SelectOptionType<T, U, V>[],\n  selectedOptions: SelectOption2Type<T, U, V>[]\n}) => boolean",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{\n  search: string,\n  option: SelectOptionType<T, U, V>,\n  options: SelectOptionType<T, U, V>[],\n  selectedOptions: SelectOption2Type<T, U, V>[]\n}",signature:{properties:[{key:"search",value:{name:"string",required:!0}},{key:"option",value:{name:"signature",type:"object",raw:"{\r\n  value: T,\r\n  label: U,\r\n  inputLabel?: V,\r\n  disabled?: boolean\r\n}",signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"U",required:!0}},{key:"inputLabel",value:{name:"V",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}}]},required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\r\n  value: T,\r\n  label: U,\r\n  inputLabel?: V,\r\n  disabled?: boolean\r\n}",signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"U",required:!0}},{key:"inputLabel",value:{name:"V",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}}]},required:!0}],raw:"SelectOptionType<T, U, V>[]",required:!0}},{key:"selectedOptions",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\r\n  value: T,\r\n  label?: U,\r\n  inputLabel?: V,\r\n  disabled?: boolean\r\n}",signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"U",required:!1}},{key:"inputLabel",value:{name:"V",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption2Type<T, U, V>[]",required:!0}}]}},name:"props"}],return:{name:"boolean"}}},description:""},multiselect:{required:!1,tsType:{name:"boolean"},description:""}}}}}]);