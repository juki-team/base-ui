"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[1431,1843,3914,8216,8563],{"./node_modules/motion/dist/es/framer-motion/dist/es/components/MotionConfig/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>MotionConfig});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_context_MotionConfigContext_mjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/context/MotionConfigContext.mjs"),_render_dom_utils_filter_props_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/render/dom/utils/filter-props.mjs"),_utils_use_constant_mjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/motion/dist/es/framer-motion/dist/es/utils/use-constant.mjs");function MotionConfig({children,isValidProp,...config}){isValidProp&&(0,_render_dom_utils_filter_props_mjs__WEBPACK_IMPORTED_MODULE_2__.D)(isValidProp),(config={...(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_context_MotionConfigContext_mjs__WEBPACK_IMPORTED_MODULE_3__.Q),...config}).isStatic=(0,_utils_use_constant_mjs__WEBPACK_IMPORTED_MODULE_4__.M)((()=>config.isStatic));const context=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>config),[JSON.stringify(config.transition),config.transformPagePoint,config.reducedMotion]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_context_MotionConfigContext_mjs__WEBPACK_IMPORTED_MODULE_3__.Q.Provider,{value:context,children})}},"./src/components/organisms/worksheet/ContentsSectionHeader.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ContentsSectionHeader:()=>ContentsSectionHeader});var react=__webpack_require__("./node_modules/react/index.js"),helpers=__webpack_require__("./src/helpers/index.ts"),atoms=__webpack_require__("./src/components/atoms/index.tsx"),server=__webpack_require__("./src/components/atoms/server/index.ts"),TableOfContents=__webpack_require__("./src/components/organisms/worksheet/sheets/TableOfContents.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const TableOfContentsModal=_ref=>{let{sheetsInPages,isOpen,onClose,setPage}=_ref;return(0,jsx_runtime.jsx)(atoms.aF,{isOpen,onClose,closeIcon:!1,children:(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch",children:[(0,jsx_runtime.jsx)("div",{className:"jk-row bc-py jk-pg-sm",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se fw-bd cr-we",children:"table of content"})}),(0,jsx_runtime.jsx)(TableOfContents.M,{sheetsInPages,onClick:setPage?index=>{setPage&&(setPage(index),onClose())}:void 0})]})})};try{TableOfContentsModal.displayName="TableOfContentsModal",TableOfContentsModal.__docgenInfo={description:"",displayName:"TableOfContentsModal",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},setPage:{defaultValue:null,description:"",name:"setPage",required:!1,type:{name:"((page: number) => void)"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/sheets/TableOfContentsModal.tsx#TableOfContentsModal"]={docgenInfo:TableOfContentsModal.__docgenInfo,name:"TableOfContentsModal",path:"src/components/organisms/worksheet/sheets/TableOfContentsModal.tsx#TableOfContentsModal"})}catch(__react_docgen_typescript_loader_error){}const ContentsSectionHeader=_ref=>{let{page,setPage,sheetsInPages,totalPages:initialTotalPages}=_ref;const[isOpen,setIsOpen]=(0,react.useState)(!1),totalPages=null!=initialTotalPages?initialTotalPages:sheetsInPages.length;return(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch gap bc-we jk-br-ie cr-pd fw-bd",children:[(0,jsx_runtime.jsx)(TableOfContentsModal,{isOpen,setPage,onClose:()=>setIsOpen(!1),sheetsInPages}),(0,jsx_runtime.jsxs)("div",{className:"jk-row gap center",children:[(0,jsx_runtime.jsxs)("div",{onClick:page<=1?void 0:()=>setPage(page-1),className:(0,helpers.xW)("jk-row gap jk-pg-xsm jk-br-ie",{"cr-g6":page<=1,"cr-pr hoverable":!(page<=1)}),children:[(0,jsx_runtime.jsx)(server.gFQ,{}),(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"previous"})]}),(0,jsx_runtime.jsxs)("div",{className:"jk-row cr-pr hoverable jk-br-ie jk-pg-xsm",onClick:()=>setIsOpen(!0),children:[(0,jsx_runtime.jsx)(server.jZu,{}),(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"table of contents"})]}),(0,jsx_runtime.jsxs)("div",{onClick:page===totalPages?void 0:()=>setPage(page+1),className:(0,helpers.xW)("jk-row gap jk-pg-xsm jk-br-ie",{"cr-g6":page===totalPages,"cr-pr hoverable":!(page===totalPages)}),children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"next"}),(0,jsx_runtime.jsx)(server.sIg,{})]})]})]})};try{ContentsSectionHeader.displayName="ContentsSectionHeader",ContentsSectionHeader.__docgenInfo={description:"",displayName:"ContentsSectionHeader",props:{page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"number"}},setPage:{defaultValue:null,description:"",name:"setPage",required:!0,type:{name:"Dispatch<number>"}},sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},totalPages:{defaultValue:null,description:"",name:"totalPages",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/ContentsSectionHeader.tsx#ContentsSectionHeader"]={docgenInfo:ContentsSectionHeader.__docgenInfo,name:"ContentsSectionHeader",path:"src/components/organisms/worksheet/ContentsSectionHeader.tsx#ContentsSectionHeader"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/Worksheet.stories.tsx":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(module,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorksheetEditor:()=>WorksheetEditor,WorksheetResultViewer:()=>WorksheetResultViewer,WorksheetViewer:()=>WorksheetViewer,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),_helpers__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/helpers/index.ts")),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.ts"),_settings__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/settings/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/atoms/index.tsx"),_mockup__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/mockup/index.ts"),_molecules__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/molecules/index.tsx"),_WorksheetEditor__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/organisms/worksheet/WorksheetEditor.tsx"),_WorksheetViewer__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/organisms/worksheet/WorksheetViewer.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react/jsx-runtime.js"),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([_mockup__WEBPACK_IMPORTED_MODULE_6__]);_mockup__WEBPACK_IMPORTED_MODULE_6__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];const __WEBPACK_DEFAULT_EXPORT__={component:_WorksheetViewer__WEBPACK_IMPORTED_MODULE_9__.WorksheetViewer},WorksheetViewer=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_mockup__WEBPACK_IMPORTED_MODULE_6__.Ag,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_7__.pW,{url:_settings__WEBPACK_IMPORTED_MODULE_4__.u.API_V1.worksheet.getData({params:{key:"w-Inj"}}).url,children:_ref=>{var _data$content$user;let{data,mutate}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_7__.a0,{tabs:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.A8)((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_WorksheetViewer__WEBPACK_IMPORTED_MODULE_9__.WorksheetViewer,{worksheetKey:data.content.key,content:data.content.content,isEditor:null===(_data$content$user=data.content.user)||void 0===_data$content$user?void 0:_data$content$user.isManager,isSolvable:data.content.isSolvable})),children:"TITLE"})}})}),WorksheetResultViewer=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_mockup__WEBPACK_IMPORTED_MODULE_6__.Ag,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_7__.pW,{url:_settings__WEBPACK_IMPORTED_MODULE_4__.u.API_V1.worksheet.getData({params:{key:"w-Inj"}}).url,children:_ref2=>{var _data$content$user2;let{data,mutate}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_7__.a0,{tabs:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.A8)((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_WorksheetViewer__WEBPACK_IMPORTED_MODULE_9__.WorksheetViewer,{worksheetKey:data.content.key,content:data.content.content,isEditor:null===(_data$content$user2=data.content.user)||void 0===_data$content$user2?void 0:_data$content$user2.isManager,isSolvable:data.content.isSolvable})),children:"TITLE"})}})}),toUpsertWorksheetDTO=entity=>({members:{access:entity.members.access,managers:Object.keys(entity.members.managers),spectators:Object.keys(entity.members.spectators)},folderId:entity.folderId,name:entity.name,description:entity.description,content:entity.content,isSolvable:entity.isSolvable}),Cmp=_ref3=>{let{content:initialContent,mutate}=_ref3;const[content,setContent]=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.ID)(initialContent.content);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_WorksheetEditor__WEBPACK_IMPORTED_MODULE_8__.WorksheetEditor,{worksheetKey:"",setContent,content,isEditor:!0,isSolvable:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_7__.mT,{onClick:async setLoader=>{setLoader(_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.nW6.LOADING);const{url,...options}=_settings__WEBPACK_IMPORTED_MODULE_4__.u.API_V1.worksheet.update({params:{key:initialContent.key},body:toUpsertWorksheetDTO({...initialContent,content})}),request=(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.Hu3)(await(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.zb)(url,options));console.info({request}),setLoader(_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.nW6.NONE)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_5__.T,{children:"save"})})]})},WorksheetEditor=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_mockup__WEBPACK_IMPORTED_MODULE_6__.Ag,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_7__.pW,{url:_settings__WEBPACK_IMPORTED_MODULE_4__.u.API_V1.worksheet.getData({params:{key:"w-Inj"}}).url,children:_ref4=>{let{data,mutate}=_ref4;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_molecules__WEBPACK_IMPORTED_MODULE_7__.a0,{tabs:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.A8)((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(Cmp,{content:data.content,mutate})),children:"TITLE"})}})}),__namedExportsOrder=["WorksheetViewer","WorksheetResultViewer","WorksheetEditor"];WorksheetViewer.parameters={...WorksheetViewer.parameters,docs:{...WorksheetViewer.parameters?.docs,source:{originalSource:'() => {\n  return <MockupJukiProvider>\n      <FetcherLayer<ContentResponseType<WorksheetDataResponseDTO>> url={jukiApiSocketManager.API_V1.worksheet.getData({\n      params: {\n        key: \'w-Inj\'\n      }\n    }).url}>\n        {({\n        data,\n        mutate\n      }) => <TwoContentLayout tabs={oneTab(<WorksheetViewerCmp worksheetKey={data.content.key} content={data.content.content} isEditor={data.content.user?.isManager} isSolvable={data.content.isSolvable}\n      // readOnly={false}\n      // readOnly={!!user?.nickname}\n      />)}\n      // tabButtons={buttons}\n      // breadcrumbs={breadcrumbs}\n      >\n            TITLE\n            {/*<div className="jk-row right tx-s fw-lr">*/}\n            {/*  <DateLiteral date={new Date(noteSheet.updatedAt)} show="year-month-day-hours-minutes" />*/}\n            {/*</div>*/}\n          </TwoContentLayout>}\n      </FetcherLayer>\n    </MockupJukiProvider>;\n}',...WorksheetViewer.parameters?.docs?.source}}},WorksheetResultViewer.parameters={...WorksheetResultViewer.parameters,docs:{...WorksheetResultViewer.parameters?.docs,source:{originalSource:'() => {\n  return <MockupJukiProvider>\n      <FetcherLayer<ContentResponseType<WorksheetDataResponseDTO>> url={jukiApiSocketManager.API_V1.worksheet.getData({\n      params: {\n        key: \'w-Inj\'\n      }\n    }).url}>\n        {({\n        data,\n        mutate\n      }) => <TwoContentLayout tabs={oneTab(<WorksheetViewerCmp worksheetKey={data.content.key} content={data.content.content} isEditor={data.content.user?.isManager} isSolvable={data.content.isSolvable}\n      // readOnly={false}\n      // readOnly={!!user?.nickname}\n      />)}\n      // tabButtons={buttons}\n      // breadcrumbs={breadcrumbs}\n      >\n            TITLE\n            {/*<div className="jk-row right tx-s fw-lr">*/}\n            {/*  <DateLiteral date={new Date(noteSheet.updatedAt)} show="year-month-day-hours-minutes" />*/}\n            {/*</div>*/}\n          </TwoContentLayout>}\n      </FetcherLayer>\n    </MockupJukiProvider>;\n}',...WorksheetResultViewer.parameters?.docs?.source}}},WorksheetEditor.parameters={...WorksheetEditor.parameters,docs:{...WorksheetEditor.parameters?.docs,source:{originalSource:'() => {\n  return <MockupJukiProvider>\n      <FetcherLayer<ContentResponseType<WorksheetDataResponseDTO>> url={jukiApiSocketManager.API_V1.worksheet.getData({\n      params: {\n        key: \'w-Inj\'\n      }\n    }).url}>\n        {({\n        data,\n        mutate\n      }) => <TwoContentLayout tabs={oneTab(<Cmp content={data.content} mutate={mutate} />)}\n      // tabButtons={buttons}\n      // breadcrumbs={breadcrumbs}\n      >\n            TITLE\n            {/*<div className="jk-row right tx-s fw-lr">*/}\n            {/*  <DateLiteral date={new Date(noteSheet.updatedAt)} show="year-month-day-hours-minutes" />*/}\n            {/*</div>*/}\n          </TwoContentLayout>}\n      </FetcherLayer>\n    </MockupJukiProvider>;\n}',...WorksheetEditor.parameters?.docs?.source}}},__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},"./src/components/organisms/worksheet/WorksheetBodies.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorksheetBodies:()=>WorksheetBodies});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/hooks/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/atoms/index.tsx"),_atoms_server__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/atoms/server/index.ts"),_ContentsSectionHeader__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/organisms/worksheet/ContentsSectionHeader.tsx"),_WorksheetBody__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/organisms/worksheet/WorksheetBody.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");const WorksheetBodies=props=>{var _sheetsInPages,_sheetsInPages2;const{sheetsInPages,isEditor,setSheets,userResults,isSolvable,worksheetKey,withoutContentsHeader,page:initialPage,setPage:initialSetPage,lastPageChildren,readOnly}=props,containerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[page,_setPage]=(0,_hooks__WEBPACK_IMPORTED_MODULE_1__.ID)("number"==typeof initialPage?initialPage:1),setPage=index=>{var _document$getElementB,_document$getElementB2;((null!=initialSetPage?initialSetPage:_setPage)(index),"undefined"!=typeof document)&&(null===(_document$getElementB=document.getElementById("jk-two-content-section-second-panel"))||void 0===_document$getElementB||_document$getElementB.scrollTo({top:0,behavior:"smooth"}),null===(_document$getElementB2=document.getElementById("jk-worksheet-body"))||void 0===_document$getElementB2||_document$getElementB2.scrollTo({top:0,behavior:"smooth"}))},setPageSheets=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(((newPageHeader,newPageSheetContent)=>{const newSheetsInPages=[...sheetsInPages];newSheetsInPages[page-1]={header:null!=newPageHeader?newPageHeader:newSheetsInPages[page-1].header,content:newPageSheetContent};const newSheets=[];for(const{header,content}of newSheetsInPages)newSheets.push(header,...content);null==setSheets||setSheets(newSheets)}),[page,setSheets,sheetsInPages]),setSheet=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value=>{const newPageSheetContent="function"==typeof value?value(sheetsInPages[page-1].content):value;setPageSheets(null,newPageSheetContent)}),[page,setPageSheets,sheetsInPages]),pages=sheetsInPages.length;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-col gap nowrap top stretch extend worksheet-bodies",children:[(pages>1||setSheets)&&!withoutContentsHeader&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"jk-row",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ContentsSectionHeader__WEBPACK_IMPORTED_MODULE_4__.ContentsSectionHeader,{page,setPage,sheetsInPages})}),setSheets&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"jk-row gap extend nowrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.pd,{label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,{className:"tt-se",children:"page title"}),value:null===(_sheetsInPages=sheetsInPages[page-1])||void 0===_sheetsInPages?void 0:_sheetsInPages.header.title,onChange:title=>{setPageSheets({...sheetsInPages[page-1].header,title},sheetsInPages[page-1].content)},expand:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.$n,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"remove page divider",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms_server__WEBPACK_IMPORTED_MODULE_3__.d7y,{}),onClick:()=>{const newSheetsInPages=[...sheetsInPages],newSheets=[];if(page===pages){let i=0;for(const{header,content}of newSheetsInPages)i!==page-1&&newSheets.push(header),newSheets.push(...content),i++;setSheets(newSheets)}else{let i=0,contentDeleted=null;for(const{header,content}of newSheetsInPages)i===page-1?contentDeleted=content:(newSheets.push(header),null!==contentDeleted&&(newSheets.push(...contentDeleted),contentDeleted=null),newSheets.push(...content)),i++;setSheets(newSheets)}page>1&&page===pages&&setPage(Math.max(page,1))},disabled:pages<=1})]},`${page}`),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_WorksheetBody__WEBPACK_IMPORTED_MODULE_5__.WorksheetBody,{sheet:null===(_sheetsInPages2=sheetsInPages[page-1])||void 0===_sheetsInPages2?void 0:_sheetsInPages2.content,setSheet:setSheets?setSheet:void 0,userResults,readOnly:!!readOnly,isSolvable,isEditor,worksheetKey,ref:containerRef}),page<pages?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.$n,{className:"next-button",type:"light",onClick:()=>setPage(page+1),expand:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,{className:"tt-se",children:"next page"})}):lastPageChildren]})};try{WorksheetBodies.displayName="WorksheetBodies",WorksheetBodies.__docgenInfo={description:"",displayName:"WorksheetBodies",props:{sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},setSheets:{defaultValue:null,description:"",name:"setSheets",required:!1,type:{name:"Dispatch<BodyWorksheetType[]>"}},userResults:{defaultValue:null,description:"",name:"userResults",required:!1,type:{name:"UserResultsType"}},isSolvable:{defaultValue:null,description:"",name:"isSolvable",required:!0,type:{name:"boolean"}},isEditor:{defaultValue:null,description:"",name:"isEditor",required:!1,type:{name:"boolean"}},worksheetKey:{defaultValue:null,description:"",name:"worksheetKey",required:!0,type:{name:"string"}},withoutContentsHeader:{defaultValue:null,description:"",name:"withoutContentsHeader",required:!1,type:{name:"boolean"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number"}},setPage:{defaultValue:null,description:"",name:"setPage",required:!1,type:{name:"((page: number) => void)"}},lastPageChildren:{defaultValue:null,description:"",name:"lastPageChildren",required:!1,type:{name:"ReactNode"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/WorksheetBodies.tsx#WorksheetBodies"]={docgenInfo:WorksheetBodies.__docgenInfo,name:"WorksheetBodies",path:"src/components/organisms/worksheet/WorksheetBodies.tsx#WorksheetBodies"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/WorksheetEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorksheetEditor:()=>WorksheetEditor});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/index.ts"),_WorksheetBodies__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/organisms/worksheet/WorksheetBodies.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");const WorksheetEditor=props=>{const{content,setContent,worksheetKey,isSolvable=!1,isEditor=!1,page:initialPage,setPage:initialSetPage,lastPageChildren,readOnly=!1}=props,locationHash=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.QZ)(),scrolled=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!1),{viewPortSize}=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.p1)(),userIsLogged=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.kH)((state=>state.user.isLogged));(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{let render=0,timeoutId=null;const go=()=>{render++,timeoutId=setTimeout((()=>{var _window,_window$document;const element=null===(_window=window)||void 0===_window||null===(_window$document=_window.document)||void 0===_window$document?void 0:_window$document.getElementById(encodeURI(locationHash));element?(null==element||element.scrollIntoView({behavior:"smooth"}),scrolled.current=!0):render<50&&go()}),400)};return scrolled.current||go(),()=>{null!==timeoutId&&clearTimeout(timeoutId)}}),[locationHash,content]);const[page,_setPage]=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.ID)(null!=initialPage?initialPage:1),setPage=null!=initialSetPage?initialSetPage:_setPage,sheetsInPages=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.bs0)(content)),[content]),withoutContentsNav="sm"!==viewPortSize&&!setContent;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"jk-row gap nowrap worksheet-editor-container center top",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_WorksheetBodies__WEBPACK_IMPORTED_MODULE_3__.WorksheetBodies,{sheetsInPages,setSheets:setContent,isSolvable:isSolvable&&userIsLogged,readOnly,isEditor,worksheetKey,withoutContentsHeader:withoutContentsNav,page,setPage,lastPageChildren})})};try{WorksheetEditor.displayName="WorksheetEditor",WorksheetEditor.__docgenInfo={description:"",displayName:"WorksheetEditor",props:{content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"BodyWorksheetType[]"}},setContent:{defaultValue:null,description:"",name:"setContent",required:!0,type:{name:"(content: BodyWorksheetType[]) => void"}},worksheetKey:{defaultValue:null,description:"",name:"worksheetKey",required:!0,type:{name:"string"}},isSolvable:{defaultValue:null,description:"",name:"isSolvable",required:!1,type:{name:"boolean"}},isEditor:{defaultValue:null,description:"",name:"isEditor",required:!1,type:{name:"boolean"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number"}},setPage:{defaultValue:null,description:"",name:"setPage",required:!1,type:{name:"((newPage: number) => void)"}},lastPageChildren:{defaultValue:null,description:"",name:"lastPageChildren",required:!1,type:{name:"ReactNode"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/WorksheetEditor.tsx#WorksheetEditor"]={docgenInfo:WorksheetEditor.__docgenInfo,name:"WorksheetEditor",path:"src/components/organisms/worksheet/WorksheetEditor.tsx#WorksheetEditor"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/WorksheetViewer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorksheetViewer:()=>WorksheetViewer});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/index.ts"),_settings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/settings/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/atoms/index.tsx"),_sheets_TableOfContents__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/organisms/worksheet/sheets/TableOfContents.tsx"),_WorksheetBodies__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/organisms/worksheet/WorksheetBodies.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");const WorksheetViewer=props=>{var _userResults$data;const{content,worksheetKey,isSolvable=!1,isEditor=!1,resultsUserKey,page:initialPage,setPage:initialSetPage,lastPageChildren,readOnly:initialReadOnly=!1}=props,locationHash=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.QZ)(),scrolled=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!1),{viewPortSize}=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.p1)(),userNickname=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.kH)((state=>state.user.nickname)),companyKey=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.kH)((state=>state.company.key)),userIsLogged=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.kH)((state=>state.user.isLogged));(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{let render=0,timeoutId=null;const go=()=>{render++,timeoutId=setTimeout((()=>{var _window,_window$document;const element=null===(_window=window)||void 0===_window||null===(_window$document=_window.document)||void 0===_window$document?void 0:_window$document.getElementById(encodeURI(locationHash));element?(null==element||element.scrollIntoView({behavior:"smooth"}),scrolled.current=!0):render<50&&go()}),400)};return scrolled.current||go(),()=>{null!==timeoutId&&clearTimeout(timeoutId)}}),[locationHash,content]);const[page,_setPage]=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.ID)(null!=initialPage?initialPage:1),setPage=null!=initialSetPage?initialSetPage:_setPage,{data:userResultsData,mutate:userResultsMutate,isLoading:userResultsIsLoading,isValidating:userResultsIsValidating}=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.Ls)(_settings__WEBPACK_IMPORTED_MODULE_3__.u.API_V1.worksheet.getSubmissionsUser({params:{key:worksheetKey,userKey:resultsUserKey||(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.Lwn)(userNickname,companyKey)}}).url),userResults=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>({data:null!=userResultsData&&userResultsData.success?userResultsData.content:void 0,isLoading:userResultsIsLoading,isValidating:userResultsIsValidating,mutate:userResultsMutate})),[userResultsData,userResultsIsLoading,userResultsIsValidating,userResultsMutate]),sheetsInPages=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.bs0)(content)),[content]),withoutContentsNav="sm"!==viewPortSize,readOnly=initialReadOnly||userNickname!==(null==userResults||null===(_userResults$data=userResults.data)||void 0===_userResults$data?void 0:_userResults$data.user.nickname);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:"jk-row gap nowrap worksheet-viewer-container center top",children:[withoutContentsNav&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:"jk-col gap bc-we jk-pg-xsm jk-br-ie left worksheet-content sticky-top",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_4__.T,{className:"tt-se fw-bd cr-py",children:"table of content"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_sheets_TableOfContents__WEBPACK_IMPORTED_MODULE_5__.M,{sheetsInPages,page,onClick:index=>{var _document$getElementB,_document$getElementB2;setPage&&(setPage(index),"undefined"!=typeof document&&(null===(_document$getElementB=document.getElementById("jk-two-content-section-second-panel"))||void 0===_document$getElementB||_document$getElementB.scrollTo({top:0,behavior:"smooth"}),null===(_document$getElementB2=document.getElementById("jk-worksheet-body"))||void 0===_document$getElementB2||_document$getElementB2.scrollTo({top:0,behavior:"smooth"})))}})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_WorksheetBodies__WEBPACK_IMPORTED_MODULE_6__.WorksheetBodies,{sheetsInPages,isSolvable:isSolvable&&userIsLogged,userResults,readOnly,isEditor,worksheetKey,withoutContentsHeader:withoutContentsNav,page,setPage,lastPageChildren})]})};try{WorksheetViewer.displayName="WorksheetViewer",WorksheetViewer.__docgenInfo={description:"",displayName:"WorksheetViewer",props:{content:{defaultValue:null,description:"",name:"content",required:!0,type:{name:"BodyWorksheetType[]"}},worksheetKey:{defaultValue:null,description:"",name:"worksheetKey",required:!0,type:{name:"string"}},isSolvable:{defaultValue:null,description:"",name:"isSolvable",required:!1,type:{name:"boolean"}},isEditor:{defaultValue:null,description:"",name:"isEditor",required:!1,type:{name:"boolean"}},resultsUserKey:{defaultValue:null,description:"",name:"resultsUserKey",required:!1,type:{name:"string"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number"}},setPage:{defaultValue:null,description:"",name:"setPage",required:!1,type:{name:"((newPage: number) => void)"}},lastPageChildren:{defaultValue:null,description:"",name:"lastPageChildren",required:!1,type:{name:"ReactNode"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/WorksheetViewer.tsx#WorksheetViewer"]={docgenInfo:WorksheetViewer.__docgenInfo,name:"WorksheetViewer",path:"src/components/organisms/worksheet/WorksheetViewer.tsx#WorksheetViewer"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/worksheet/sheets/TableOfContents.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>TableOfContents});__webpack_require__("./node_modules/react/index.js");var _constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/constants/index.ts"),_helpers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TableOfContents=_ref=>{let{sheetsInPages,onClick,page,setSheets}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"jk-col gap stretch jk-pg-sm wh-100",children:sheetsInPages.map(((_ref2,index)=>{var _content$;let{header,content}=_ref2;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_2__.xW)("fw-bd jk-row space-between stretch jk-br-ie",{hoverable:!!onClick,"bc-hl":page===index+1}),onClick:()=>null==onClick?void 0:onClick(index+1),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{style:{padding:2},className:"jk-row gap nowrap flex-1 left",children:[(0,_constants__WEBPACK_IMPORTED_MODULE_1__._z)()[null===(_content$=content[0])||void 0===_content$?void 0:_content$.type]||null,header.title]},`${header.title}-${index}`)},index)}))})};try{TableOfContents.displayName="TableOfContents",TableOfContents.__docgenInfo={description:"",displayName:"TableOfContents",props:{sheetsInPages:{defaultValue:null,description:"",name:"sheetsInPages",required:!0,type:{name:"WorksheetsInPages"}},setSheets:{defaultValue:null,description:"",name:"setSheets",required:!1,type:{name:"Dispatch<BodyWorksheetType[]>"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"((index: number) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/worksheet/sheets/TableOfContents.tsx#TableOfContents"]={docgenInfo:TableOfContents.__docgenInfo,name:"TableOfContents",path:"src/components/organisms/worksheet/sheets/TableOfContents.tsx#TableOfContents"})}catch(__react_docgen_typescript_loader_error){}}}]);