"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[6631,9324],{"./src/components/organisms/CodeRunnerEditor/CodeRunnerEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CodeRunnerEditor:()=>CodeRunnerEditor});var esm=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),react=__webpack_require__("./node_modules/react/index.js"),useResizeDetector=__webpack_require__("./node_modules/react-resize-detector/build/useResizeDetector.js"),constants=__webpack_require__("./src/constants/index.ts"),helpers=__webpack_require__("./src/helpers/index.ts"),hooks=__webpack_require__("./src/hooks/index.ts"),useJukiUI=__webpack_require__("./src/hooks/useJukiUI.tsx"),settings=__webpack_require__("./src/settings/index.ts"),atoms=__webpack_require__("./src/components/atoms/index.tsx"),molecules=__webpack_require__("./src/components/molecules/index.tsx"),useWebsocketStore=__webpack_require__("./src/stores/websocket/useWebsocketStore.ts"),server=__webpack_require__("./src/components/server/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Header=props=>{var _languages$find,_languages$find2;const{languages,sourceCode,language,onChange,testCases,setShowSettings,leftOptions,centerOptions,rightOptions,setRunId,timeLimit,memoryLimit,expanded,setExpanded,isRunning,withoutRunCodeButton,readOnly,headerRef,headerWidthContainer,twoRows}=props,{addErrorNotification}=(0,hooks.Eq)(),{width:widthLeftSection=0,ref:refLeftSection}=(0,useResizeDetector.A)(constants.fV),{width:widthRightSection=0,ref:refRightSection}=(0,useResizeDetector.A)(constants.fV),setLoaderRef=(0,react.useRef)(void 0),isConnected=(0,useWebsocketStore.q)((state=>state.isConnected)),connectionId=(0,useWebsocketStore.q)((state=>state.connectionId));(0,react.useEffect)((()=>{var _setLoaderRef$current,_setLoaderRef$current2;isRunning?null===(_setLoaderRef$current=setLoaderRef.current)||void 0===_setLoaderRef$current||_setLoaderRef$current.call(setLoaderRef,esm.nW6.LOADING):null===(_setLoaderRef$current2=setLoaderRef.current)||void 0===_setLoaderRef$current2||_setLoaderRef$current2.call(setLoaderRef,esm.nW6.NONE)}),[isRunning]);const withLabels=headerWidthContainer>(withoutRunCodeButton?570:620),widthCenterContainer=headerWidthContainer-widthLeftSection-widthRightSection;return(0,jsx_runtime.jsxs)("div",{className:(0,helpers.xW)("options-header-content jk-row jk-pg-xsm",{"two-rows":twoRows}),ref:headerRef,children:[(0,jsx_runtime.jsxs)("div",{className:(0,helpers.xW)("cr-th jk-row gap left",{"jk-col left gap":twoRows,"jk-row gap left":!twoRows}),ref:refLeftSection,children:[readOnly?(0,jsx_runtime.jsx)("div",{className:"jk-tag info",children:((null===(_languages$find=languages.find((lang=>lang.value===language)))||void 0===_languages$find?void 0:_languages$find.label)||language)+""}):(0,jsx_runtime.jsx)(atoms.l6,{className:"languages-selector",options:languages.map((language=>({value:language.value,label:(language.label||language.value)+""}))),selectedOption:{value:language,label:((null===(_languages$find2=languages.find((lang=>lang.value===language)))||void 0===_languages$find2?void 0:_languages$find2.label)||language)+""},onChange:_ref=>{let{value}=_ref;return null==onChange?void 0:onChange({language:value})},expand:twoRows}),!withoutRunCodeButton&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(molecules.mT,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":isConnected?twoRows||withLabels?"":"run":"run the editor is not available yet",size:"tiny",type:"primary",expand:twoRows,icon:(0,jsx_runtime.jsx)(server.Bq3,{}),onClick:async setStatus=>{const clean=status=>{const newTestCases={};for(const testKey in testCases)newTestCases[testKey]={...testCases[testKey]},newTestCases[testKey].out="",newTestCases[testKey].err="",newTestCases[testKey].status=status;null==onChange||onChange({onTestCasesChange:()=>newTestCases})};setStatus(esm.nW6.LOADING),clean(esm.aeR.RECEIVED);try{var _request$content;const{url,...options}=settings.u.API_V1.code.run({body:{language,source:sourceCode,inputs:Object.values(testCases).map((testCase=>({key:testCase.key,source:testCase.in}))),timeLimit,memoryLimit,connectionId}}),request=(0,helpers.Hu)(await(0,helpers.zb)(url,options));null!=request&&request.success&&null!=request&&null!==(_request$content=request.content)&&void 0!==_request$content&&_request$content.runId?(setRunId(request.content.runId),setStatus(esm.nW6.SUCCESS)):(addErrorNotification(null==request?void 0:request.message),setRunId(""),clean(esm.aeR.NONE),(0,esm.OPF)("run code request failed",{request}),setStatus(esm.nW6.ERROR))}catch(error){(0,esm.OPF)("error on run code",{error}),clean(esm.aeR.NONE),setStatus(esm.nW6.ERROR)}},setLoaderStatusRef:setLoader=>setLoaderRef.current=setLoader,disabled:!isConnected,children:(twoRows||withLabels)&&(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"run"})}),!isConnected&&(0,jsx_runtime.jsx)(molecules.mT,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"offline, click to try to reconnect",className:"jk-row bc-er",style:{"--button-background-color":"var(--t-color-error)"},onClick:async setLoader=>{setLoader(esm.nW6.LOADING),settings.u.SOCKET.getReadyState()!==WebSocket.OPEN&&await settings.u.SOCKET.connect(),setLoader(esm.nW6.NONE)},icon:(0,jsx_runtime.jsx)(server.IJR,{}),size:"small"})]}),leftOptions({widthContainer:widthCenterContainer,withLabels,twoRows})]}),(0,jsx_runtime.jsx)("div",{className:"jk-row flex-1",style:{width:widthCenterContainer},children:centerOptions({widthContainer:widthCenterContainer,withLabels,twoRows})}),(0,jsx_runtime.jsxs)("div",{className:(0,helpers.xW)("jk-row gap cr-th",{"jk-col gap":twoRows,"jk-row right gap":!twoRows}),ref:refRightSection,children:[(0,jsx_runtime.jsx)(atoms.$n,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":twoRows||withLabels?"":"settings","data-tooltip-place":"bottom-end",size:"tiny",type:"light",onClick:()=>setShowSettings(!0),icon:(0,jsx_runtime.jsx)(server.Zes,{}),children:(twoRows||withLabels)&&(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"settings"})}),null!==expanded&&(0,jsx_runtime.jsx)(atoms.$n,{"data-tooltip-id":"jk-tooltip","data-tooltip-content":twoRows||withLabels?"":expanded?"back":"expand","data-tooltip-place":"bottom-end",size:"tiny",type:"light",onClick:()=>setExpanded((prevState=>!prevState)),icon:expanded?(0,jsx_runtime.jsx)(server.z7w,{}):(0,jsx_runtime.jsx)(server.P7m,{}),children:(twoRows||withLabels)&&(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:expanded?"back":"expand"})}),rightOptions({withLabels,twoRows})]})]})};try{Header.displayName="Header",Header.__docgenInfo={description:"",displayName:"Header",props:{sourceCode:{defaultValue:null,description:"",name:"sourceCode",required:!0,type:{name:"string"}},languages:{defaultValue:null,description:"",name:"languages",required:!0,type:{name:"{ value: T; label: string; }[]"}},language:{defaultValue:null,description:"",name:"language",required:!0,type:{name:"T"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"CodeRunnerEditorOnChangeType<T>"}},testCases:{defaultValue:null,description:"",name:"testCases",required:!0,type:{name:"CodeEditorTestCasesType"}},setShowSettings:{defaultValue:null,description:"",name:"setShowSettings",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},runId:{defaultValue:null,description:"",name:"runId",required:!0,type:{name:"string"}},setRunId:{defaultValue:null,description:"",name:"setRunId",required:!0,type:{name:"Dispatch<SetStateAction<string>>"}},leftOptions:{defaultValue:null,description:"",name:"leftOptions",required:!0,type:{name:"(props: { widthContainer: number; withLabels: boolean; twoRows: boolean; }) => ReactNode"}},centerOptions:{defaultValue:null,description:"",name:"centerOptions",required:!0,type:{name:"(props: { widthContainer: number; withLabels: boolean; twoRows: boolean; }) => ReactNode"}},rightOptions:{defaultValue:null,description:"",name:"rightOptions",required:!0,type:{name:"(props: { withLabels: boolean; twoRows: boolean; }) => ReactNode"}},timeLimit:{defaultValue:null,description:"",name:"timeLimit",required:!0,type:{name:"number"}},memoryLimit:{defaultValue:null,description:"",name:"memoryLimit",required:!0,type:{name:"number"}},expanded:{defaultValue:null,description:"",name:"expanded",required:!0,type:{name:"boolean | null"}},setExpanded:{defaultValue:null,description:"",name:"setExpanded",required:!0,type:{name:"Dispatch<SetStateAction<boolean>>"}},isRunning:{defaultValue:null,description:"",name:"isRunning",required:!0,type:{name:"boolean"}},withoutRunCodeButton:{defaultValue:null,description:"",name:"withoutRunCodeButton",required:!0,type:{name:"boolean"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}},headerRef:{defaultValue:null,description:"",name:"headerRef",required:!0,type:{name:"OnRefChangeType<any>"}},headerWidthContainer:{defaultValue:null,description:"",name:"headerWidthContainer",required:!0,type:{name:"number"}},twoRows:{defaultValue:null,description:"",name:"twoRows",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/CodeRunnerEditor/Header/index.tsx#Header"]={docgenInfo:Header.__docgenInfo,name:"Header",path:"src/components/organisms/CodeRunnerEditor/Header/index.tsx#Header"})}catch(__react_docgen_typescript_loader_error){}const SettingsModal=_ref=>{let{onChange,tabSize,fontSize,...modalProps}=_ref;return(0,jsx_runtime.jsx)(atoms.aF,{className:"editor-settings-modal jk-pg-lg",...modalProps,children:(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch gap jk-pg-sm-tb",children:[(0,jsx_runtime.jsx)("h3",{children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:"code editor settings"})}),(0,jsx_runtime.jsxs)("div",{className:"jk-row left gap",children:[(0,jsx_runtime.jsxs)("label",{className:"tt-se",children:[(0,jsx_runtime.jsx)(atoms.T,{children:"choose your tab size"}),": "]}),(0,jsx_runtime.jsx)(atoms.l6,{options:constants.KX.map((keyMap=>({value:keyMap,label:keyMap+""}))),selectedOption:{value:tabSize},onChange:_ref2=>{let{value}=_ref2;return null==onChange?void 0:onChange({tabSize:value})}})]}),(0,jsx_runtime.jsxs)("div",{className:"jk-row left gap",children:[(0,jsx_runtime.jsxs)("label",{className:"tt-se",children:[(0,jsx_runtime.jsx)(atoms.T,{children:"choose your font size"}),": "]}),(0,jsx_runtime.jsx)(atoms.l6,{options:constants.iU.map((keyMap=>({value:keyMap,label:keyMap+""}))),selectedOption:{value:fontSize},onChange:_ref3=>{let{value}=_ref3;return null==onChange?void 0:onChange({fontSize:value})}})]})]})})};try{SettingsModal.displayName="SettingsModal",SettingsModal.__docgenInfo={description:"",displayName:"SettingsModal",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"CodeRunnerEditorOnChangeType<T>"}},tabSize:{defaultValue:null,description:"",name:"tabSize",required:!0,type:{name:"number"}},fontSize:{defaultValue:null,description:"",name:"fontSize",required:!0,type:{name:"number"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/CodeRunnerEditor/SettingsModal/index.tsx#SettingsModal"]={docgenInfo:SettingsModal.__docgenInfo,name:"SettingsModal",path:"src/components/organisms/CodeRunnerEditor/SettingsModal/index.tsx#SettingsModal"})}catch(__react_docgen_typescript_loader_error){}var types=__webpack_require__("./src/types/index.ts"),ProblemVerdictTag=__webpack_require__("./src/components/organisms/ProblemVerdictTag/ProblemVerdictTag.tsx");const LogInfo=_ref=>{let{testCase,timeLimit,memoryLimit}=_ref;const{timeUsed,timeLimitExceeded,memoryUsed,memoryLimitExceeded,exitCode,runtimeError}=(0,esm.E6g)(testCase,timeLimit,memoryLimit),time=(0,jsx_runtime.jsxs)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"time used",children:[timeUsed," ",(0,jsx_runtime.jsx)(atoms.T,{children:"ms"})]}),memory=(0,jsx_runtime.jsxs)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"memory used",children:[memoryUsed," ",(0,jsx_runtime.jsx)(atoms.T,{children:"KB"})]}),code=(0,jsx_runtime.jsx)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":"exit code",children:exitCode});return(0,jsx_runtime.jsx)("div",{className:"border-bottom-highlight-light",children:(0,jsx_runtime.jsxs)("div",{className:"jk-pg-xsm cr-g2 jk-row gap left tx-t",style:{lineHeight:1},children:[(0,jsx_runtime.jsx)("span",{className:(0,helpers.xW)("tt-se",{"cr-er":timeLimitExceeded}),children:timeLimitExceeded?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.T,{children:"time limit exceeded"})," (",time,")"]}):time}),"|",(0,jsx_runtime.jsx)("span",{className:(0,helpers.xW)("tt-se",{"cr-er":memoryLimitExceeded}),children:memoryLimitExceeded?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.T,{children:"memory limit exceeded"})," (",memory,")"]}):memory}),"|",(0,jsx_runtime.jsx)("span",{className:(0,helpers.xW)("tt-se",{"cr-er":runtimeError}),children:!runtimeError||timeLimit||memoryLimit?code:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.T,{children:"runtime error"})," (",code,")"]})})]})})};try{LogInfo.displayName="LogInfo",LogInfo.__docgenInfo={description:"",displayName:"LogInfo",props:{testCase:{defaultValue:null,description:"",name:"testCase",required:!0,type:{name:"SubmissionTestCaseType"}},timeLimit:{defaultValue:null,description:"",name:"timeLimit",required:!0,type:{name:"number"}},memoryLimit:{defaultValue:null,description:"",name:"memoryLimit",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/CodeRunnerEditor/TestCases/LogInfo.tsx#LogInfo"]={docgenInfo:LogInfo.__docgenInfo,name:"LogInfo",path:"src/components/organisms/CodeRunnerEditor/TestCases/LogInfo.tsx#LogInfo"})}catch(__react_docgen_typescript_loader_error){}const AddCaseButton=_ref=>{let{onChange,testCasesValues,testCases,sample=!1}=_ref;const{addNotification}=(0,hooks.Eq)();return(0,jsx_runtime.jsx)("div",{"data-tooltip-t-class-name":"ws-np tt-se tx-s","data-tooltip-id":"jk-tooltip","data-tooltip-content":`add ${sample?"sample":"custom sample"} case`,"data-tooltip-place":"top-start",className:"jk-button light small only-icon",children:(0,jsx_runtime.jsx)(server.REV,{size:"small",onClick:()=>{const customCases=testCasesValues.filter((testCaseValue=>!testCaseValue.sample)),noCustomCases=testCasesValues.filter((testCaseValue=>testCaseValue.sample)),cases=sample?noCustomCases:customCases;if(cases.length<(sample?30:16)){const key=crypto.randomUUID(),index=(0,esm.Bc3)(cases.map((testCaseValue=>testCaseValue.index)));null==onChange||onChange({onTestCasesChange:testCases=>{var _noCustomCases$0$with,_noCustomCases$;return{...testCases,[key]:{key,index,in:"",out:"",testOut:"",withPE:null===(_noCustomCases$0$with=null==noCustomCases||null===(_noCustomCases$=noCustomCases[0])||void 0===_noCustomCases$?void 0:_noCustomCases$.withPE)||void 0===_noCustomCases$0$with||_noCustomCases$0$with,err:"",log:"",hidden:!1,sample,status:esm.aeR.NONE,messageTimestamp:0}}}})}else addNotification({type:types.NotificationType.QUIET,message:(0,jsx_runtime.jsx)(atoms.T,{children:"maximum test cases achieved"})})}})})},TestCases=props=>{var _testCasesValues$;const{testCases={},onChange,timeLimit,memoryLimit,direction,enableAddSampleCases,enableAddCustomSampleCases}=props,testCasesValues=Object.values(testCases).sort(((a,b)=>"*"===a.key?-1:"*"===b.key?1:a.sample!==b.sample?+b.sample-+a.sample:a.index-b.index)),[testCaseKey,setTestCaseKey]=(0,react.useState)((null===(_testCasesValues$=testCasesValues[0])||void 0===_testCasesValues$?void 0:_testCasesValues$.key)||"*");(0,react.useEffect)((()=>{const testCasesValues=Object.values(testCases);testCasesValues.length&&(testCasesValues.some((testCase=>testCase.key===testCaseKey))||setTestCaseKey(testCasesValues[0].key))}),[testCaseKey,testCases]);const[outputTab,setOutputTab]=(0,react.useState)("output"),[inputTab,setInputTab]=(0,react.useState)("input"),test=testCases[testCaseKey],status=null==test?void 0:test.status;(0,react.useEffect)((()=>{setOutputTab([esm.aeR.FAILED,esm.aeR.COMPILATION_ERROR,esm.aeR.FAILED_TEST_CASE].includes(status)?"error":"output")}),[status]);const loaderAndInfo=(null==test?void 0:test.status)===esm.aeR.RECEIVED||(null==test?void 0:test.status)===esm.aeR.COMPILING||(null==test?void 0:test.status)===esm.aeR.RUNNING_TEST_CASES||(null==test?void 0:test.status)===esm.aeR.RUNNING_TEST_CASE?(0,jsx_runtime.jsx)("div",{className:"jk-overlay jk-overlay-backdrop jk-row center",style:{position:"absolute",background:"transparent"},children:(0,jsx_runtime.jsxs)("div",{className:"jk-row",style:{alignItems:"baseline"},children:[(0,jsx_runtime.jsx)(atoms.T,{children:esm.ok5[null==test?void 0:test.status].label})," ",(0,jsx_runtime.jsx)("div",{className:"dot-flashing"})]})}):!(null==test||!test.log)&&(0,jsx_runtime.jsx)(LogInfo,{testCase:test,timeLimit,memoryLimit}),outputTabs={};null!=test&&test.testOut&&(outputTabs["test-output"]={key:"test-output",header:(0,jsx_runtime.jsxs)("div",{className:"jk-row gap left nowrap",children:[(0,jsx_runtime.jsx)(atoms.T,{className:(0,helpers.xW)("tt-se tx-s"),children:"expected output"}),(null==test?void 0:test.withPE)&&(0,jsx_runtime.jsx)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":((null==test?void 0:test.testOut.lastIndexOf("\n"))===(null==test?void 0:test.testOut.length)-1?"":"no ")+"newline at end of file",className:"jk-row",children:(0,jsx_runtime.jsx)(server.mo0,{size:"small"})})]}),body:(0,jsx_runtime.jsxs)("div",{className:"ht-100 jk-col stretch nowrap",children:[loaderAndInfo,(0,jsx_runtime.jsx)("div",{className:"jk-pg-xsm ow-ao flex-1",children:(0,jsx_runtime.jsx)("span",{className:"jk-text-stdout",children:null==test?void 0:test.testOut})})]})}),outputTabs.output={key:"output",header:(0,jsx_runtime.jsx)(atoms.T,{className:(0,helpers.xW)("tt-se tx-s",{"cr-er":(0,esm.E6g)(test,timeLimit,memoryLimit).failed}),children:"your output"}),body:(0,jsx_runtime.jsxs)("div",{className:"ht-100 jk-col stretch nowrap",children:[loaderAndInfo,(0,jsx_runtime.jsx)("div",{className:"jk-pg-xsm ow-ao flex-1",children:(0,jsx_runtime.jsx)("span",{className:"jk-text-stdout",children:null==test?void 0:test.out})})]})},outputTabs.error={key:"error",header:(0,jsx_runtime.jsx)(atoms.T,{className:(0,helpers.xW)("tt-se tx-s",{"cr-er":(0,esm.E6g)(test,timeLimit,memoryLimit).failed}),children:"error"}),body:(0,jsx_runtime.jsxs)("div",{className:"ht-100 jk-col stretch nowrap",children:[loaderAndInfo,(0,jsx_runtime.jsx)("div",{className:"jk-pg-xsm ow-ao flex-1",children:(0,jsx_runtime.jsx)("span",{className:"jk-text-stderr",children:null==test?void 0:test.err})})]})};const inputTabs={input:{key:"input",header:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se tx-s",children:"input"}),body:(null!=test&&test.sample?enableAddSampleCases:enableAddCustomSampleCases)&&onChange?(0,jsx_runtime.jsx)(atoms.fs,{style:{height:"calc(100% - 4px)",overflow:"auto",width:"calc(100% - 4px)",margin:2},className:"tx-s flex-1",value:null==test?void 0:test.in,onChange:value=>onChange({onTestCasesChange:testCases=>({...testCases,[null==test?void 0:test.key]:{...test,in:value}})})}):(0,jsx_runtime.jsx)("div",{className:(0,helpers.xW)("flex-1 ow-ao jk-pg-xsm"),children:(0,jsx_runtime.jsx)("span",{className:"jk-text-stdout",children:null==test?void 0:test.in})})}};return null!=test&&test.sample&&enableAddSampleCases&&(inputTabs.output={key:"output",header:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se tx-s",children:"output"}),body:onChange?(0,jsx_runtime.jsx)(atoms.fs,{style:{height:"calc(100% - 4px)",overflow:"auto",width:"calc(100% - 4px)",margin:2},className:"tx-s flex-1",value:null==test?void 0:test.testOut,onChange:value=>onChange({onTestCasesChange:testCases=>({...testCases,[null==test?void 0:test.key]:{...test,testOut:value}})})}):(0,jsx_runtime.jsx)("div",{className:"flex-1 ow-ao jk-pg-xsm",children:(0,jsx_runtime.jsx)("span",{className:"jk-text-stdout",children:null==test?void 0:test.testOut})})},inputTabs.settings={key:"settings",header:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se tx-s",children:"settings"}),body:(0,jsx_runtime.jsxs)("div",{className:"jk-col gap jk-pg-sm",children:[(0,jsx_runtime.jsx)(atoms.JN,{size:"small",checked:null==test?void 0:test.hidden,leftLabel:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se tx-s",children:"no hidden"}),rightLabel:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se tx-s",children:"hidden"}),onChange:onChange?hidden=>onChange({onTestCasesChange:testCases=>({...testCases,[null==test?void 0:test.key]:{...test,hidden}})}):void 0}),(0,jsx_runtime.jsx)(atoms.JN,{size:"small",checked:null==test?void 0:test.withPE,leftLabel:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se tx-s",children:"without PE"}),rightLabel:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se tx-s",children:"with PE"}),onChange:onChange?withPE=>onChange({onTestCasesChange:testCases=>({...testCases,[null==test?void 0:test.key]:{...test,withPE}})}):void 0})]})}),(0,jsx_runtime.jsxs)("div",{className:"jk-code-mirror-editor-test-cases jk-row stretch nowrap",children:[(0,jsx_runtime.jsxs)("div",{className:"jk-col nowrap stretch top tx-t border-right-highlight-light test-cases-header ow-ao",children:[(0,jsx_runtime.jsx)("div",{className:"jk-row ta-cr fw-bd jk-pg-xsm-tb border-bottom-highlight-light",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",style:{width:48},children:"test cases"})}),testCasesValues.map(((testCase,idx)=>(0,jsx_runtime.jsxs)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":(testCase.sample?"sample":"custom sample")+" case","data-tooltip-place":"top-start",onClick:()=>setTestCaseKey(testCase.key),className:(0,helpers.xW)("jk-row center hoverable jk-pg-xsm",{"bc-hl":testCase.key===testCaseKey}),children:["*"===testCase.key?(0,jsx_runtime.jsx)(atoms.T,{style:{width:48},className:"tt-se ta-cr",children:"default"}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se",children:testCase.sample?"s.":"c."})," ",testCase.index+1]}),(testCase.sample?enableAddSampleCases:enableAddCustomSampleCases)&&"*"!==testCase.key&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" ",(0,jsx_runtime.jsx)(server.d7y,{size:"small",className:"clickable br-50-pc","data-tooltip-id":"jk-tooltip","data-tooltip-content":"delete case","data-tooltip-place":"right",onClick:()=>{null==onChange||onChange({onTestCasesChange:testCases=>{const newTestCases={...testCases};return delete newTestCases[testCase.key],newTestCases}})}})]}),testCase.testOut&&(testCase.status===esm.aeR.EXECUTED_TEST_CASE||testCase.status===esm.aeR.FAILED_TEST_CASE)&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" ",(0,jsx_runtime.jsx)(ProblemVerdictTag.ProblemVerdictTag,{verdict:(0,esm.gBd)(testCase,timeLimit,memoryLimit).verdict,small:!0})]})]},testCase.key))),enableAddSampleCases&&onChange&&(0,jsx_runtime.jsx)("div",{className:"jk-row jk-pg-xsm-t border-top-highlight-light",children:(0,jsx_runtime.jsx)(AddCaseButton,{onChange,testCasesValues,testCases,sample:!0})}),enableAddCustomSampleCases&&onChange&&(0,jsx_runtime.jsx)("div",{className:"jk-row jk-pg-xsm-t border-top-highlight-light",children:(0,jsx_runtime.jsx)(AddCaseButton,{onChange,testCasesValues,testCases})})]}),!enableAddSampleCases&&null!=test&&test.hidden?(0,jsx_runtime.jsx)("div",{className:"jk-row center ht-100 flex-1",children:(0,jsx_runtime.jsx)(atoms.T,{className:"tt-se jk-tag info-light",children:"test input hidden"})}):(0,jsx_runtime.jsxs)(molecules.vh,{direction:"row"===direction?"column":"row",className:"flex-1",children:[(0,jsx_runtime.jsxs)("div",{className:"jk-col extend stretch nowrap",children:[(0,jsx_runtime.jsx)(molecules.gv,{tabs:inputTabs,selectedTabKey:inputTab,onChange:setInputTab,className:"border-bottom-highlight-light"}),(0,jsx_runtime.jsx)("div",{className:"flex-1 wh-100 pn-re ow-hn",children:(0,jsx_runtime.jsx)(molecules.QD,{tabs:inputTabs,selectedTabKey:inputTab})})]}),(0,jsx_runtime.jsxs)("div",{className:"jk-col stretch test-cases-output-stderr",children:[(0,jsx_runtime.jsx)(molecules.gv,{tabs:outputTabs,selectedTabKey:outputTab,onChange:setOutputTab,className:"border-bottom-highlight-light"}),(0,jsx_runtime.jsx)("div",{className:"flex-1 wh-100 pn-re ow-hn",children:(0,jsx_runtime.jsx)(molecules.QD,{tabs:outputTabs,selectedTabKey:outputTab})})]})]})]})};try{TestCases.displayName="TestCases",TestCases.__docgenInfo={description:"",displayName:"TestCases",props:{testCases:{defaultValue:null,description:"",name:"testCases",required:!1,type:{name:"CodeEditorTestCasesType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"CodeRunnerEditorOnChangeType<T>"}},timeLimit:{defaultValue:null,description:"",name:"timeLimit",required:!0,type:{name:"number"}},memoryLimit:{defaultValue:null,description:"",name:"memoryLimit",required:!0,type:{name:"number"}},direction:{defaultValue:null,description:"",name:"direction",required:!0,type:{name:"enum",value:[{value:'"column"'},{value:'"row"'}]}},enableAddSampleCases:{defaultValue:null,description:"",name:"enableAddSampleCases",required:!0,type:{name:"boolean"}},enableAddCustomSampleCases:{defaultValue:null,description:"",name:"enableAddCustomSampleCases",required:!0,type:{name:"boolean"}},isRunning:{defaultValue:null,description:"",name:"isRunning",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/CodeRunnerEditor/TestCases/index.tsx#TestCases"]={docgenInfo:TestCases.__docgenInfo,name:"TestCases",path:"src/components/organisms/CodeRunnerEditor/TestCases/index.tsx#TestCases"})}catch(__react_docgen_typescript_loader_error){}const CodeRunnerEditor=props=>{const{readOnly,sourceCode,languages=constants.Wx.map((lang=>{var _PROGRAMMING_LANGUAGE;return{value:lang,label:(null===(_PROGRAMMING_LANGUAGE=esm.tcq[lang])||void 0===_PROGRAMMING_LANGUAGE?void 0:_PROGRAMMING_LANGUAGE.label)||lang}})),language,onChange:_onChange,leftButtons,centerButtons,rightButtons,testCases,tabSize=4,fontSize=14,timeLimit=1e3,memoryLimit=512e3,expandPosition,className,enableAddCustomSampleCases,enableAddSampleCases,withoutRunCodeButton,onlyCodeEditor}=props;(0,hooks.pD)();const onChangeRef=(0,react.useRef)(_onChange);onChangeRef.current=readOnly?void 0:_onChange;const[isRunning,setIsRunning]=(0,react.useState)(!1),[runId,setRunId]=(0,react.useState)(""),sessionId=(0,hooks.kH)((state=>state.user.sessionId)),preferredTheme=(0,hooks.kH)((state=>state.user.settings[esm.mZ_.THEME])),[showSettings,setShowSettings]=(0,react.useState)(!1),[direction,setDirection]=(0,react.useState)("row"),[expanded,setExpanded]=(0,react.useState)(!1),{viewPortSize}=(0,useJukiUI.p)(),{width:headerWidthContainer=0,ref:headerRef}=(0,useResizeDetector.A)(constants.fV);(0,react.useEffect)((()=>{if(!runId)return;const event={event:esm.ad3.SUBSCRIBE_CODE_RUN_STATUS,sessionId,runId};return settings.u.SOCKET.subscribe(event,(data=>{var _data$log2,_data$log3,_data$log4,_onChangeRef$current2,_onChangeRef$current3,_onChangeRef$current4;if((0,esm.Tm$)(data)){var _data$log,_onChangeRef$current5;const fillTestCases=(status,err,out,log)=>{var _onChangeRef$current;null===(_onChangeRef$current=onChangeRef.current)||void 0===_onChangeRef$current||_onChangeRef$current.call(onChangeRef,{onTestCasesChange:prevState=>{const newTestCases={...prevState};for(const testKey in newTestCases){var _prevState$testKey;null!==(_prevState$testKey=prevState[testKey])&&void 0!==_prevState$testKey&&_prevState$testKey.messageTimestamp&&prevState[testKey].messageTimestamp>data.messageTimestamp||(newTestCases[testKey]={...newTestCases[testKey],status,err,out,log,messageTimestamp:data.messageTimestamp})}return newTestCases}})},status=data.status||esm.aeR.NONE,inputKey=null==data||null===(_data$log=data.log)||void 0===_data$log?void 0:_data$log.inputKey;switch(status){case esm.aeR.FAILED:case esm.aeR.COMPILING:case esm.aeR.COMPILED:case esm.aeR.COMPILATION_ERROR:fillTestCases(status,(null===(_data$log2=data.log)||void 0===_data$log2?void 0:_data$log2.err)||"",(null===(_data$log3=data.log)||void 0===_data$log3?void 0:_data$log3.out)||"",(null===(_data$log4=data.log)||void 0===_data$log4?void 0:_data$log4.log)||"");break;case esm.aeR.RUNNING_TEST_CASE:case esm.aeR.EXECUTED_TEST_CASE:case esm.aeR.FAILED_TEST_CASE:null===(_onChangeRef$current2=onChangeRef.current)||void 0===_onChangeRef$current2||_onChangeRef$current2.call(onChangeRef,{onTestCasesChange:prevState=>{const newTestCases={...prevState};if(inputKey&&newTestCases[inputKey]){var _data$log5,_data$log6,_data$log7,_prevState$testCase$k;const testCase={...newTestCases[inputKey],status,out:(null===(_data$log5=data.log)||void 0===_data$log5?void 0:_data$log5.out)||"",log:(null===(_data$log6=data.log)||void 0===_data$log6?void 0:_data$log6.log)||"",err:(null===(_data$log7=data.log)||void 0===_data$log7?void 0:_data$log7.err)||"",messageTimestamp:data.messageTimestamp};return null!==(_prevState$testCase$k=prevState[testCase.key])&&void 0!==_prevState$testCase$k&&_prevState$testCase$k.messageTimestamp&&prevState[testCase.key].messageTimestamp>testCase.messageTimestamp?prevState:{...prevState,[testCase.key]:testCase}}return prevState}})}switch(status){case esm.aeR.RECEIVED:setIsRunning(!0),null===(_onChangeRef$current3=onChangeRef.current)||void 0===_onChangeRef$current3||_onChangeRef$current3.call(onChangeRef,{isRunning:!0});break;case esm.aeR.FAILED:case esm.aeR.COMPILATION_ERROR:case esm.aeR.COMPLETED:setIsRunning(!1),null===(_onChangeRef$current4=onChangeRef.current)||void 0===_onChangeRef$current4||_onChangeRef$current4.call(onChangeRef,{isRunning:!1})}null===(_onChangeRef$current5=onChangeRef.current)||void 0===_onChangeRef$current5||_onChangeRef$current5.call(onChangeRef,{codeRunStatus:status})}})),()=>{settings.u.SOCKET.unsubscribeAll(event)}}),[runId,sessionId]);const codeEditorOnChange=(0,react.useCallback)((props=>{var _onChangeRef$current6;null===(_onChangeRef$current6=onChangeRef.current)||void 0===_onChangeRef$current6||_onChangeRef$current6.call(onChangeRef,{...props,isRunning:!1}),setIsRunning(!1)}),[]),isMobileViewPort="sm"===viewPortSize,firstChild=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)("div",{className:"editor-layout ht-100",children:(0,jsx_runtime.jsx)(molecules.BY,{theme:preferredTheme,onChange:codeEditorOnChange,language,readOnly,sourceCode,tabSize,fontSize})})),[preferredTheme,codeEditorOnChange,language,readOnly,sourceCode,tabSize,fontSize]),withTestCases=!!testCases,twoRows=headerWidthContainer<(withoutRunCodeButton?340:420),closableSecondPane=(0,react.useMemo)((()=>withTestCases?{align:"right",expandLabel:(0,jsx_runtime.jsx)(atoms.T,{className:"label tx-t",children:"test cases"})}:void 0),[withTestCases]),closableFirstPane=(0,react.useMemo)((()=>withTestCases&&isMobileViewPort?{align:"right",expandLabel:(0,jsx_runtime.jsx)(atoms.T,{className:"label tx-t",children:"code editor"})}:void 0),[withTestCases,isMobileViewPort]),secondChild=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(TestCases,{testCases,onChange:onChangeRef.current,timeLimit,memoryLimit,direction,enableAddSampleCases:!readOnly&&!!enableAddSampleCases,enableAddCustomSampleCases:!readOnly&&!!enableAddCustomSampleCases,isRunning})),[testCases,timeLimit,memoryLimit,direction,readOnly,enableAddSampleCases,enableAddCustomSampleCases,isRunning]),body=(0,jsx_runtime.jsxs)("div",{className:(0,helpers.xW)("jk-code-mirror-editor-layout jk-border-radius-inline jk-col nowrap stretch bc-we ht-100 wh-100 pn-re",{"elevation-1":expanded},className),style:{overflow:expanded?"hidden":void 0},children:[(0,jsx_runtime.jsx)(SettingsModal,{isOpen:showSettings,onClose:()=>setShowSettings(!1),onChange:onChangeRef.current,tabSize,fontSize}),(0,jsx_runtime.jsx)(Header,{headerRef,headerWidthContainer,twoRows,language,languages,sourceCode,testCases:testCases||{},leftOptions:_ref=>{let{widthContainer,twoRows,withLabels}=_ref;return null==leftButtons?void 0:leftButtons({isRunning,readOnly,sourceCode,languages,language,testCases:testCases||{},widthContainer,twoRows,withLabels})},centerOptions:_ref2=>{let{widthContainer,twoRows,withLabels}=_ref2;return null==centerButtons?void 0:centerButtons({isRunning,readOnly,sourceCode,languages,language,testCases:testCases||{},widthContainer,twoRows,withLabels})},rightOptions:_ref3=>{let{twoRows,withLabels}=_ref3;return null==rightButtons?void 0:rightButtons({isRunning,readOnly,sourceCode,languages,language,testCases:testCases||{},twoRows,withLabels})},setShowSettings,runId,setRunId,onChange:onChangeRef.current,timeLimit,memoryLimit,expanded:expandPosition?expanded:null,setExpanded,isRunning,withoutRunCodeButton:!!withoutRunCodeButton,readOnly:!!readOnly}),(0,jsx_runtime.jsx)("div",{className:"flex-1 ow-hn",children:onlyCodeEditor?firstChild:(0,jsx_runtime.jsxs)(molecules.vh,{direction,minSize:80,onlyFirstPane:!testCases,closableSecondPane,closableFirstPane,toggleable:!0,onChangeDirection:setDirection,onePanelAtATime:isMobileViewPort,className:"ht-100",children:[firstChild,secondChild]})})]});return expanded?(0,jsx_runtime.jsx)(atoms.ZL,{children:(0,jsx_runtime.jsx)("div",{className:"jk-overlay jk-overlay-backdrop",children:(0,jsx_runtime.jsx)("div",{style:{position:"absolute",...expandPosition},className:"jk-code-mirror-editor-expanded-layout",children:body})})}):body};try{CodeRunnerEditor.displayName="CodeRunnerEditor",CodeRunnerEditor.__docgenInfo={description:"",displayName:"CodeRunnerEditor",props:{sourceCode:{defaultValue:null,description:"",name:"sourceCode",required:!0,type:{name:"string"}},language:{defaultValue:null,description:"",name:"language",required:!0,type:{name:"T"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"CodeRunnerEditorOnChangeType<T>"}},languages:{defaultValue:null,description:"",name:"languages",required:!1,type:{name:"{ value: T; label: string; }[]"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},testCases:{defaultValue:null,description:"",name:"testCases",required:!1,type:{name:"CodeEditorTestCasesType"}},leftButtons:{defaultValue:null,description:"",name:"leftButtons",required:!1,type:{name:"CodeEditorCenterButtonsType<T>"}},centerButtons:{defaultValue:null,description:"",name:"centerButtons",required:!1,type:{name:"CodeEditorCenterButtonsType<T>"}},rightButtons:{defaultValue:null,description:"",name:"rightButtons",required:!1,type:{name:'((props: Omit<CodeEditorCenterButtonsPropertiesType<T>, "widthContainer">) => ReactNode)'}},timeLimit:{defaultValue:null,description:"",name:"timeLimit",required:!1,type:{name:"number"}},memoryLimit:{defaultValue:null,description:"",name:"memoryLimit",required:!1,type:{name:"number"}},expandPosition:{defaultValue:null,description:"",name:"expandPosition",required:!1,type:{name:"CodeEditorExpandPositionType"}},enableAddSampleCases:{defaultValue:null,description:"",name:"enableAddSampleCases",required:!1,type:{name:"boolean"}},enableAddCustomSampleCases:{defaultValue:null,description:"",name:"enableAddCustomSampleCases",required:!1,type:{name:"boolean"}},withoutRunCodeButton:{defaultValue:null,description:"",name:"withoutRunCodeButton",required:!1,type:{name:"boolean"}},onlyCodeEditor:{defaultValue:null,description:"",name:"onlyCodeEditor",required:!1,type:{name:"boolean"}},isRunning:{defaultValue:null,description:"",name:"isRunning",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"enum",value:[{value:'"LIGHT"'},{value:'"DARK"'}]}},tabSize:{defaultValue:null,description:"",name:"tabSize",required:!1,type:{name:"number"}},fontSize:{defaultValue:null,description:"",name:"fontSize",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/CodeRunnerEditor/CodeRunnerEditor.tsx#CodeRunnerEditor"]={docgenInfo:CodeRunnerEditor.__docgenInfo,name:"CodeRunnerEditor",path:"src/components/organisms/CodeRunnerEditor/CodeRunnerEditor.tsx#CodeRunnerEditor"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/organisms/ProblemVerdictTag/ProblemVerdictTag.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProblemVerdictTag:()=>ProblemVerdictTag});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),_stores_user_useUserStore__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/stores/user/useUserStore.ts")),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ProblemVerdictTag=_ref=>{var _PROBLEM_VERDICT$verd,_PROBLEM_VERDICT$verd2;let{verdict,small}=_ref;const addDark=(0,_stores_user_useUserStore__WEBPACK_IMPORTED_MODULE_2__.k)((state=>state.user.settings[_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.mZ_.THEME]))===_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.Sxu.DARK?"CC":"";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{"data-tooltip-id":"jk-tooltip","data-tooltip-content":null===(_PROBLEM_VERDICT$verd=_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.K7p[verdict])||void 0===_PROBLEM_VERDICT$verd?void 0:_PROBLEM_VERDICT$verd.label,"data-tooltip-t-class-name":"tt-se",className:"jk-tag tx-t",style:{backgroundColor:(null===(_PROBLEM_VERDICT$verd2=_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.K7p[verdict])||void 0===_PROBLEM_VERDICT$verd2?void 0:_PROBLEM_VERDICT$verd2.color)+addDark,...small?{lineHeight:1,padding:"2px 4px"}:{}},children:verdict})};try{ProblemVerdictTag.displayName="ProblemVerdictTag",ProblemVerdictTag.__docgenInfo={description:"",displayName:"ProblemVerdictTag",props:{verdict:{defaultValue:null,description:"",name:"verdict",required:!0,type:{name:"enum",value:[{value:'"NONE"'},{value:'"PENDING"'},{value:'"HIDDEN"'},{value:'"CE"'},{value:'"RE"'},{value:'"TLE"'},{value:'"MLE"'},{value:'"WA"'},{value:'"PE"'},{value:'"PA"'},{value:'"AC"'}]}},small:{defaultValue:null,description:"",name:"small",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/organisms/ProblemVerdictTag/ProblemVerdictTag.tsx#ProblemVerdictTag"]={docgenInfo:ProblemVerdictTag.__docgenInfo,name:"ProblemVerdictTag",path:"src/components/organisms/ProblemVerdictTag/ProblemVerdictTag.tsx#ProblemVerdictTag"})}catch(__react_docgen_typescript_loader_error){}}}]);