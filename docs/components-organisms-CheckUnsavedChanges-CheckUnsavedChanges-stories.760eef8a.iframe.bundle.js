"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[1131,22712,43232],{"./src/components/molecules/CodeViewer/CodeViewer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CodeViewer:()=>CodeViewer});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),highlight_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/highlight.js/es/index.js"),highlight_js_lib_languages_c__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/highlight.js/es/languages/c.js"),highlight_js_lib_languages_cpp__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/highlight.js/es/languages/cpp.js"),highlight_js_lib_languages_diff__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/highlight.js/es/languages/diff.js"),highlight_js_lib_languages_java__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/highlight.js/es/languages/java.js"),highlight_js_lib_languages_javascript__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/highlight.js/es/languages/javascript.js"),highlight_js_lib_languages_json__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/highlight.js/es/languages/json.js"),highlight_js_lib_languages_markdown__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/highlight.js/es/languages/markdown.js"),highlight_js_lib_languages_python__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/highlight.js/es/languages/python.js"),react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react/index.js"),_helpers__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/helpers/index.ts"),_stores_user_useUserStore__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/stores/user/useUserStore.ts"),_atoms__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/components/atoms/index.tsx");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}highlight_js__WEBPACK_IMPORTED_MODULE_1__.A.registerLanguage("c",highlight_js_lib_languages_c__WEBPACK_IMPORTED_MODULE_2__.A),highlight_js__WEBPACK_IMPORTED_MODULE_1__.A.registerLanguage("cpp",highlight_js_lib_languages_cpp__WEBPACK_IMPORTED_MODULE_3__.A),highlight_js__WEBPACK_IMPORTED_MODULE_1__.A.registerLanguage("markdown",highlight_js_lib_languages_markdown__WEBPACK_IMPORTED_MODULE_8__.A),highlight_js__WEBPACK_IMPORTED_MODULE_1__.A.registerLanguage("json",highlight_js_lib_languages_json__WEBPACK_IMPORTED_MODULE_7__.A),highlight_js__WEBPACK_IMPORTED_MODULE_1__.A.registerLanguage("java",highlight_js_lib_languages_java__WEBPACK_IMPORTED_MODULE_5__.A),highlight_js__WEBPACK_IMPORTED_MODULE_1__.A.registerLanguage("javascript",highlight_js_lib_languages_javascript__WEBPACK_IMPORTED_MODULE_6__.A),highlight_js__WEBPACK_IMPORTED_MODULE_1__.A.registerLanguage("python",highlight_js_lib_languages_python__WEBPACK_IMPORTED_MODULE_9__.A),highlight_js__WEBPACK_IMPORTED_MODULE_1__.A.registerLanguage("diff",highlight_js_lib_languages_diff__WEBPACK_IMPORTED_MODULE_4__.A);const CodeViewer=props=>{var _CODE_LANGUAGE$langua,_CODE_LANGUAGE$langua2,_CODE_LANGUAGE$langua3;const{code,language,lineNumbers=!0,height,style,maxHeight,className,fontSize}=props,codeRef=(0,react__WEBPACK_IMPORTED_MODULE_10__.useRef)(null),userPreferredFontSize=(0,_stores_user_useUserStore__WEBPACK_IMPORTED_MODULE_12__.k)(state=>{var _state$user$settings;return null===(_state$user$settings=state.user.settings)||void 0===_state$user$settings?void 0:_state$user$settings[_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.mZ_.FONT_SIZE]}),userFontSize=fontSize||userPreferredFontSize;(0,react__WEBPACK_IMPORTED_MODULE_10__.useEffect)(()=>{if(codeRef.current){const el=codeRef.current;el.removeAttribute("data-highlighted"),el.classList.remove(...Array.from(el.classList).filter(c=>c.startsWith("hljs"))),highlight_js__WEBPACK_IMPORTED_MODULE_1__.A.highlightElement(el)}},[language,code]);const lines=code.split("\n");return"\n"===code[code.length-1]&&lines.pop(),react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_11__.xW)("jk-code-viewer jk-br-ie br-g6",className,{"line-numbers":lineNumbers}),style:_objectSpread(_objectSpread({},style),{},{"--font-size":userFontSize+"px"})},react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:"jk-code-viewer-content jk-row nowrap top jk-br-ie",style:{maxHeight}},lineNumbers&&react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:"jk-code-viewer-line-numbers"},lines.map((_,i)=>react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{style:{"--line-index":i}},i+1))),react__WEBPACK_IMPORTED_MODULE_10__.createElement("pre",{style:height?{height}:void 0,className:"jk-border-radius-inline"},react__WEBPACK_IMPORTED_MODULE_10__.createElement("code",{ref:codeRef,key:language,className:"ta-lt language-".concat((null===(_CODE_LANGUAGE$langua=_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.fO_[language])||void 0===_CODE_LANGUAGE$langua?void 0:_CODE_LANGUAGE$langua.highlightJsKey)||"plaintext"),style:{minHeight:lines.length*(1.5*userFontSize)}},code))),react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:"float-top-right pad-xt jk-row gap"},!(null===(_CODE_LANGUAGE$langua2=_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.fO_[language])||void 0===_CODE_LANGUAGE$langua2||!_CODE_LANGUAGE$langua2.label)&&react__WEBPACK_IMPORTED_MODULE_10__.createElement("div",{className:"tx-t jk-tag bc-pl cr-we jk-pg-xsm"},null===(_CODE_LANGUAGE$langua3=_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.fO_[language])||void 0===_CODE_LANGUAGE$langua3?void 0:_CODE_LANGUAGE$langua3.label),react__WEBPACK_IMPORTED_MODULE_10__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_13__.$r,{text:code,size:"small"})))};CodeViewer.__docgenInfo={description:"",methods:[],displayName:"CodeViewer",props:{code:{required:!0,tsType:{name:"string"},description:""},language:{required:!0,tsType:{name:"CodeLanguage"},description:""},lineNumbers:{required:!1,tsType:{name:"boolean"},description:""},height:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},maxHeight:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},fontSize:{required:!1,tsType:{name:"number"},description:""}}}},"./src/components/organisms/CheckUnsavedChanges/CheckUnsavedChanges.stories.tsx":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(module,async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_components_mockup__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/mockup/index.ts"),_contexts_NotificationProvider_NotificationProvider__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/contexts/NotificationProvider/NotificationProvider.tsx"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/atoms/index.tsx"),_atoms_server__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/atoms/server/index.ts"),_molecules__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/molecules/index.tsx"),_CheckUnsavedChanges__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/organisms/CheckUnsavedChanges/CheckUnsavedChanges.tsx"),__webpack_async_dependencies__=__webpack_handle_async_dependencies__([_components_mockup__WEBPACK_IMPORTED_MODULE_1__]),__webpack_async_dependencies_result__=__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__;_components_mockup__WEBPACK_IMPORTED_MODULE_1__=__webpack_async_dependencies_result__[0];const __WEBPACK_DEFAULT_EXPORT__={component:_contexts_NotificationProvider_NotificationProvider__WEBPACK_IMPORTED_MODULE_2__.p},Component=()=>{const{addInfoNotification}=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.Eq)(),[entityData,setEntityData]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({name:"Juan",description:"line 1\nline 2\nline 2.5\nline 3",age:30,isAdmin:!1,skills:["JavaScript","HTML","CSS"],address:{city:"Madrid",zip:28001},projects:[{id:1,name:"Proyecto A"},{id:2,name:"Proyecto B"}],notes:"Este es un texto original",A:{B:{C:{D:"123456\n",E:"123456"}}}});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{setTimeout(()=>{setEntityData({name:"Juan Pérez",description:"line 1 newend\nline new 2\nline 2.5\n3\nline 4",age:31,isAdmin:!0,skills:["JavaScript","TypeScript","HTML","CSS3"],address:{city:"Barcelona",zip:8001,country:"España"},projects:[{id:1,name:"Proyecto Alpha"},{id:3,name:"Proyecto C"}],notes:"Este es un texto modificado con más detalles",newField:null,A:{B:{C:{D:"123456",E:"123456\n"}}}})},1e3)},[]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CheckUnsavedChanges__WEBPACK_IMPORTED_MODULE_7__.CheckUnsavedChanges,{key:"cancel",onClickContinue:()=>addInfoNotification("continue"),value:entityData},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_molecules__WEBPACK_IMPORTED_MODULE_6__.mT,{type:"light",size:"small",icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms_server__WEBPACK_IMPORTED_MODULE_5__.USm,null),responsiveMobile:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_4__.T,{className:"tt-se"},"cancel"))),",",react__WEBPACK_IMPORTED_MODULE_0__.createElement("pre",null,JSON.stringify(entityData,null,2)))},Primary={render:()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_mockup__WEBPACK_IMPORTED_MODULE_1__.Ag,null," ",react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,null))},__namedExportsOrder=["Primary"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"{\n  render: () => <MockupJukiProvider> <Component /></MockupJukiProvider>\n} satisfies Story",...Primary.parameters?.docs?.source}}},__webpack_async_result__()}catch(e){__webpack_async_result__(e)}})},"./src/components/organisms/CheckUnsavedChanges/CheckUnsavedChanges.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CheckUnsavedChanges:()=>CheckUnsavedChanges});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js"),diff__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/diff/libesm/diff/word.js"),diff__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/diff/libesm/diff/line.js"),microdiff__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/microdiff/dist/index.js"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_stores_sound_useSoundStore__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/stores/sound/useSoundStore.ts"),_atoms__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/atoms/index.tsx"),_molecules__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/molecules/index.tsx"),_molecules_CodeViewer_CodeViewer__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/molecules/CodeViewer/CodeViewer.tsx");function objectDiffAsBash(objA,objB){const changes=(0,microdiff__WEBPACK_IMPORTED_MODULE_3__.A)(objA,objB);let output="";for(const change of changes){const path=change.path.join(".");if(output+="  ".concat(path,":\n"),"CHANGE"===change.type)if("string"==typeof change.oldValue&&"string"==typeof change.value){const lineDiff=(0,diff__WEBPACK_IMPORTED_MODULE_2__.Pp)(change.oldValue,change.value);for(const line of lineDiff)if(line.added)output+="+ ".concat(line.value.replaceAll("\n","⏎"),"\n");else if(line.removed)output+="- ".concat(line.value.replaceAll("\n","⏎"),"\n");else{const wordDiff=(0,diff__WEBPACK_IMPORTED_MODULE_1__.b2)(line.value,line.value);for(const part of wordDiff)part.added?output+="+ ".concat(part.value.replaceAll("\n","⏎"),"\n"):part.removed?output+="- ".concat(part.value.replaceAll("\n","⏎"),"\n"):output+="  ".concat(line.value.replaceAll("\n","⏎"),"\n")}}else output+="- ".concat(JSON.stringify(change.oldValue),"\n"),output+="+ ".concat(JSON.stringify(change.value),"\n");"CREATE"===change.type&&(output+="+ ".concat(JSON.stringify(change.value),"\n")),"REMOVE"===change.type&&(output+="- ".concat(JSON.stringify(change.oldValue),"\n")),output+="\n"}return output}const CheckUnsavedChanges=props=>{const{children,onClickContinue,value}=props,originalValueRef=(0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(value),[modal,setModal]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(null),playWarning=(0,_stores_sound_useSoundStore__WEBPACK_IMPORTED_MODULE_5__.i)(state=>state.playWarning);return react__WEBPACK_IMPORTED_MODULE_4__.createElement(react__WEBPACK_IMPORTED_MODULE_4__.Fragment,null,modal,(0,react__WEBPACK_IMPORTED_MODULE_4__.cloneElement)(children,{onClick:()=>{const differences=(0,microdiff__WEBPACK_IMPORTED_MODULE_3__.A)(originalValueRef.current,value);JSON.stringify(originalValueRef.current)===JSON.stringify(value)||0===Object.keys(differences).length?onClickContinue():(playWarning(),setModal(react__WEBPACK_IMPORTED_MODULE_4__.createElement(_molecules__WEBPACK_IMPORTED_MODULE_7__.kF,{isOpen:!0,title:react__WEBPACK_IMPORTED_MODULE_4__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_6__.T,{className:"tt-se"},"attention"),primary:{onClick:()=>setModal(null),label:react__WEBPACK_IMPORTED_MODULE_4__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_6__.T,{className:"tt-se"},"close")},secondary:{onClick:onClickContinue,label:react__WEBPACK_IMPORTED_MODULE_4__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_6__.T,{className:"tt-se"},"continue without saving")},onClose:()=>setModal(null)},react__WEBPACK_IMPORTED_MODULE_4__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_4__.createElement(_atoms__WEBPACK_IMPORTED_MODULE_6__.T,{className:"tt-se"},"there are unsaved changes"),":",react__WEBPACK_IMPORTED_MODULE_4__.createElement("div",{className:"alert-modal-json-viewer jk-border-radius-inline"},react__WEBPACK_IMPORTED_MODULE_4__.createElement(_molecules_CodeViewer_CodeViewer__WEBPACK_IMPORTED_MODULE_8__.CodeViewer,{code:objectDiffAsBash(originalValueRef.current,value),language:_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.aFm.DIFF,maxHeight:"calc(var(--modal-max-height) - var(--size-large-icon) - (var(--font-size-h3) * var(--line-height-head)) - (var(--pad-md) *2) - (var(--gap) * 4) - var(--text-medium-height) - (var(--text-medium-height) * 2))"}))))))}}))};CheckUnsavedChanges.__docgenInfo={description:"",methods:[],displayName:"CheckUnsavedChanges",props:{children:{required:!0,tsType:{name:"ReactElement"},description:""},onClickContinue:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},value:{required:!0,tsType:{name:"T"},description:""}}}}}]);