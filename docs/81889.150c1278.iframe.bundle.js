"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[81889],{"./src/components/organisms/Graphviz/Graphviz/Graphviz.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>Graphviz});var d3_graphviz__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-graphviz/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const defaultOptions={fit:!0,zoom:!1,useWorker:!1},Graphviz=(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((_ref,ref)=>{let{dot,className,options={}}=_ref;const containerRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{var _graphviz$onerror,_graphviz;const el=containerRef.current;if(!el)return;el.innerHTML="";const gv=null===(_graphviz$onerror=(_graphviz=(0,d3_graphviz__WEBPACK_IMPORTED_MODULE_0__.C)(el,_objectSpread(_objectSpread({},defaultOptions),options))).onerror)||void 0===_graphviz$onerror?void 0:_graphviz$onerror.call(_graphviz,e=>{console.error((null==e?void 0:e.message)||String(e))});try{gv.renderDot(dot)}catch(e){console.error((null==e?void 0:e.message)||String(e))}return()=>{try{el.innerHTML=""}catch(_unused){}}},[dot,null==options?void 0:options.width,null==options?void 0:options.height,null==options?void 0:options.fit,null==options?void 0:options.zoom]),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className,ref:el=>{containerRef.current=el,"function"==typeof ref?ref(el):ref&&(ref.current=el)}})});Graphviz.__docgenInfo={description:"",methods:[],displayName:"Graphviz",props:{dot:{required:!0,tsType:{name:"string"},description:"A string containing a graph representation using the Graphviz DOT language.\r\n@see https://graphviz.org/doc/info/lang.html"},options:{required:!1,tsType:{name:"GraphvizOptions"},description:"Options to pass to the Graphviz renderer.",defaultValue:{value:"{}",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"The classname to attach to this component for styling purposes."}}}},"./src/components/organisms/Graphviz/GraphvizEditor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{GraphvizEditor:()=>GraphvizEditor});var react=__webpack_require__("./node_modules/react/index.js"),useResizeDetector=__webpack_require__("./node_modules/react-resize-detector/build/useResizeDetector.js"),constants=__webpack_require__("./src/constants/index.ts"),atoms=__webpack_require__("./src/components/atoms/index.tsx"),server=__webpack_require__("./src/components/atoms/server/index.ts"),molecules=__webpack_require__("./src/components/molecules/index.tsx"),Graphviz=__webpack_require__("./src/components/organisms/Graphviz/Graphviz/Graphviz.tsx"),graphlib_dot=__webpack_require__("./node_modules/graphlib-dot/index.js");const GraphvizEditor=_ref=>{let{value,onSave}=_ref;const{ref,width=0}=(0,useResizeDetector.A)(constants.fV),{dot,error}=(value=>{const[error,setError]=(0,react.useState)(""),[dot,setDot]=(0,react.useState)("graph {}");return(0,react.useEffect)(()=>{try{(0,graphlib_dot.read)(value),setDot(value),setError("")}catch(err){setError("Parse Error: ".concat(err.message))}},[value]),{dot,error}})(value);return react.createElement("div",{className:"jk-graph-editor-modal jk-col nowrap gap stretch wh-100"},react.createElement(molecules.vh,{style:{height:"calc(".concat(24*((null==value?void 0:value.split("\n").length)||1),"px + var(--pad-sm) * 3 + 24px + 8px)")}},react.createElement("div",{className:"jk-col jk-pg-xsm ht-100"},error?react.createElement(atoms.AM,{content:react.createElement("div",{className:"jk-tag bc-er",style:{maxWidth:128}},error)},react.createElement("div",{className:"jk-row"},react.createElement(server.IJR,{className:"cr-er"}))):react.createElement("div",{className:"jk-row"},react.createElement(server.Srz,{className:"cr-ss"})),react.createElement(atoms.fs,{value,onChange:onSave,className:"ws-np flex-1"})),react.createElement("div",{className:"jk-row",style:{overflow:"auto"},ref},react.createElement(Graphviz.i,{dot,className:"jk-graph",options:{width:width-20}}))))};GraphvizEditor.__docgenInfo={description:"",methods:[],displayName:"GraphvizEditor",props:{value:{required:!0,tsType:{name:"string"},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"newValue"}],return:{name:"void"}}},description:""}}}}}]);