"use strict";(self.webpackChunk_juki_team_base_ui=self.webpackChunk_juki_team_base_ui||[]).push([[2762,3963],{"./src/components/molecules/timers/Timer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Timer:()=>Timer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/helpers/index.ts"),_hooks_custom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/custom.ts"),_atoms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/atoms/index.tsx"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/molecules/timers/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Timer=react__WEBPACK_IMPORTED_MODULE_0__.memo(props=>{const{currentTimestamp,laps=3,interval=1,literal,ignoreLeadingZeros=!1,ignoreTrailingZeros=!1}=props,[counter,setCounter]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({remaining:currentTimestamp,startTimestamp:0});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const slack=currentTimestamp%Math.abs(interval),startCounting=setTimeout(()=>{setCounter({remaining:currentTimestamp,startTimestamp:Date.now()})},slack);return()=>{clearTimeout(startCounting)}},[interval,currentTimestamp]),(0,_hooks_custom__WEBPACK_IMPORTED_MODULE_2__.$$)(()=>{const startTimestamp=Date.now();setCounter(prevState=>({startTimestamp,remaining:prevState.remaining-(interval<0?startTimestamp-prevState.startTimestamp:prevState.startTimestamp-startTimestamp)}))},Math.abs(interval));const timeSplit=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.E)(counter.remaining,laps,ignoreLeadingZeros,ignoreTrailingZeros);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:(0,_helpers__WEBPACK_IMPORTED_MODULE_1__.xW)("jk-timer-layout jk-row nowrap",{literal:!!literal}),children:literal?timeSplit.map((remaining,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[index>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.T,{children:"and"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{children:remaining.remaining}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.T,{children:remaining.label})]},remaining.label)):timeSplit.map((remaining,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"content-stamp",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"content-number tx-s fw-bd jk-row",children:remaining.remaining}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"content-label tx-t fw-bd tt-ue jk-row",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_3__.T,{children:remaining.label})})]}),index!==timeSplit.length-1&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{className:"content-dots tx-l fw-bd",children:":"})]},remaining.label))})});Timer.__docgenInfo={description:"",methods:[],displayName:"Timer",props:{currentTimestamp:{required:!0,tsType:{name:"number"},description:""},laps:{required:!1,tsType:{name:"number"},description:""},interval:{required:!1,tsType:{name:"number"},description:""},literal:{required:!1,tsType:{name:"boolean"},description:""},ignoreLeadingZeros:{required:!1,tsType:{name:"boolean"},description:""},ignoreTrailingZeros:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/components/molecules/timers/TimerLabeled.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TimerLabeled:()=>TimerLabeled});var _Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/types/index.ts"),_atoms__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/atoms/index.tsx"),_Timer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/molecules/timers/Timer.tsx"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/molecules/timers/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const DEFAULT_LABELS={[_types__WEBPACK_IMPORTED_MODULE_1__.Period.FUTURE]:"stars in",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_START]:"starts ago",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_END]:"ends in",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.PAST]:"ended ago",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.TIME_OUT]:"time out",[_types__WEBPACK_IMPORTED_MODULE_1__.Period.CALC]:"..."},TimerLabeled=_ref=>{let{startDate,endDate,currentDate,labels,laps:_laps=3}=_ref;const[time,setTime]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({period:_types__WEBPACK_IMPORTED_MODULE_1__.Period.CALC,remaining:0,interval:0});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const current=currentDate||new Date;let period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.CALC,remaining=0,interval=0;startDate<current&&current<endDate?(period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_END,remaining=endDate.getTime()-current.getTime(),interval=-1):endDate<current&&current<startDate?(period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_START,remaining=current.getTime()-endDate.getTime(),interval=1):current<startDate?(period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.FUTURE,remaining=startDate.getTime()-current.getTime(),interval=-1):current>endDate&&(period=_types__WEBPACK_IMPORTED_MODULE_1__.Period.PAST,remaining=current.getTime()-endDate.getTime(),interval=1),setTime({period,remaining,interval});const timeout=setTimeout(()=>{period!==_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_START&&period!==_types__WEBPACK_IMPORTED_MODULE_1__.Period.LIVE_END&&period!==_types__WEBPACK_IMPORTED_MODULE_1__.Period.FUTURE||setTime({period:_types__WEBPACK_IMPORTED_MODULE_1__.Period.TIME_OUT,remaining:0,interval:0})},remaining);return()=>{clearTimeout(timeout)}},[currentDate,endDate,startDate]);const laps=Math.min(Math.max(0,_laps),6),myLabels=(0,_Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.A)((0,_Users_oscargauss_Documents_JUKI_base_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.A)({},DEFAULT_LABELS),labels),timeSplit=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.E)(Math.max(time.remaining,0),laps,!1,!1),timeInterval=Math.max(timeSplit[timeSplit.length-1].milliseconds,1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"layout-timer-clock",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"label-period tx-s fw-bd",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_atoms__WEBPACK_IMPORTED_MODULE_2__.T,{children:myLabels[time.period]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Timer__WEBPACK_IMPORTED_MODULE_3__.Timer,{laps,currentTimestamp:time.remaining,interval:time.interval*timeInterval})]})};TimerLabeled.__docgenInfo={description:"",methods:[],displayName:"TimerLabeled",props:{startDate:{required:!0,tsType:{name:"Date"},description:""},endDate:{required:!0,tsType:{name:"Date"},description:""},currentDate:{required:!1,tsType:{name:"Date"},description:""},labels:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key in Period]: string }",signature:{properties:[{key:{name:"Period",required:!0},value:{name:"string"}}]}},description:""},laps:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"3",computed:!1}}}}},"./src/components/molecules/timers/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>cutTimeSplit});var _juki_team_commons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@juki-team/commons/dist/esm/index.js");const cutTimeSplit=(remaining,laps,ignoreLeadingZeros,ignoreTrailingZeros)=>{let timeSplit=(0,_juki_team_commons__WEBPACK_IMPORTED_MODULE_0__.SBk)(Math.max(remaining,0));for(;timeSplit[0].remaining<=0&&timeSplit.length>laps;)timeSplit.shift();for(;ignoreLeadingZeros&&timeSplit.length&&0===timeSplit[0].remaining;)timeSplit.shift();for(;ignoreTrailingZeros&&timeSplit.length&&0===timeSplit[timeSplit.length-1].remaining;)timeSplit.pop();return timeSplit.splice(0,laps)}}}]);